---
import DocLayout from '../layouts/DocLayout.astro';
import Screenshot from '../components/Screenshot.astro';
import InfoBox from '../components/InfoBox.astro';
import StepList from '../components/StepList.astro';
import { t } from '../i18n';
---

<DocLayout
  title={t('pages.offlinePwa.title')}
  description={t('pages.offlinePwa.description')}
>
  <h1 data-i18n="offlinePwa.heading">{t('offlinePwa.heading')}</h1>

  <p class="lead text-text-secondary dark:text-text-secondary-dark" data-i18n="offlinePwa.lead">
    {t('offlinePwa.lead')}
  </p>

  <h2 data-i18n="offlinePwa.whatIsPwa.title">{t('offlinePwa.whatIsPwa.title')}</h2>

  <p data-i18n="offlinePwa.whatIsPwa.description">{t('offlinePwa.whatIsPwa.description')}</p>

  <ul>
    <li data-i18n="offlinePwa.whatIsPwa.benefits.homeScreen">{t('offlinePwa.whatIsPwa.benefits.homeScreen')}</li>
    <li data-i18n="offlinePwa.whatIsPwa.benefits.ownWindow">{t('offlinePwa.whatIsPwa.benefits.ownWindow')}</li>
    <li data-i18n="offlinePwa.whatIsPwa.benefits.worksOffline">{t('offlinePwa.whatIsPwa.benefits.worksOffline')}</li>
    <li data-i18n="offlinePwa.whatIsPwa.benefits.autoUpdates">{t('offlinePwa.whatIsPwa.benefits.autoUpdates')}</li>
    <li data-i18n="offlinePwa.whatIsPwa.benefits.minimalStorage">{t('offlinePwa.whatIsPwa.benefits.minimalStorage')}</li>
  </ul>

  <InfoBox type="tip">
    <p data-i18n="offlinePwa.whatIsPwa.tip">
      {t('offlinePwa.whatIsPwa.tip')}
    </p>
  </InfoBox>

  <h2 data-i18n="offlinePwa.installing.title">{t('offlinePwa.installing.title')}</h2>

  <p data-i18n="offlinePwa.installing.description">{t('offlinePwa.installing.description')}</p>

  <h3 data-i18n="offlinePwa.installing.ios.title">{t('offlinePwa.installing.ios.title')}</h3>

  <StepList
    steps={[
      {
        title: t('offlinePwa.installing.ios.steps.openSafari.title'),
        description: t('offlinePwa.installing.ios.steps.openSafari.description'),
        titleKey: 'offlinePwa.installing.ios.steps.openSafari.title',
        descriptionKey: 'offlinePwa.installing.ios.steps.openSafari.description',
      },
      {
        title: t('offlinePwa.installing.ios.steps.tapShare.title'),
        description: t('offlinePwa.installing.ios.steps.tapShare.description'),
        titleKey: 'offlinePwa.installing.ios.steps.tapShare.title',
        descriptionKey: 'offlinePwa.installing.ios.steps.tapShare.description',
      },
      {
        title: t('offlinePwa.installing.ios.steps.selectAddHome.title'),
        description: t('offlinePwa.installing.ios.steps.selectAddHome.description'),
        titleKey: 'offlinePwa.installing.ios.steps.selectAddHome.title',
        descriptionKey: 'offlinePwa.installing.ios.steps.selectAddHome.description',
      },
      {
        title: t('offlinePwa.installing.ios.steps.confirmInstall.title'),
        description: t('offlinePwa.installing.ios.steps.confirmInstall.description'),
        titleKey: 'offlinePwa.installing.ios.steps.confirmInstall.title',
        descriptionKey: 'offlinePwa.installing.ios.steps.confirmInstall.description',
      },
    ]}
  />

  <h3 data-i18n="offlinePwa.installing.android.title">{t('offlinePwa.installing.android.title')}</h3>

  <StepList
    steps={[
      {
        title: t('offlinePwa.installing.android.steps.openChrome.title'),
        description: t('offlinePwa.installing.android.steps.openChrome.description'),
        titleKey: 'offlinePwa.installing.android.steps.openChrome.title',
        descriptionKey: 'offlinePwa.installing.android.steps.openChrome.description',
      },
      {
        title: t('offlinePwa.installing.android.steps.lookForPrompt.title'),
        description: t('offlinePwa.installing.android.steps.lookForPrompt.description'),
        titleKey: 'offlinePwa.installing.android.steps.lookForPrompt.title',
        descriptionKey: 'offlinePwa.installing.android.steps.lookForPrompt.description',
      },
      {
        title: t('offlinePwa.installing.android.steps.tapInstall.title'),
        description: t('offlinePwa.installing.android.steps.tapInstall.description'),
        titleKey: 'offlinePwa.installing.android.steps.tapInstall.title',
        descriptionKey: 'offlinePwa.installing.android.steps.tapInstall.description',
      },
    ]}
  />

  <Screenshot
    id="install-prompt"
    alt={t('offlinePwa.installing.screenshotAlt')}
    caption={t('offlinePwa.installing.screenshotCaption')}
    altKey="offlinePwa.installing.screenshotAlt"
    captionKey="offlinePwa.installing.screenshotCaption"
    instructions="Take a screenshot of the PWA install prompt or banner. Show the VolleyKit icon, name, and install button. If possible, show both iOS and Android versions."
  />

  <h3 data-i18n="offlinePwa.installing.desktop.title">{t('offlinePwa.installing.desktop.title')}</h3>

  <p data-i18n="offlinePwa.installing.desktop.description">{t('offlinePwa.installing.desktop.description')}</p>

  <h2 data-i18n="offlinePwa.whatWorksOffline.title">{t('offlinePwa.whatWorksOffline.title')}</h2>

  <p data-i18n="offlinePwa.whatWorksOffline.description">{t('offlinePwa.whatWorksOffline.description')}</p>

  <table class="w-full text-sm">
    <thead>
      <tr class="border-b border-border-default dark:border-border-default-dark">
        <th class="py-2 text-left" data-i18n="offlinePwa.whatWorksOffline.table.feature">{t('offlinePwa.whatWorksOffline.table.feature')}</th>
        <th class="py-2 text-center" data-i18n="offlinePwa.whatWorksOffline.table.offline">{t('offlinePwa.whatWorksOffline.table.offline')}</th>
        <th class="py-2 text-left" data-i18n="offlinePwa.whatWorksOffline.table.notes">{t('offlinePwa.whatWorksOffline.table.notes')}</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-border-subtle dark:border-border-subtle-dark">
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.viewAssignments">{t('offlinePwa.whatWorksOffline.table.viewAssignments')}</td>
        <td class="py-2 text-center">✓</td>
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.viewAssignmentsNote">{t('offlinePwa.whatWorksOffline.table.viewAssignmentsNote')}</td>
      </tr>
      <tr class="border-b border-border-subtle dark:border-border-subtle-dark">
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.viewDetails">{t('offlinePwa.whatWorksOffline.table.viewDetails')}</td>
        <td class="py-2 text-center">✓</td>
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.viewDetailsNote">{t('offlinePwa.whatWorksOffline.table.viewDetailsNote')}</td>
      </tr>
      <tr class="border-b border-border-subtle dark:border-border-subtle-dark">
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.travelTimes">{t('offlinePwa.whatWorksOffline.table.travelTimes')}</td>
        <td class="py-2 text-center">✓</td>
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.travelTimesNote">{t('offlinePwa.whatWorksOffline.table.travelTimesNote')}</td>
      </tr>
      <tr class="border-b border-border-subtle dark:border-border-subtle-dark">
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.confirmAssignments">{t('offlinePwa.whatWorksOffline.table.confirmAssignments')}</td>
        <td class="py-2 text-center">✗</td>
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.confirmAssignmentsNote">{t('offlinePwa.whatWorksOffline.table.confirmAssignmentsNote')}</td>
      </tr>
      <tr class="border-b border-border-subtle dark:border-border-subtle-dark">
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.requestExchanges">{t('offlinePwa.whatWorksOffline.table.requestExchanges')}</td>
        <td class="py-2 text-center">✗</td>
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.requestExchangesNote">{t('offlinePwa.whatWorksOffline.table.requestExchangesNote')}</td>
      </tr>
      <tr>
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.viewCompensations">{t('offlinePwa.whatWorksOffline.table.viewCompensations')}</td>
        <td class="py-2 text-center">✓</td>
        <td class="py-2" data-i18n="offlinePwa.whatWorksOffline.table.viewCompensationsNote">{t('offlinePwa.whatWorksOffline.table.viewCompensationsNote')}</td>
      </tr>
    </tbody>
  </table>

  <InfoBox type="info">
    <p data-i18n="offlinePwa.whatWorksOffline.infoBox">
      {t('offlinePwa.whatWorksOffline.infoBox')}
    </p>
  </InfoBox>

  <h2 data-i18n="offlinePwa.offlineIndicator.title">{t('offlinePwa.offlineIndicator.title')}</h2>

  <p data-i18n="offlinePwa.offlineIndicator.description">{t('offlinePwa.offlineIndicator.description')}</p>

  <Screenshot
    id="offline-indicator"
    alt={t('offlinePwa.offlineIndicator.screenshotAlt')}
    caption={t('offlinePwa.offlineIndicator.screenshotCaption')}
    altKey="offlinePwa.offlineIndicator.screenshotAlt"
    captionKey="offlinePwa.offlineIndicator.screenshotCaption"
    instructions="Take a screenshot showing the offline indicator. This could be a banner at the top, an icon in the header, or a toast message indicating offline status."
  />

  <h2 data-i18n="offlinePwa.updating.title">{t('offlinePwa.updating.title')}</h2>

  <p data-i18n="offlinePwa.updating.description">{t('offlinePwa.updating.description')}</p>

  <ol>
    <li data-i18n="offlinePwa.updating.steps.backgroundDownload">{t('offlinePwa.updating.steps.backgroundDownload')}</li>
    <li data-i18n="offlinePwa.updating.steps.notificationAppears">{t('offlinePwa.updating.steps.notificationAppears')}</li>
    <li data-i18n="offlinePwa.updating.steps.tapReload">{t('offlinePwa.updating.steps.tapReload')}</li>
  </ol>

  <Screenshot
    id="update-prompt"
    alt={t('offlinePwa.updating.screenshotAlt')}
    caption={t('offlinePwa.updating.screenshotCaption')}
    altKey="offlinePwa.updating.screenshotAlt"
    captionKey="offlinePwa.updating.screenshotCaption"
    instructions="Take a screenshot of the update available prompt/toast. Show the reload button and any message about the new version being ready."
  />

  <InfoBox type="tip">
    <p data-i18n="offlinePwa.updating.tip">
      {t('offlinePwa.updating.tip')}
    </p>
  </InfoBox>

  <h2 data-i18n="offlinePwa.storage.title">{t('offlinePwa.storage.title')}</h2>

  <p data-i18n="offlinePwa.storage.description">{t('offlinePwa.storage.description')}</p>

  <InfoBox type="warning">
    <p data-i18n="offlinePwa.storage.warning">
      {t('offlinePwa.storage.warning')}
    </p>
  </InfoBox>
</DocLayout>
