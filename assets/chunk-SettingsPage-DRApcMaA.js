const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-SafeModeWarningModal-BXEn8XEz.js","assets/index-C4hWhcHo.js","assets/chunk-state-CZJejFfH.js","assets/chunk-router-CqUdIx6-.js","assets/chunk-validation-Cdg1t4SS.js","assets/index-CX2Uz5nv.css"])))=>i.map(i=>d[i]);
import{a,j as e,u as te}from"./chunk-state-CZJejFfH.js";import{c as pe,u as v,e as H,a7 as C,a8 as T,a9 as S,aa as he,ab as fe,ac as ge,a3 as P,h as D,ad as be,B as N,ae as X,af as q,ag as ke,q as se,ah as Q,ai as je,_ as ye,$ as Ne,aj as ve,ak as Ce,al as Te,o as Se,K as we}from"./index-C4hWhcHo.js";import{B as Le,M as $,u as Ae,g as De,c as Me,T as Z,N as Ee}from"./chunk-useTravelTime-DQGtEP21.js";import{u as _e,I as U}from"./chunk-useDebouncedValue-BCAVDxa6.js";import{C as re}from"./chunk-SafeModeWarningModal-BXEn8XEz.js";import{u as Re}from"./chunk-ojp-client-DFg4uU9R.js";import"./chunk-router-CqUdIx6-.js";import"./chunk-validation-Cdg1t4SS.js";const Ie=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Pe=pe("book-open",Ie),z="https://volleykit-proxy.ngn-damien.workers.dev",Be=12345,Fe="Demo",Ue="User";function Oe({user:s}){const{t:r}=v(),t=H(h=>h.dataSource),i=H(h=>h.calendarCode),n=t==="demo",[d,l]=a.useState(s.profilePictureUrl??null),[p,b]=a.useState(n?Be:null),[m,c]=a.useState(n?Fe:s.firstName),[x,u]=a.useState(n?Ue:s.lastName),[w,L]=a.useState(!1);return a.useEffect(()=>{if(n||!s.id)return;const h=new AbortController;async function A(){try{const g=new URLSearchParams;g.set("person[__identity]",s.id),g.set("propertyRenderConfiguration[0]","firstName"),g.set("propertyRenderConfiguration[1]","lastName"),g.set("propertyRenderConfiguration[2]","svNumber"),g.set("propertyRenderConfiguration[3]","associationId"),g.set("propertyRenderConfiguration[4]","hasProfilePicture"),g.set("propertyRenderConfiguration[5]","profilePicture"),g.set("propertyRenderConfiguration[6]","profilePicture.publicResourceUri");const M=await fetch(`${z}/sportmanager.volleyball/api%5Cperson/showWithNestedObjects?${g}`,{credentials:"include",signal:h.signal,headers:{Accept:"application/json"}});if(M.ok){const k=(await M.json()).person;if(k?.profilePicture?.publicResourceUri){const y=k.profilePicture.publicResourceUri;try{const E=new URL(y);l(`${z}${E.pathname}`)}catch{l(y)}}const f=k?.svNumber??k?.associationId;f!=null&&b(f),k?.firstName&&c(k.firstName),k?.lastName&&u(k.lastName)}}catch(g){g instanceof Error&&g.name}}return A(),()=>h.abort()},[s.id,n]),e.jsxs(C,{children:[e.jsx(T,{children:e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:r("settings.profile")})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d&&!w?e.jsx("img",{src:d,alt:`${m} ${x}`,className:"w-16 h-16 rounded-full object-cover",onError:()=>L(!0)}):e.jsxs("div",{className:"w-16 h-16 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-2xl","aria-label":`${m} ${x}`,children:[m.charAt(0)||x.charAt(0)||"?",x.charAt(0)||m.charAt(0)||""]}),e.jsxs("div",{children:[(m||x)&&e.jsxs("div",{className:"font-medium text-text-primary dark:text-text-primary-dark",children:[m," ",x]}),p&&e.jsxs("div",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:[r("settings.svNumber"),": ",p]}),s.email&&e.jsx("div",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s.email})]})]}),s.occupations&&s.occupations.length>0&&e.jsxs("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark pt-4",children:[e.jsx("div",{className:"text-sm text-text-muted dark:text-text-muted-dark mb-2",children:r("settings.roles")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.occupations.map(h=>e.jsxs(Le,{variant:"neutral",className:"rounded-full",children:[r(he(h.type)),h.associationCode&&` (${h.associationCode})`]},h.id))})]}),i&&e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark pt-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-600 dark:text-primary-400",title:r("settings.calendarSyncedTooltip"),children:[e.jsx(fe,{className:"w-4 h-4","aria-hidden":"true"}),e.jsx("span",{children:r("settings.calendarSynced")})]})})]})]})}const He=a.memo(Oe),$e={primary:"bg-primary-600",success:"bg-success-600"};function Ve({checked:s,onChange:r,disabled:t=!1,label:i,variant:n="primary"}){const d=$e[n];return e.jsx("button",{type:"button",onClick:r,disabled:t,className:`relative inline-flex h-6 w-11 flex-shrink-0 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${t?"bg-surface-muted dark:bg-surface-subtle-dark cursor-not-allowed opacity-50":s?d:"bg-surface-muted dark:bg-surface-subtle-dark"}`,role:"switch","aria-checked":s,"aria-label":i,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})}const F=a.memo(Ve);function We({preventZoom:s,onSetPreventZoom:r}){const{t}=v(),i=a.useCallback(()=>{r(!s)},[s,r]);return e.jsxs(C,{children:[e.jsx(T,{children:e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:t("settings.preferences.title")})}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{"data-tour":"language-switcher",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark mb-2",children:t("settings.language")}),e.jsx(ge,{variant:"grid"})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:t("settings.accessibility.title")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:t("settings.accessibility.description")}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:t("settings.accessibility.preventZoom")}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-1",children:t("settings.accessibility.preventZoomDescription")})]}),e.jsx(F,{checked:s,onChange:i,label:t("settings.accessibility.preventZoom")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:t(s?"settings.accessibility.preventZoomEnabled":"settings.accessibility.preventZoomDisabled")})]})]})]})}const Ke=a.memo(We),Ge="https://api3.geo.admin.ch/rest/services/api/SearchServer",Xe="https://nominatim.openstreetmap.org/search",qe=5,Qe=3,Ze=50;function ze(s={}){const{limit:r=qe}=s,[t,i]=a.useState({results:[],isLoading:!1,error:null}),n=a.useRef(null),d=a.useCallback(async p=>{if(p.trim().length<Qe){i({results:[],isLoading:!1,error:null});return}n.current?.abort(),n.current=new AbortController;const b=n.current.signal;i(m=>({...m,isLoading:!0,error:null}));try{let m=[];try{m=await Ye(p,r,b)}catch(x){if(x instanceof Error&&x.name==="AbortError")throw x}if(m.length>0){i({results:m,isLoading:!1,error:null});return}const c=await Je(p,r,b);i({results:c,isLoading:!1,error:null})}catch(m){if(m instanceof Error&&m.name==="AbortError")return;i({results:[],isLoading:!1,error:"geocode_failed"})}},[r]),l=a.useCallback(()=>{n.current?.abort(),i({results:[],isLoading:!1,error:null})},[]);return{...t,search:d,clear:l}}async function Ye(s,r,t){const i=new URLSearchParams({searchText:s,type:"locations",origins:"address,zipcode",limit:String(Math.min(r,Ze))}),n=await fetch(`${Ge}?${i}`,{signal:t});if(!n.ok)throw new Error(`HTTP ${n.status}`);return(await n.json()).results.map(l=>({id:l.id,latitude:l.attrs.lat,longitude:l.attrs.lon,displayName:et(l.attrs.label),source:"swiss",swissData:{lv95X:l.attrs.x,lv95Y:l.attrs.y,featureId:l.id}}))}async function Je(s,r,t){const i=new URLSearchParams({q:s,format:"json",countrycodes:"ch",limit:String(r),addressdetails:"1"}),n=await fetch(`${Xe}?${i}`,{signal:t,headers:{"User-Agent":"VolleyKit/1.0"}});if(!n.ok)throw new Error(`HTTP ${n.status}`);return(await n.json()).map(l=>({id:l.place_id,latitude:parseFloat(l.lat),longitude:parseFloat(l.lon),displayName:l.display_name,source:"nominatim"}))}function et(s){let r="",t=!1;for(const i of s)i==="<"?t=!0:i===">"?t=!1:t||(r+=i);return r}const tt=1e4,st=6e4;function rt(s={}){const{timeout:r=tt,enableHighAccuracy:t=!1,maximumAge:i=st,onSuccess:n}=s,d=a.useRef(n);d.current=n;const[l,p]=a.useState(()=>({position:null,isLoading:!1,error:null,isSupported:typeof navigator<"u"&&"geolocation"in navigator})),b=a.useCallback(()=>{if(!l.isSupported){p(c=>({...c,error:"Geolocation is not supported by this browser"}));return}p(c=>({...c,isLoading:!0,error:null})),navigator.geolocation.getCurrentPosition(c=>{const x={latitude:c.coords.latitude,longitude:c.coords.longitude};p(u=>({...u,position:x,isLoading:!1,error:null})),d.current?.(x)},c=>{let x;switch(c.code){case c.PERMISSION_DENIED:x="permission_denied";break;case c.POSITION_UNAVAILABLE:x="position_unavailable";break;case c.TIMEOUT:x="timeout";break;default:x="unknown_error"}p(u=>({...u,position:null,isLoading:!1,error:x}))},{enableHighAccuracy:t,timeout:r,maximumAge:i})},[l.isSupported,t,r,i]),m=a.useCallback(()=>{p(c=>({...c,position:null,error:null}))},[]);return{...l,requestLocation:b,clear:m}}const at=500,Y=3;function nt(s,r){switch(s){case"permission_denied":return r("settings.homeLocation.errorPermissionDenied");case"position_unavailable":return r("settings.homeLocation.errorPositionUnavailable");case"timeout":return r("settings.homeLocation.errorTimeout");default:return r("settings.homeLocation.errorUnknown")}}function it({t:s}){const{homeLocation:r,setHomeLocation:t}=P(D(f=>({homeLocation:f.homeLocation,setHomeLocation:f.setHomeLocation}))),[i,n]=a.useState(""),d=_e(i,at),{results:l,isLoading:p,error:b,search:m,clear:c}=ze(),x=a.useRef(n),u=a.useRef(c);a.useEffect(()=>{x.current=n,u.current=c});const w=a.useCallback(f=>{const y={latitude:f.latitude,longitude:f.longitude,label:s("settings.homeLocation.currentLocation"),source:"geolocation"};t(y),x.current(""),u.current()},[t,s]),{isLoading:L,error:h,isSupported:A,requestLocation:g}=rt({onSuccess:w});a.useEffect(()=>{d.length>=Y?m(d):c()},[d,m,c]);const M=a.useCallback(f=>{const y={latitude:f.latitude,longitude:f.longitude,label:f.displayName,source:"geocoded"};t(y),n(""),c()},[t,c]),B=a.useCallback(()=>{t(null),n("")},[t]),k=a.useCallback(f=>{n(f.target.value)},[]);return{homeLocation:r,addressQuery:i,debouncedQuery:d,geocodeResults:l,geocodeLoading:p,geocodeError:b,geoLoading:L,geoError:h,geoSupported:A,minSearchLength:Y,requestLocation:g,handleSelectGeocodedLocation:M,handleClearLocation:B,handleAddressChange:k}}function ot(){const{t:s}=v(),r=it({t:s});return e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark"}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:s("settings.homeLocation.title")})]})}),e.jsxs(S,{className:"space-y-4","data-tour":"home-location",children:[e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.homeLocation.description")}),r.homeLocation&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-subtle dark:bg-surface-subtle-dark rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx($,{className:"w-5 h-5 flex-shrink-0 text-primary-600 dark:text-primary-400"}),e.jsx("span",{className:"text-sm text-text-primary dark:text-text-primary-dark truncate",children:r.homeLocation.label})]}),e.jsx("button",{type:"button",onClick:r.handleClearLocation,className:"ml-2 p-1 text-text-muted hover:text-text-primary dark:text-text-muted-dark dark:hover:text-text-primary-dark rounded transition-colors","aria-label":s("settings.homeLocation.clear"),children:e.jsx(be,{className:"w-5 h-5"})})]}),r.geoSupported&&e.jsx(N,{variant:"secondary",onClick:r.requestLocation,loading:r.geoLoading,fullWidth:!0,iconLeft:!r.geoLoading&&e.jsx(re,{className:"w-4 h-4"}),children:r.geoLoading?s("settings.homeLocation.locating"):s("settings.homeLocation.useCurrentLocation")}),r.geoError&&e.jsx("p",{className:"text-sm text-error-600 dark:text-error-400",children:nt(r.geoError,s)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"address-search",className:"block text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.homeLocation.searchLabel")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"address-search",type:"text",value:r.addressQuery,onChange:r.handleAddressChange,placeholder:s("settings.homeLocation.searchPlaceholder"),className:"w-full px-4 py-2 text-sm border border-border-default dark:border-border-default-dark rounded-lg bg-surface-card dark:bg-surface-card-dark text-text-primary dark:text-text-primary-dark placeholder:text-text-muted dark:placeholder:text-text-muted-dark focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),r.geocodeLoading&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("span",{className:"w-4 h-4 block border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})})]}),r.geocodeError&&e.jsx("p",{className:"text-sm text-error-600 dark:text-error-400",children:s("settings.homeLocation.searchError")}),r.geocodeResults.length>0&&e.jsx("ul",{className:"border border-border-default dark:border-border-default-dark rounded-lg overflow-hidden divide-y divide-border-subtle dark:divide-border-subtle-dark",children:r.geocodeResults.map(t=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>r.handleSelectGeocodedLocation(t),className:"w-full px-4 py-3 text-left text-sm text-text-primary dark:text-text-primary-dark hover:bg-surface-subtle dark:hover:bg-surface-subtle-dark transition-colors",children:t.displayName})},t.id))}),r.debouncedQuery.length>=r.minSearchLength&&!r.geocodeLoading&&r.geocodeResults.length===0&&!r.geocodeError&&e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.homeLocation.noResults")})]})]})]})}const dt=a.memo(ot),O=300,J=10,lt=200,ee=30,ct=240;function mt(){const s=te(),r=Ae(),t=Re(),{homeLocation:i,transportEnabled:n,transportEnabledByAssociation:d,setTransportEnabledForAssociation:l,distanceFilter:p,distanceFilterByAssociation:b,setDistanceFilterForAssociation:m,travelTimeFilter:c,setMaxTravelTimeForAssociation:x,arrivalBufferByAssociation:u,setArrivalBufferForAssociation:w,sbbDestinationType:L,setSbbDestinationType:h}=P(D(o=>({homeLocation:o.homeLocation,transportEnabled:o.transportEnabled,transportEnabledByAssociation:o.transportEnabledByAssociation,setTransportEnabledForAssociation:o.setTransportEnabledForAssociation,distanceFilter:o.distanceFilter,distanceFilterByAssociation:o.distanceFilterByAssociation,setDistanceFilterForAssociation:o.setDistanceFilterForAssociation,travelTimeFilter:o.travelTimeFilter,setMaxTravelTimeForAssociation:o.setMaxTravelTimeForAssociation,arrivalBufferByAssociation:o.travelTimeFilter.arrivalBufferByAssociation,setArrivalBufferForAssociation:o.setArrivalBufferForAssociation,sbbDestinationType:o.travelTimeFilter.sbbDestinationType??"address",setSbbDestinationType:o.setSbbDestinationType}))),[A,g]=a.useState(!1),[M,B]=a.useState(0),k=a.useMemo(()=>{const o=d??{};return t&&o[t]!==void 0?o[t]:n},[t,d,n]),f=a.useMemo(()=>{const o=b??{};return t&&o[t]!==void 0?o[t]:p??{enabled:!1,maxDistanceKm:X}},[t,b,p]),y=a.useMemo(()=>{const o=c?.maxTravelTimeByAssociation??{};return t&&o[t]!==void 0?o[t]:c?.maxTravelTimeMinutes??q},[t,c]),E=a.useMemo(()=>t&&u?.[t]!==void 0?u[t]:ke(t),[t,u]),[ae,V]=a.useState(E),[ne,W]=a.useState(f.maxDistanceKm),[ie,K]=a.useState(y),_=a.useRef(null),R=a.useRef(null),I=a.useRef(null);a.useEffect(()=>{V(o=>o!==E?E:o)},[E]),a.useEffect(()=>{W(o=>o!==f.maxDistanceKm?f.maxDistanceKm:o)},[f.maxDistanceKm]),a.useEffect(()=>{K(o=>o!==y?y:o)},[y]),a.useEffect(()=>()=>{_.current&&clearTimeout(_.current),R.current&&clearTimeout(R.current),I.current&&clearTimeout(I.current)},[]);const oe=a.useMemo(()=>k?De().entryCount:0,[k,M]),de=a.useCallback(()=>{t&&l(t,!k)},[t,k,l]),le=a.useCallback(()=>{Me(),s.invalidateQueries({queryKey:se.travelTime.all}),B(o=>o+1),g(!1)},[s]),ce=a.useCallback(o=>{if(!t)return;const j=parseInt(o.target.value,10);!isNaN(j)&&j>=Q&&(V(j),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{w(t,j)},O))},[t,w]),me=a.useCallback(o=>{if(!t)return;const j=parseInt(o.target.value,10);!isNaN(j)&&j>=J&&(W(j),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{m(t,{maxDistanceKm:j})},O))},[t,m]),xe=a.useCallback(o=>{if(!t)return;const j=parseInt(o.target.value,10);!isNaN(j)&&j>=ee&&(K(j),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{x(t,j)},O))},[t,x]),ue=a.useCallback(o=>{h(o)},[h]),G=!!i;return{associationCode:t,isTransportAvailable:r,isTransportEnabled:k,localArrivalBuffer:ae,localMaxDistance:ne,localMaxTravelTime:ie,cacheEntryCount:oe,showClearConfirm:A,hasHomeLocation:G,canEnableTransport:G&&r&&!!t,sbbDestinationType:L,minArrivalBuffer:Q,maxArrivalBuffer:je,minMaxDistance:J,maxMaxDistance:lt,defaultMaxDistance:X,minMaxTravelTime:ee,maxMaxTravelTime:ct,defaultMaxTravelTime:q,handleToggleTransport:de,handleClearCache:le,handleArrivalBufferChange:ce,handleMaxDistanceChange:me,handleMaxTravelTimeChange:xe,handleSbbDestinationTypeChange:ue,setShowClearConfirm:g}}function xt({code:s}){return e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium rounded bg-primary-100 dark:bg-primary-900/40 text-primary-700 dark:text-primary-300",children:s})}function ut(){const{t:s,tInterpolate:r}=v(),t=mt();return t.associationCode?e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark"}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:s("settings.transport.title")}),e.jsx(xt,{code:t.associationCode})]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[e.jsx(U,{className:"w-4 h-4 flex-shrink-0 mt-0.5 text-primary-600 dark:text-primary-400"}),e.jsx("p",{className:"text-xs text-primary-700 dark:text-primary-300",children:s("settings.transport.perAssociationNote")})]}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.transport.description")}),!t.hasHomeLocation&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-surface-subtle dark:bg-surface-subtle-dark rounded-lg",children:[e.jsx(U,{className:"w-5 h-5 flex-shrink-0 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.transport.requiresHomeLocation")})]}),t.hasHomeLocation&&!t.isTransportAvailable&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-warning-50 dark:bg-warning-900/20 rounded-lg",children:[e.jsx(U,{className:"w-5 h-5 flex-shrink-0 text-warning-600 dark:text-warning-400"}),e.jsx("span",{className:"text-sm text-warning-700 dark:text-warning-300",children:s("settings.transport.apiNotConfigured")})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.enableCalculations")})}),e.jsx(F,{checked:t.isTransportEnabled,onChange:t.handleToggleTransport,disabled:!t.canEnableTransport,label:s("settings.transport.enableCalculations")})]}),!t.canEnableTransport&&e.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-1",children:t.hasHomeLocation?t.isTransportAvailable?s("settings.transport.disabledHint"):s("settings.transport.apiNotConfigured"):s("settings.transport.requiresHomeLocation")})]}),t.hasHomeLocation&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.maxDistance")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-0.5 ml-6",children:s("settings.transport.maxDistanceDescription")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:t.minMaxDistance,max:t.maxMaxDistance,value:t.localMaxDistance,onChange:t.handleMaxDistanceChange,className:"w-16 px-2 py-1 text-sm text-right border border-border-default dark:border-border-default-dark rounded-md bg-surface-card dark:bg-surface-card-dark text-text-primary dark:text-text-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":s("settings.transport.maxDistance")}),e.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("common.distanceUnit")})]})]})}),t.isTransportEnabled&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.maxTravelTime")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-0.5 ml-6",children:s("settings.transport.maxTravelTimeDescription")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:t.minMaxTravelTime,max:t.maxMaxTravelTime,step:15,value:t.localMaxTravelTime,onChange:t.handleMaxTravelTimeChange,className:"w-16 px-2 py-1 text-sm text-right border border-border-default dark:border-border-default-dark rounded-md bg-surface-card dark:bg-surface-card-dark text-text-primary dark:text-text-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":s("settings.transport.maxTravelTime")}),e.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("common.minutesUnit")})]})]})}),e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark","data-tour":"arrival-time",children:e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.arrivalTime")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-0.5 ml-6",children:s("settings.transport.arrivalTimeDescription")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:t.minArrivalBuffer,max:t.maxArrivalBuffer,value:t.localArrivalBuffer,onChange:t.handleArrivalBufferChange,className:"w-16 px-2 py-1 text-sm text-right border border-border-default dark:border-border-default-dark rounded-md bg-surface-card dark:bg-surface-card-dark text-text-primary dark:text-text-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":s("settings.transport.arrivalTime")}),e.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("common.minutesUnit")})]})]})}),e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.sbbDestination")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mb-3 ml-6",children:s("settings.transport.sbbDestinationDescription")}),e.jsxs("div",{className:"flex flex-col gap-2 ml-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sbbDestinationType",value:"address",checked:t.sbbDestinationType==="address",onChange:()=>t.handleSbbDestinationTypeChange("address"),className:"w-4 h-4 text-primary-600 border-border-default dark:border-border-default-dark focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-text-primary dark:text-text-primary-dark",children:s("settings.transport.sbbDestinationAddress")})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sbbDestinationType",value:"station",checked:t.sbbDestinationType==="station",onChange:()=>t.handleSbbDestinationTypeChange("station"),className:"w-4 h-4 text-primary-600 border-border-default dark:border-border-default-dark focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-text-primary dark:text-text-primary-dark",children:s("settings.transport.sbbDestinationStation")})]})]})]})}),e.jsxs("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:[e.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark mb-2",children:s("settings.transport.cacheInfo")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-text-secondary dark:text-text-secondary-dark",children:r("settings.transport.cacheEntries",{count:t.cacheEntryCount})}),t.showClearConfirm?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>t.setShowClearConfirm(!1),className:"text-sm text-text-muted dark:text-text-muted-dark hover:text-text-secondary dark:hover:text-text-secondary-dark",children:s("common.cancel")}),e.jsx("button",{type:"button",onClick:t.handleClearCache,className:"text-sm text-error-600 dark:text-error-400 hover:text-error-700 dark:hover:text-error-300",children:s("common.confirm")})]}):e.jsx("button",{type:"button",onClick:()=>t.setShowClearConfirm(!0),disabled:t.cacheEntryCount===0,className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 disabled:opacity-50 disabled:cursor-not-allowed",children:s("settings.transport.refreshCache")})]})]})]})]})]})]}):null}const pt=a.memo(ut),ht=a.lazy(()=>ye(()=>import("./chunk-SafeModeWarningModal-BXEn8XEz.js").then(s=>s.S),__vite__mapDeps([0,1,2,3,4,5])).then(s=>({default:s.SafeModeWarningModal})));function ft({isSafeModeEnabled:s,onSetSafeMode:r}){const{t}=v(),[i,n]=a.useState(!1),d=a.useCallback(()=>{s?n(!0):r(!0)},[s,r]),l=a.useCallback(()=>{n(!1)},[]),p=a.useCallback(()=>{r(!1)},[r]);return e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:t("settings.dataProtection.title")}),!s&&e.jsx("svg",{className:"w-5 h-5 text-warning-600 dark:text-warning-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})]})}),e.jsx(S,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:t("settings.safeMode")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:t("settings.safeModeDescription")}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:t(s?"settings.safeModeEnabled":"settings.safeModeDisabled")}),!s&&e.jsx("div",{className:"text-xs text-warning-600 dark:text-warning-400 mt-1",children:t("settings.safeModeDangerous")})]}),e.jsx(F,{checked:s,onChange:d,label:t("settings.safeMode"),variant:"success"})]})]})})]}),i&&e.jsx(a.Suspense,{fallback:null,children:e.jsx(ht,{isOpen:i,onClose:l,onConfirm:p})})]})}const gt=a.memo(ft),bt=["assignments","compensations","exchange","settings"];function kt({isDemoMode:s}){const{t:r}=v(),{getTourStatus:t,resetAllTours:i}=Ne(D(n=>({getTourStatus:n.getTourStatus,resetAllTours:n.resetAllTours})));return e.jsxs(C,{"data-tour":"tour-reset",children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-primary-600 dark:text-primary-400","aria-hidden":"true"}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:r("settings.helpTours.title")})]})}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("settings.help.title")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:r("settings.help.description")}),e.jsxs("a",{href:ve(),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary-600 dark:text-primary-400 hover:underline text-sm",children:[r("settings.help.openDocs")," →"]})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("tour.settings.tourSection.title")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:r("tour.settings.tourSection.description")}),!s&&e.jsx("p",{className:"text-sm text-warning-600 dark:text-warning-400",children:r("tour.settings.tourSection.safeModeNote")}),e.jsx("div",{className:"space-y-2",children:bt.map(n=>{const d=t(n);return e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx("span",{className:"text-sm text-text-primary dark:text-text-primary-dark capitalize",children:r(`nav.${n}`)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${d==="completed"?"bg-success-100 text-success-700 dark:bg-success-900/50 dark:text-success-300":d==="dismissed"?"bg-warning-100 text-warning-700 dark:bg-warning-900/50 dark:text-warning-300":"bg-surface-subtle text-text-muted dark:bg-surface-subtle-dark dark:text-text-muted-dark"}`,children:r(d==="completed"?"tour.settings.tourSection.statusCompleted":d==="dismissed"?"tour.settings.tourSection.statusSkipped":"tour.settings.tourSection.statusNotStarted")})]},n)})}),e.jsx("div",{className:"pt-2",children:e.jsx(N,{variant:"secondary",onClick:i,children:r("tour.settings.tourSection.restart")})})]})]})]})}const jt=a.memo(kt);function yt(){const{t:s}=v(),r=te(),[t,i]=a.useState(!1),{homeLocation:n,transportEnabled:d,resetLocationSettings:l}=P(D(c=>({homeLocation:c.homeLocation,transportEnabled:c.transportEnabled,resetLocationSettings:c.resetLocationSettings}))),p=a.useCallback(()=>{r.removeQueries({queryKey:se.travelTime.all}),l(),i(!1)},[r,l]),b=a.useCallback(()=>{i(!0)},[]),m=a.useCallback(()=>{i(!1)},[]);return e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:s("settings.dataRetention.title")})]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm text-text-muted dark:text-text-muted-dark",children:[e.jsx("p",{children:s("settings.privacyNoCollection")}),e.jsx("p",{children:s("settings.privacyDirectComm")}),e.jsx("p",{children:s("settings.privacyNoAnalytics")})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.dataRetention.description")}),e.jsx("div",{className:"space-y-2",children:e.jsxs("ul",{className:"space-y-2 text-sm text-text-primary dark:text-text-primary-dark",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s("settings.dataRetention.homeLocation")})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s("settings.dataRetention.filterPreferences")})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s("settings.dataRetention.travelTimeCache")})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s("settings.dataRetention.languagePreference")})]})]})}),d&&e.jsxs("div",{className:"p-3 bg-surface-subtle dark:bg-surface-subtle-dark rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark mb-1",children:s("settings.dataRetention.externalServices")}),e.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:s("settings.dataRetention.transportApiNote")})]}),(n||d)&&e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:t?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-text-primary dark:text-text-primary-dark",children:s("settings.dataRetention.clearDataConfirm")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"secondary",onClick:m,className:"flex-1",children:s("common.cancel")}),e.jsx(N,{variant:"primary",onClick:p,className:"flex-1",children:s("common.confirm")})]})]}):e.jsx(N,{variant:"secondary",onClick:b,fullWidth:!0,iconLeft:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:s("settings.dataRetention.clearData")})})]})]})}const Nt=a.memo(yt),vt=3e3;function Ct({activeAssociationCode:s,onRefreshData:r}){const{t}=v(),[i,n]=a.useState(!1),d=a.useRef(null);a.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const l=a.useCallback(()=>{r(),n(!0),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>n(!1),vt)},[r]);return e.jsxs(C,{children:[e.jsx(T,{children:e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:t("settings.demoData")})}),e.jsxs(S,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:t("settings.demoDataDescription")}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1",children:[i&&e.jsx("div",{className:"text-sm font-medium text-success-600 dark:text-success-400",role:"status","aria-live":"polite",children:t("settings.demoDataReset")}),s&&!i&&e.jsx("div",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s})]}),e.jsx(N,{variant:"secondary",onClick:l,"aria-label":t("settings.resetDemoData"),children:t("settings.resetDemoData")})]})]})]})}const Tt=a.memo(Ct),St="/volleykit/ocr-poc/";function wt({showUpdates:s}){const{t:r,locale:t}=v(),{needRefresh:i,isChecking:n,lastChecked:d,checkError:l,checkForUpdate:p,updateApp:b}=Ce(),{isOCREnabled:m,setOCREnabled:c}=P(),u=Te()?"PWA":"Web",w=a.useCallback(()=>{c(!m)},[m,c]),L=a.useCallback(h=>{const A=new Date;return h.toDateString()===A.toDateString()?h.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"}):h.toLocaleString(t,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},[t]);return e.jsxs(C,{children:[e.jsx(T,{children:e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:r("settings.about")})}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted dark:text-text-muted-dark",children:r("settings.version")}),e.jsxs("span",{className:"text-text-primary dark:text-text-primary-dark",children:["1.16.1"," ",e.jsxs("span",{className:"text-text-muted dark:text-text-muted-dark font-mono text-xs",children:["(","fe8f65f",")"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted dark:text-text-muted-dark",children:r("settings.platform")}),e.jsx("span",{className:"text-text-primary dark:text-text-primary-dark",children:u})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("settings.updates")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark","aria-live":"polite",children:r(i?"settings.updateAvailable":"settings.upToDate")}),d&&e.jsxs("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-1",children:[r("settings.lastChecked"),": ",L(d)]}),l&&e.jsx("div",{className:"text-xs text-danger-600 dark:text-danger-400 mt-1",role:"alert",children:r("settings.updateCheckFailed")})]}),i?e.jsx(N,{variant:"primary",onClick:b,"aria-label":r("settings.updateNow"),children:r("settings.updateNow")}):e.jsx(N,{variant:"secondary",onClick:p,loading:n,"aria-label":r("settings.checkForUpdates"),children:r(n?"settings.checking":"settings.checkForUpdates")})]})]})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("settings.experimental.title")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:r("settings.experimental.description")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-text-primary dark:text-text-primary-dark text-sm",children:r("settings.experimental.ocrPoc")}),e.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:r("settings.experimental.ocrPocDescription")})]}),e.jsx(N,{variant:"secondary",onClick:()=>window.open(St,"_blank","noopener,noreferrer"),"aria-label":r("settings.experimental.openOcrPoc"),children:r("settings.experimental.openOcrPoc")})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("settings.experimental.ocrValidation")}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-1",children:r("settings.experimental.ocrValidationDescription")})]}),e.jsx(F,{checked:m,onChange:w,label:r("settings.experimental.ocrValidation")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:r(m?"settings.experimental.ocrValidationEnabled":"settings.experimental.ocrValidationDisabled")})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark pt-3",children:e.jsxs("a",{href:"https://volleymanager.volleyball.ch",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 dark:text-primary-400 hover:underline text-sm",children:[r("settings.openWebsite")," →"]})}),e.jsxs("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark pt-3 space-y-2",children:[e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:r("settings.dataSource")}),e.jsx("p",{className:"text-xs text-text-subtle dark:text-text-subtle-dark",children:r("settings.disclaimer")})]})]})]})}const Lt=a.memo(wt);function Ut(){const{user:s,logout:r,dataSource:t,isCalendarMode:i}=H(D(u=>({user:u.user,logout:u.logout,dataSource:u.dataSource,isCalendarMode:u.isCalendarMode()}))),n=t==="demo",{activeAssociationCode:d,refreshData:l}=Se(D(u=>({activeAssociationCode:u.activeAssociationCode,refreshData:u.refreshData}))),{isSafeModeEnabled:p,setSafeMode:b,preventZoom:m,setPreventZoom:c}=P(D(u=>({isSafeModeEnabled:u.isSafeModeEnabled,setSafeMode:u.setSafeMode,preventZoom:u.preventZoom,setPreventZoom:u.setPreventZoom}))),{t:x}=v();return we("settings"),e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsx("h1",{className:"text-2xl font-bold text-text-primary dark:text-text-primary-dark",children:x("settings.title")}),s&&e.jsx(He,{user:s}),e.jsx(Ke,{preventZoom:m,onSetPreventZoom:c}),e.jsx(dt,{}),e.jsx(pt,{}),e.jsx(Nt,{}),e.jsx(jt,{isDemoMode:n}),n&&e.jsx(Tt,{activeAssociationCode:d,onRefreshData:l}),!n&&!i&&e.jsx(gt,{isSafeModeEnabled:p,onSetSafeMode:b}),e.jsx(Lt,{showUpdates:!0}),e.jsx("div",{className:"pt-4 border-t border-border-default dark:border-border-default-dark",children:e.jsx(N,{variant:"secondary",onClick:r,className:"w-full sm:w-auto",children:x("auth.logout")})})]})}export{Ut as SettingsPage};
