const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-pdf-form-filler-Bp4SUIE5.js","assets/index-DWl1wP_h.js","assets/chunk-state-1lfzh_F6.js","assets/chunk-router-BHRPxDXG.js","assets/chunk-validation-Cdg1t4SS.js","assets/index-CwYDvh7T.css","assets/chunk-PdfLanguageModal-C72A6cXO.js","assets/chunk-ModalErrorBoundary-BscOX-ao.js","assets/chunk-EditCompensationModal-DHmCEkyt.js","assets/chunk-useCompensations-CfRbGG8S.js","assets/chunk-ValidateGameModal-CKFwnboF.js","assets/chunk-ExchangePage-B996_jxa.js","assets/chunk-ojp-client-PDnD4hUv.js","assets/chunk-useTravelTime-B73fGWuq.js","assets/chunk-useDebouncedValue-DGD5H6R2.js","assets/chunk-LoginPage-Ce90_o94.js","assets/chunk-calendar-helpers-Dj6kJoF_.js","assets/chunk-cropper-CP7W1s_t.js","assets/chunk-assignments-DBz14qIH.js","assets/chunk-SafeModeWarningModal-cxJ_DeGt.js"])))=>i.map(i=>d[i]);
import{z as ne,am as J,c as Be,u as w,an as Pe,ao as ve,a3 as be,e as R,o as V,p as Ue,ap as X,aq as Z,D as Ke,I as xt,ar as ft,q as z,as as Ne,at as re,au as De,a7 as ht,a9 as yt,av as bt,aw as He,ax as kt,A as $e,ay as Ct,az as Ee,aA as ke,aB as Ce,aC as We,aD as qe,aE as St,aF as vt,aG as At,aH as Tt,aI as Nt,h as Ve,aJ as Dt,ad as Et,aK as jt,J as K,_ as ge,r as _t,aL as je,aM as xe,aN as wt,aO as Mt,aP as pe,aQ as Lt,K as Rt,O as _e,Q as Gt,R as It,P as Ot}from"./index-DWl1wP_h.js";import{j as t,a as i,b as ee,u as Ft}from"./chunk-state-1lfzh_F6.js";import{T as Bt}from"./chunk-assignments-DBz14qIH.js";import{p as Pt,L as Ut,b as Kt,e as Ht,u as $t,a as Wt,R as qt,f as we,M as oe,c as Vt}from"./chunk-ExchangePage-B996_jxa.js";import{u as ze}from"./chunk-ojp-client-PDnD4hUv.js";import{M as zt,F as Yt,g as Qt,E as Xt,D as Zt,i as Jt,f as ea,u as fe,h as Ye,c as ta,j as aa,C as na,k as sa,P as ra,W as oa,S as he}from"./chunk-ModalErrorBoundary-BscOX-ao.js";import{M as Qe,N as ia,T as Xe,B as ca,u as la}from"./chunk-useTravelTime-B73fGWuq.js";import{F as da,a as ma}from"./chunk-PdfLanguageModal-C72A6cXO.js";import{C as ua}from"./chunk-SafeModeWarningModal-cxJ_DeGt.js";import"./chunk-pdf-form-filler-Bp4SUIE5.js";import{m as ga}from"./chunk-calendar-helpers-Dj6kJoF_.js";function pa(e,a){const n=ne(e,a?.in).getDay();return n===0||n===6}function Me(e,a,n){return J(e,a*7,n)}function xa(e,a,n){const s=+ne(e,n?.in),[r,o]=[+ne(a.start,n?.in),+ne(a.end,n?.in)].sort((m,c)=>m-c);return s>=r&&s<=o}function Ze(e,a,n){const s=ne(e,n?.in);return s.setHours(a),s}const fa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ha=Be("circle-alert",fa);const ya=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ba=Be("external-link",ya),ka=[{city:"Däniken",hallKeywords:["Erlimatt"],conditional:!0},{city:"Guntershausen",hallKeywords:["Turnhalle"],conditional:!1},{city:"Laufen",hallKeywords:["Gymnasium"],conditional:!0},{city:"Liesberg",hallKeywords:["Seemättli","MZH"],conditional:!1},{city:"Luzern",hallKeywords:["Bahnhofhalle"],conditional:!0},{city:"Olten",hallKeywords:["Giroud","Olma"],conditional:!0},{city:"Ruswil",hallKeywords:["Dorfhalle"],conditional:!1},{city:"Thônex",hallKeywords:["Sous-Moulin"],conditional:!0}],Ca=["NLA","NLB"],Sa={de:"/documents/single-ball-halls-de.pdf",en:"/documents/single-ball-halls-de.pdf",fr:"/documents/single-ball-halls-fr.pdf",it:"/documents/single-ball-halls-de.pdf"};function ue(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim()}function va(e,a){return ue(e)===ue(a)}function Aa(e,a){const n=ue(e);return a.some(s=>n.includes(ue(s)))}function Ta(e){if(!e)return!1;const a=e.toUpperCase().trim();return Ca.some(n=>a===n)}function Na(e){const a=e.refereeGame?.game;if(!a)return null;const n=a.group?.phase?.league?.leagueCategory?.name;if(!Ta(n))return null;const s=a.hall?.primaryPostalAddress?.city,r=a.hall?.name;if(!s||!r)return null;for(const o of ka)if(va(s,o.city)&&Aa(r,o.hallKeywords))return{hall:o,isConditional:o.conditional};return null}function Da(e){const a="/volleykit/",n=Sa[e];return`${a}${n.slice(1)}`}function Ea(){const{t:e}=w();return a=>{const{type:n,hours:s,minutes:r}=Pt(a),o=e(n==="overlap"?"assignments.conflictOverlap":"assignments.conflictGap");return s>0&&r>0?`${s}h ${r}min ${o}`:s>0?`${s}h ${o}`:`${r}min ${o}`}}function ja({conflicts:e}){const{t:a}=w();return e.length===0?null:t.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded-full bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 flex-shrink-0",title:a("assignments.conflictWarningTooltip"),"aria-label":a("assignments.conflictWarningTooltip"),children:t.jsx(Pe,{className:"w-3 h-3","aria-hidden":"true"})})}function _a({conflict:e}){const{t:a}=w(),n=Ea(),{timeLabel:s}=ve(e.conflictingAssignment.startTime),{conflictingAssignment:r}=e,o=r.association?`(${r.association})`:"";return t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsxs("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:[r.homeTeam," - ",r.awayTeam]}),t.jsxs("span",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:[s," ",o&&t.jsx("span",{className:"font-medium",children:o})," · ",n(e.gapMinutes)]}),r.hallName&&t.jsxs("span",{className:"text-xs text-text-subtle dark:text-text-subtle-dark",children:[a("assignments.hall"),": ",r.hallName]})]})}function wa({conflicts:e}){const{t:a}=w();return e.length===0?null:t.jsxs("div",{className:"flex items-start gap-2 py-1.5 px-2 bg-red-50 dark:bg-red-950/30 rounded-md border border-red-200 dark:border-red-800/50",children:[t.jsx(Pe,{className:"w-4 h-4 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5","aria-hidden":"true"}),t.jsxs("div",{className:"flex flex-col gap-1.5 min-w-0",children:[t.jsx("span",{className:"text-xs font-medium text-red-700 dark:text-red-300",children:a("assignments.conflictWarningTitle")}),e.map(n=>t.jsx(_a,{conflict:n},n.conflictingAssignmentId))]})]})}function Q(e){return e?.indoorAssociationReferee?.indoorReferee?.person?.displayName}const Se=i.createContext(null);function $(){const e=i.useContext(Se);if(!e)throw new Error("useAssignmentCardContext must be used within an AssignmentCard");return e}function Je(){const{t:e}=w(),{city:a,game:n,singleBallMatch:s,conflicts:r,expandArrow:o}=$(),m=n?.group?.phase?.league?.leagueCategory?.name;return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex flex-col items-end w-24",children:[t.jsxs("span",{className:"text-xs text-text-muted dark:text-text-muted-dark truncate w-full text-right flex items-center justify-end gap-1",children:[a||"",t.jsx(ja,{conflicts:r}),s&&t.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded-full bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300 text-[10px] font-bold flex-shrink-0",title:e("assignments.singleBallHallTooltip"),"aria-label":e("assignments.singleBallHallTooltip"),children:"1"})]}),m&&t.jsx("span",{className:"text-xs text-text-subtle dark:text-text-subtle-dark truncate w-full text-right",children:m})]}),o]})}function et(){const{dateLabel:e,timeLabel:a,isToday:n}=$();return t.jsxs("div",{className:"flex flex-col items-end w-14 shrink-0",children:[t.jsx("span",{className:`text-xs font-medium ${n?"text-primary-600 dark:text-primary-400":"text-text-muted dark:text-text-muted-dark"}`,children:e}),t.jsx("span",{className:"text-lg font-bold text-text-primary dark:text-text-primary-dark",children:a})]})}function Ma(){const{conflicts:e}=$();return t.jsx(wa,{conflicts:e})}function tt(){const{t:e}=w(),{game:a}=$(),n=a?.number,s=a?.group?.phase?.league?.leagueCategory?.name,r=a?.group?.phase?.league?.gender;return t.jsxs(t.Fragment,{children:[n&&t.jsxs("div",{className:"text-xs text-text-subtle dark:text-text-subtle-dark",children:["#",n]}),s&&t.jsxs("div",{className:"text-xs text-text-subtle dark:text-text-subtle-dark",children:[s,r&&` • ${e(r==="m"?"common.men":"common.women")}`]})]})}function at(){const{t:e,tInterpolate:a}=w(),{hallName:n,fullAddress:s,addressMapsUrl:r,googleMapsUrl:o,showSbbButton:m,isSbbLoading:c,openSbbConnection:x}=$();return t.jsxs("div",{className:"flex items-start gap-2 text-sm text-text-muted dark:text-text-muted-dark pt-2",children:[t.jsx(Qe,{className:"w-4 h-4 flex-shrink-0 mt-0.5","aria-hidden":"true"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium text-text-primary dark:text-text-primary-dark",children:n}),s&&(r?t.jsx("a",{href:r,className:"text-primary-600 dark:text-primary-400 hover:underline focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 rounded block",onClick:d=>d.stopPropagation(),"aria-label":a("assignments.openAddressInMaps",{address:s}),children:s}):t.jsx("span",{children:s}))]}),t.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[o&&t.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 hover:bg-primary-200 dark:hover:bg-primary-800/40 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 rounded-lg transition-colors",onClick:d=>d.stopPropagation(),title:e("assignments.openInGoogleMaps"),"aria-label":e("assignments.openInGoogleMaps"),children:t.jsx(ia,{className:"w-5 h-5","aria-hidden":"true"})}),m&&t.jsx("button",{type:"button",className:"p-2 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 hover:bg-primary-200 dark:hover:bg-primary-800/40 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 rounded-lg transition-colors disabled:opacity-50",onClick:d=>{d.stopPropagation(),x()},disabled:c,title:e("assignments.openSbbConnection"),"aria-label":e("assignments.openSbbConnection"),children:c?t.jsx(Ut,{className:"w-5 h-5 animate-spin","aria-hidden":"true"}):t.jsx(Xe,{className:"w-5 h-5","aria-hidden":"true"})})]})]})}function nt(){const{t:e}=w(),{headReferee1:a,headReferee2:n,linesmen:s}=$();return a||n||s.length>0?t.jsxs("div",{className:"text-xs text-text-subtle dark:text-text-subtle-dark pt-1 space-y-0.5",children:[a&&t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:[e("positions.head-one"),":"]})," ",a]}),n&&t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:[e("positions.head-two"),":"]})," ",n]}),s.length>0&&t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:[e("occupations.linesmen"),":"]})," ",s.join(", ")]})]}):null}function st(){const{t:e}=w(),{singleBallMatch:a,singleBallPdfPath:n}=$();return a?t.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-xs text-amber-700 dark:text-amber-300 bg-amber-50 dark:bg-amber-900/20 px-2 py-1.5 rounded-md hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors group",onClick:s=>s.stopPropagation(),children:[t.jsx(ha,{className:"w-4 h-4 flex-shrink-0","aria-hidden":"true"}),t.jsx("span",{className:"underline decoration-amber-400/50 group-hover:decoration-amber-500 underline-offset-2",children:a.isConditional?e("assignments.singleBallHallConditional"):e("assignments.singleBallHall")}),t.jsx(ba,{className:"w-3 h-3 flex-shrink-0 opacity-60 group-hover:opacity-100","aria-hidden":"true"})]}):null}function rt(){const{t:e}=w(),{status:a}=$(),n={active:{label:e("assignments.confirmed"),variant:"success"},cancelled:{label:e("assignments.cancelled"),variant:"danger"},archived:{label:e("assignments.archived"),variant:"neutral"}};return t.jsx("div",{className:"flex items-center gap-2 text-sm pt-1",children:t.jsx(ca,{variant:n[a]?.variant||"success",className:"rounded-full",children:n[a]?.label||e("assignments.active")})})}function ot(){return t.jsxs("div",{className:"px-2 pb-2 pt-0 border-t border-border-subtle dark:border-border-subtle-dark space-y-1",children:[t.jsx(at,{}),t.jsx(Ma,{}),t.jsx(st,{}),t.jsx(rt,{}),t.jsx(tt,{}),t.jsx(nt,{})]})}function it(){const{t:e}=w(),{homeTeam:a,awayTeam:n,position:s,gender:r}=$();return t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium text-text-primary dark:text-text-primary-dark truncate",children:a}),t.jsxs("div",{className:"text-sm text-text-secondary dark:text-text-muted-dark truncate",children:[e("common.vs")," ",n]}),t.jsxs("div",{className:"text-xs text-text-subtle dark:text-text-subtle-dark flex items-center gap-1",children:[t.jsx("span",{children:s}),r==="m"&&t.jsx(zt,{className:"w-3 h-3 text-blue-500 dark:text-blue-400","aria-label":e("common.men")}),r==="f"&&t.jsx(Yt,{className:"w-3 h-3 text-pink-500 dark:text-pink-400","aria-label":e("common.women")})]})]})}function ct(){return t.jsxs(t.Fragment,{children:[t.jsx(et,{}),t.jsx(it,{}),t.jsx(Je,{})]})}function La({assignment:e,onClick:a,disableExpansion:n,dataTour:s}){const{t:r,locale:o}=w(),m=ze(),c=e.refereeGame?.game,{dateLabel:x,timeLabel:d,isToday:u,isPast:b}=ve(c?.startingDateTime),N=c?.encounter?.teamHome?.name||r("common.tbd"),p=c?.encounter?.teamAway?.name||r("common.tbd"),A=c?.hall?.name||r("common.locationTbd"),T=c?.hall?.primaryPostalAddress,h=T?.city,{googleMapsUrl:G,nativeMapsUrl:g,fullAddress:C}=Kt(T,A),j=e.refereeConvocationStatus,M=Qt(e.refereePosition,r,r("occupations.referee")),_=c?.group?.phase?.league?.gender,S=e.refereeGame,y=Q(S?.activeRefereeConvocationFirstHeadReferee),E=Q(S?.activeRefereeConvocationSecondHeadReferee),l=Q(S?.activeRefereeConvocationFirstLinesman),P=Q(S?.activeRefereeConvocationSecondLinesman),W=Q(S?.activeRefereeConvocationThirdLinesman),F=Q(S?.activeRefereeConvocationFourthLinesman),q=i.useMemo(()=>[l,P,W,F].filter(Boolean),[l,P,W,F]),U=be(Te=>Te.isTransportEnabledForAssociation(m)),te=c?.hall?.primaryPostalAddress?.geographicalLocation,Y=Ht(te),ae=c?.hall?.__identity,se=c?.startingDateTime,{isLoading:f,openSbbConnection:k}=$t({hallCoords:Y,hallId:ae,city:h,hallAddress:C,gameStartTime:se,language:o}),D=!!(U&&h&&se),v=Na(e),L=Da(o),O=c?.__identity,{conflicts:B}=Wt(O),Ae=i.useMemo(()=>({assignment:e,game:c,dateLabel:x,timeLabel:d,isToday:u,isPast:b,homeTeam:N,awayTeam:p,hallName:A,city:h,fullAddress:C,googleMapsUrl:G,addressMapsUrl:g,status:j,position:M,gender:_,headReferee1:y,headReferee2:E,linesmen:q,showSbbButton:D,isSbbLoading:f,openSbbConnection:k,singleBallMatch:v,singleBallPdfPath:L,conflicts:B}),[e,c,x,d,u,b,N,p,A,h,C,G,g,j,M,_,y,E,q,D,f,k,v,L,B]);return t.jsx(Xt,{data:e,onClick:a,disableExpansion:n,dataTour:s,className:b?"opacity-75":"",renderCompact:(Te,{expandArrow:pt})=>t.jsx(Se.Provider,{value:{...Ae,expandArrow:pt},children:t.jsx(ct,{})}),renderDetails:()=>t.jsx(Se.Provider,{value:{...Ae,expandArrow:null},children:t.jsx(ot,{})})})}const Ra=i.memo(La),I=Ra;I.DateTime=et;I.Teams=it;I.CityInfo=Je;I.Header=ct;I.Location=at;I.SingleBallNotice=st;I.Status=rt;I.GameInfo=tt;I.Referees=nt;I.Details=ot;const Ga=2,Le=e=>xt(e,"yyyy-MM-dd"),Ia=[];function Oa(e=Ga){const a=R(p=>p.dataSource),n=a==="demo",s=R(p=>p.activeOccupationId),r=V(p=>p.activeAssociationCode),o=Ue(a),m=n?r:s,c=Le(new Date),x=Le(Me(new Date,e)),d=i.useMemo(()=>({from:Z(new Date).toISOString(),to:X(Me(new Date,e)).toISOString()}),[c,x,e]),u=i.useMemo(()=>[{propertyName:"date",dateRange:d}],[d]),b=i.useMemo(()=>({offset:0,limit:Ke,propertyFilters:u,propertyOrderings:[{propertyName:"date",descending:!1,isSetByUser:!0}]}),[u]),N=i.useMemo(()=>p=>p.items??Ia,[]);return ee({queryKey:z.refereeBackup.list(b,m),queryFn:()=>o.searchRefereeBackups(b),select:N,staleTime:2*ft,placeholderData:p=>p})}const Fa=2,Ba=16,lt=12;function Pa(e){return pa(e)?lt:Ba}function Ua(e){const a=new Date(e),n=Pa(a);return Ze(a,n).toISOString()}function Re(e,a){const n=e.indoorReferee?.person;return(n?.__identity??n?.persistenceObjectIdentifier)===a}function Ka(e,a){const n=[];for(const s of e){const r=Ua(s.date);for(const o of s.nlaReferees??[])Re(o,a)&&n.push({id:`${s.__identity}-NLA`,date:r,weekday:s.weekday,calendarWeek:s.calendarWeek,league:"NLA",backupEntry:s,assignment:o});for(const o of s.nlbReferees??[])Re(o,a)&&n.push({id:`${s.__identity}-NLB`,date:r,weekday:s.weekday,calendarWeek:s.calendarWeek,league:"NLB",backupEntry:s,assignment:o})}return n.sort((s,r)=>new Date(s.date).getTime()-new Date(r.date).getTime())}const Ge=["So","Mo","Di","Mi","Do","Fr","Sa"],Ha=6,ie=7;function $a(){const e=new Date,a=[],n=(Ha-e.getDay()+ie)%ie||ie,s=Ze(J(e,n),lt),r={__identity:re("demo-backup-nla"),date:s.toISOString(),weekday:Ge[s.getDay()],calendarWeek:De(s),nlaReferees:[{__identity:re("demo-backup-assignment-nla"),indoorReferee:{person:{__identity:Ne,firstName:"Demo",lastName:"User",displayName:"Demo User"}},isDispensed:!1,hasResigned:!1,unconfirmedFutureRefereeConvocations:!1}]};a.push({id:`${r.__identity}-NLA`,date:r.date,weekday:r.weekday,calendarWeek:r.calendarWeek,league:"NLA",backupEntry:r,assignment:r.nlaReferees[0]});const o=J(s,ie),m={__identity:re("demo-backup-nlb"),date:o.toISOString(),weekday:Ge[o.getDay()],calendarWeek:De(o),nlbReferees:[{__identity:re("demo-backup-assignment-nlb"),indoorReferee:{person:{__identity:Ne,firstName:"Demo",lastName:"User",displayName:"Demo User"}},isDispensed:!1,hasResigned:!1,unconfirmedFutureRefereeConvocations:!1}]};return a.push({id:`${m.__identity}-NLB`,date:m.date,weekday:m.weekday,calendarWeek:m.calendarWeek,league:"NLB",backupEntry:m,assignment:m.nlbReferees[0]}),a}function Wa(e=Fa){const a=R(c=>c.user?.id),n=R(c=>c.dataSource),s=n==="demo",{data:r,...o}=Oa(e),m=i.useMemo(()=>s?$a():n==="calendar"||!a||!r?[]:Ka(r,a),[s,n,a,r]);return{...o,data:m}}function qa({assignment:e}){const{t:a}=w(),{dateLabel:n,timeLabel:s,isToday:r}=ve(e.date),o=`${a("onCall.duty")} ${e.league} - ${n}`;return t.jsx(ht,{className:"bg-amber-50 dark:bg-amber-950/30 border-amber-200 dark:border-amber-800/50","aria-label":o,children:t.jsx(yt,{className:"p-0",children:t.jsx("div",{className:"px-2 py-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex flex-col items-end w-14 shrink-0",children:[t.jsx("span",{className:`text-xs font-medium ${r?"text-amber-700 dark:text-amber-300":"text-amber-600 dark:text-amber-400"}`,children:n}),t.jsx("span",{className:"text-lg font-bold text-amber-900 dark:text-amber-100",children:s})]}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:a("onCall.duty")})}),t.jsx("div",{className:`flex-shrink-0 px-2 py-1 text-xs font-semibold rounded ${e.league==="NLA"?"bg-amber-200 dark:bg-amber-800 text-amber-900 dark:text-amber-100":"bg-amber-100 dark:bg-amber-900/70 text-amber-800 dark:text-amber-200"}`,children:e.league})]})})})})}const Va=i.memo(qa);function za(){const a=R(s=>s.dataSource)==="demo",n=R(s=>s.activeOccupationId);return ee({queryKey:z.settings.association(n),queryFn:()=>He.getAssociationSettings(),staleTime:bt,enabled:!a})}function Ya(){const a=R(s=>s.dataSource)==="demo",n=R(s=>s.activeOccupationId);return ee({queryKey:z.seasons.active(n),queryFn:()=>He.getActiveSeason(),staleTime:kt,enabled:!a})}const Ie=[];function Qa(){const e=R(s=>s.dataSource),a=R(s=>s.calendarCode),n=e==="calendar";return ee({queryKey:z.calendar.assignmentsByCode(a??""),queryFn:({signal:s})=>a?Ct(a,s):Promise.resolve(Ie),enabled:n&&!!a,staleTime:$e,placeholderData:Ie})}const Xa=[];function dt(e,a){const n=new Date;switch(e){case"upcoming":return{from:Z(n).toISOString(),to:X(J(n,Ce)).toISOString()};case"past":return{from:Z(ke(n,Ce)).toISOString(),to:X(ke(n,1)).toISOString()};case"thisWeek":return{from:Z(n).toISOString(),to:X(J(n,At)).toISOString()};case"nextMonth":return{from:Z(n).toISOString(),to:X(J(n,vt)).toISOString()};case"custom":return dt("upcoming")}}function Oe(e,a){return e.filter(n=>Jt(n.refereeGame?.game?.startingDateTime,a))}function mt(e,a){return e.map(n=>{const s=n.refereeGame?.game?.__identity,r=s?a[s]:void 0;return r&&n.refereeGame?.game?{...n,refereeGame:{...n.refereeGame,game:{...n.refereeGame.game,scoresheet:{closedAt:r.validatedAt}}}}:n})}function Za(e="upcoming",a){const n=R(h=>h.dataSource),s=n==="demo",r=R(h=>h.activeOccupationId),o=V(h=>h.assignments),m=V(h=>h.activeAssociationCode),c=V(h=>h.validatedGames),x=Ue(n),d=s?m:r,u=dt(e),{fromDate:b,toDate:N}=i.useMemo(()=>({fromDate:u.from,toDate:u.to}),[u.from,u.to]),p=i.useMemo(()=>({offset:0,limit:Ke,propertyFilters:[{propertyName:"refereeGame.game.startingDateTime",dateRange:{from:b,to:N}}],propertyOrderings:[{propertyName:"refereeGame.game.startingDateTime",descending:e==="past",isSetByUser:!0}]}),[b,N,e]),A=i.useMemo(()=>{if(!s)return[];const h=Array.isArray(o)?o:[],G=new Date(b),g=new Date(N),C=h.filter(M=>{const _=St(M);if(_===0)return!1;const S=new Date(_);return S>=G&&S<=g}),j=We(C,e==="past");return mt(j,c)},[s,o,b,N,e,c]),T=ee({queryKey:z.assignments.list(p,d),queryFn:()=>x.searchAssignments(p),select:h=>h.items??Xa,staleTime:$e,enabled:!s});return s?qe(T,A):T}function Ja(){return Za("upcoming")}function en(){const a=R(y=>y.dataSource)==="demo",n=R(y=>y.activeOccupationId),s=V(y=>y.assignments),r=V(y=>y.activeAssociationCode),o=V(y=>y.validatedGames),m=a?r:n,{data:c,isSuccess:x,isError:d}=za(),{data:u,isSuccess:b,isError:N}=Ya(),{fromDate:p,toDate:A}=i.useMemo(()=>{const y=new Date,E=Ee(u?.seasonStartDate,ke(y,Ce)),l=Ee(u?.seasonEndDate,y);return{fromDate:Z(E).toISOString(),toDate:X(y<l?y:l).toISOString()}},[u?.seasonStartDate,u?.seasonEndDate]),T=c?.hoursAfterGameStartForRefereeToEditGameList??Zt,h=i.useMemo(()=>({propertyFilters:[{propertyName:"refereeGame.game.startingDateTime",dateRange:{from:p,to:A}}],propertyOrderings:[{propertyName:"refereeGame.game.startingDateTime",descending:!0,isSetByUser:!0}]}),[p,A]),G=x||d,g=b||N,C=x?c!==void 0:!0,j=b?u?.seasonStartDate!==void 0:!0,M=!a&&G&&g&&C&&j,_=ee({queryKey:z.assignments.validationClosed(p,A,T,m),queryFn:async({signal:y})=>{const E=await Nt(h,y);return Oe(E,T)},staleTime:Tt,enabled:M}),S=i.useMemo(()=>{if(!a)return[];const E=(Array.isArray(s)?s:[]).filter(W=>{const F=W.refereeGame?.game?.startingDateTime;if(!F)return!1;const q=new Date(F);return xa(q,{start:new Date(p),end:new Date(A)})}),l=Oe(E,T),P=We(l,!0);return mt(P,o)},[a,s,p,A,T,o]);return a?qe(_,S):_}const ce=[10,25,50,75,100],le=[30,45,60,90,120],de=[60,90,120,150,180];function tn({dataTour:e}){const{t:a}=w(),[n,s]=i.useState(!1),r=la(),o=ze(),{homeLocation:m,distanceFilter:c,distanceFilterByAssociation:x,setDistanceFilterForAssociation:d,travelTimeFilter:u,setMaxTravelTimeForAssociation:b,gameGapFilter:N,setMinGameGapMinutes:p}=be(Ve(l=>({homeLocation:l.homeLocation,distanceFilter:l.distanceFilter,distanceFilterByAssociation:l.distanceFilterByAssociation,setDistanceFilterForAssociation:l.setDistanceFilterForAssociation,travelTimeFilter:l.travelTimeFilter,setMaxTravelTimeForAssociation:l.setMaxTravelTimeForAssociation,gameGapFilter:l.gameGapFilter,setMinGameGapMinutes:l.setMinGameGapMinutes}))),A=be(l=>l.isTransportEnabledForAssociation),T=i.useMemo(()=>{const l=x??{};return o&&l[o]!==void 0?l[o]:c},[o,x,c]),h=i.useMemo(()=>{const l=u.maxTravelTimeByAssociation??{};return o&&l[o]!==void 0?l[o]:u.maxTravelTimeMinutes},[o,u]),G=i.useCallback(l=>{o&&d(o,{maxDistanceKm:Number(l.target.value)})},[o,d]),g=i.useCallback(l=>{o&&b(o,Number(l.target.value))},[o,b]),C=i.useCallback(l=>{p(Number(l.target.value))},[p]),j=!!m,M=j,_=A(o),S=j&&_&&r,y=l=>`${l} ${a("common.distanceUnit")}`,E={minutesUnit:a("common.minutesUnit"),hoursUnit:a("common.hoursUnit")};return t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:()=>s(!0),"data-tour":e,"aria-label":a("exchange.settings.title"),className:`
          inline-flex items-center justify-center p-1.5 rounded-full
          text-text-muted dark:text-text-muted-dark
          hover:bg-surface-subtle dark:hover:bg-surface-subtle-dark
          hover:text-text-primary dark:hover:text-text-primary-dark
          transition-colors cursor-pointer
          focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-1
        `,children:t.jsx(Dt,{className:"w-5 h-5"})}),t.jsxs(qt,{isOpen:n,onClose:()=>s(!1),titleId:"exchange-settings-title",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-default dark:border-border-default-dark",children:[t.jsx("h2",{id:"exchange-settings-title",className:"text-lg font-semibold text-text-primary dark:text-text-primary-dark",children:a("exchange.settings.title")}),t.jsx("button",{type:"button",onClick:()=>s(!1),className:"p-2 -m-2 text-text-muted dark:text-text-muted-dark hover:text-text-primary dark:hover:text-text-primary-dark transition-colors","aria-label":a("common.close"),children:t.jsx(Et,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto",children:[M&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Qe,{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark"}),t.jsx("label",{htmlFor:"max-distance",className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:a("exchange.settings.maxDistance")}),t.jsx("span",{className:"ml-auto text-sm font-semibold text-primary-600 dark:text-primary-400",children:y(T.maxDistanceKm)})]}),t.jsx("input",{id:"max-distance",type:"range",min:ce[0],max:ce[ce.length-1],step:5,value:T.maxDistanceKm,onChange:G,className:"w-full h-2 bg-surface-muted dark:bg-surface-subtle-dark rounded-lg appearance-none cursor-pointer accent-primary-600"}),t.jsx("div",{className:"flex justify-between text-xs text-text-muted dark:text-text-muted-dark",children:ce.map(l=>t.jsxs("span",{children:[l," km"]},l))})]}),S&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Xe,{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark"}),t.jsx("label",{htmlFor:"max-travel-time",className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:a("exchange.settings.maxTravelTime")}),t.jsx("span",{className:"ml-auto text-sm font-semibold text-primary-600 dark:text-primary-400",children:we(h,E)})]}),t.jsx("input",{id:"max-travel-time",type:"range",min:le[0],max:le[le.length-1],step:15,value:h,onChange:g,className:"w-full h-2 bg-surface-muted dark:bg-surface-subtle-dark rounded-lg appearance-none cursor-pointer accent-primary-600"}),t.jsx("div",{className:"flex justify-between text-xs text-text-muted dark:text-text-muted-dark",children:le.map(l=>t.jsx("span",{children:l<oe?`${l}m`:`${l/oe}h`},l))})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ua,{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark"}),t.jsx("label",{htmlFor:"min-game-gap",className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:a("exchange.settings.minGameGap")}),t.jsx("span",{className:"ml-auto text-sm font-semibold text-primary-600 dark:text-primary-400",children:we(N.minGapMinutes,E)})]}),t.jsx("input",{id:"min-game-gap",type:"range",min:de[0],max:de[de.length-1],step:15,value:N.minGapMinutes,onChange:C,className:"w-full h-2 bg-surface-muted dark:bg-surface-subtle-dark rounded-lg appearance-none cursor-pointer accent-primary-600"}),t.jsx("div",{className:"flex justify-between text-xs text-text-muted dark:text-text-muted-dark",children:de.map(l=>t.jsx("span",{children:l<oe?`${l}m`:`${l/oe}h`},l))})]}),t.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:a("exchange.settings.description")})]})]})]})}i.memo(tn);const H=_t("useAssignmentActions");function an(e){return e==="fr"||e==="it"?"fr":"de"}function nn(){const{t:e}=w(),a=Ft(),{guard:n,isDemoMode:s}=ea(),r=jt(g=>g.locale),o=V(g=>g.addAssignmentToExchange),m=Vt(),c=fe(),x=fe(),d=fe(),[u,b]=i.useState(!1),N=i.useCallback(g=>{x.open(g)},[x]),p=i.useCallback(g=>{if(!Ye(g)){H.debug("Game report not available for this league"),K.info(e("assignments.gameReportNotAvailable"));return}d.open(g)},[e,d]),A=i.useCallback(()=>{u||d.close()},[u,d]),T=i.useCallback(async g=>{if(d.data){b(!0);try{const{extractSportsHallReportData:C,getLeagueCategoryFromAssignment:j,generateAndDownloadSportsHallReport:M}=await ge(async()=>{const{extractSportsHallReportData:y,getLeagueCategoryFromAssignment:E,generateAndDownloadSportsHallReport:l}=await import("./chunk-pdf-form-filler-Bp4SUIE5.js").then(P=>P.p);return{extractSportsHallReportData:y,getLeagueCategoryFromAssignment:E,generateAndDownloadSportsHallReport:l}},__vite__mapDeps([0,1,2,3,4,5])),_=C(d.data),S=j(d.data);if(!_||!S){H.error("Failed to extract report data for:",d.data.__identity),K.error(e("pdf.exportError"));return}await M(_,S,g),H.debug("Generated PDF report for:",d.data.__identity),K.success(e("assignments.reportGenerated")),A()}catch(C){H.error("PDF generation failed:",C),K.error(e("pdf.exportError"))}finally{b(!1)}}},[d.data,A,e]),h=i.useCallback(g=>{p(g)},[p]),G=i.useCallback(g=>{const{homeTeam:C,awayTeam:j}=ta(g);if(aa(g)){H.debug("Cannot add validated game to exchange:",g.__identity),K.error(e("exchange.cannotExchangeValidatedGame"));return}if(!n({context:"useAssignmentActions",action:"adding to exchange"})){if(s){o(g.__identity),a.invalidateQueries({queryKey:z.exchanges.lists()}),a.invalidateQueries({queryKey:z.assignments.lists()}),H.debug("Demo mode: added assignment to exchange:",g.__identity),K.success(e("exchange.addedToExchangeSuccess"));return}H.debug("Adding to exchange:",{assignmentId:g.__identity,game:`${C} vs ${j}`}),m.mutateAsync(g.__identity).then(()=>{H.debug("Successfully added to exchange:",g.__identity),m.wasQueued?K.success(e("exchange.addedToExchangeQueued")):K.success(e("exchange.addedToExchangeSuccess"))}).catch(M=>{H.error("Failed to add to exchange:",M),K.error(e("exchange.addedToExchangeError"))})}},[n,s,o,a,e,m]);return{editCompensationModal:{isOpen:c.isOpen,assignment:c.data,open:c.open,close:c.close},validateGameModal:{isOpen:x.isOpen,assignment:x.data,open:N,close:x.close},pdfReportModal:{isOpen:d.isOpen,assignment:d.data,isLoading:u,defaultLanguage:an(r),open:p,close:A,onConfirm:T},handleGenerateReport:h,handleAddToExchange:G}}function sn(e){const{selectedAssociation:a,setSelectedAssociation:n,setAssociations:s}=je(),r=i.useMemo(()=>{const d=new Set;for(const u of e)u.association&&d.add(u.association);return Array.from(d).sort()},[e]),o=je(d=>d.associations);i.useEffect(()=>{(r.length!==o.length||r.some((u,b)=>u!==o[b]))&&s(r)},[r,o,s]);const m=r.length>=2,c=i.useMemo(()=>a!==xe&&!r.includes(a)?xe:a,[r,a]),x=i.useCallback(d=>c===xe?d:d.filter(u=>u.association===c),[c]);return{associations:r,selectedAssociation:c,setSelectedAssociation:n,filterByAssociation:x,hasMultipleAssociations:m}}let Fe=null;function ut(){return typeof navigator<"u"&&"setAppBadge"in navigator}async function gt(e,a={}){const{skipIfUnchanged:n=!1}=a;if(n&&Fe===e)return{success:!0};if(!ut())return{success:!1,error:"Badging API not supported in this browser"};try{return e===0?await navigator.clearAppBadge():await navigator.setAppBadge(e),Fe=e,{success:!0}}catch(s){return{success:!1,error:`Failed to set badge: ${s instanceof Error?s.message:"Unknown error"}`}}}async function rn(){return gt(0)}const me={isSupported:ut,setBadge:e=>gt(e),clearBadge:rn};function on(e){return e.filter(a=>{if(a.refereeConvocationStatus!=="active")return!1;const n=a.refereeGame?.game?.startingDateTime;if(!n)return!1;try{const s=new Date(n);return wt(s)}catch{return!1}}).length}function cn(e,a={}){const{enabled:n=!0}=a,s=i.useMemo(()=>on(e),[e]),r=i.useRef(null),o=me.isSupported();i.useEffect(()=>{if(!n||!o||r.current===s)return;(async()=>(await me.setBadge(s)).success&&(r.current=s))()},[s,n,o]);const m=i.useCallback(async()=>{await me.setBadge(s),r.current=s},[s]),c=i.useCallback(async()=>{await me.clearBadge(),r.current=0},[]);return{todaysGameCount:s,isSupported:o,updateBadge:m,clearBadge:c}}const ln=i.createElement(Lt,{size:pe}),dn=i.createElement(na,{size:pe}),mn=i.createElement(da,{size:pe}),un=i.createElement(Mt,{size:pe});function gn(e,a,n){return{editCompensation:{id:"edit-compensation",label:n("assignments.editCompensation"),shortLabel:n("assignments.editCompensationShort"),color:"bg-primary-500",icon:ln,onAction:()=>a.onEditCompensation(e)},validateGame:{id:"validate-game",label:n("assignments.validateGame"),shortLabel:n("assignments.validateGameShort"),color:e.refereeGame?.game?.scoresheet?.closedAt?"bg-slate-500":"bg-primary-500",icon:dn,onAction:()=>a.onValidateGame(e)},generateReport:{id:"generate-report",label:n("assignments.generateReport"),shortLabel:n("assignments.generateReportShort"),color:"bg-slate-500",icon:mn,onAction:()=>a.onGenerateReport(e)},addToExchange:{id:"add-to-exchange",label:n("assignments.addToExchange"),shortLabel:n("assignments.addToExchangeShort"),color:"bg-primary-500",icon:un,onAction:()=>a.onAddToExchange(e)}}}function ye(e){return e.type==="onCall"?e.item.date:e.item.refereeGame?.game?.startingDateTime}const pn=i.lazy(()=>ge(()=>import("./chunk-PdfLanguageModal-C72A6cXO.js").then(e=>e.P),__vite__mapDeps([6,2,1,3,4,5,7])).then(e=>({default:e.PdfLanguageModal}))),xn=i.lazy(()=>ge(()=>import("./chunk-EditCompensationModal-DHmCEkyt.js"),__vite__mapDeps([8,2,1,3,4,5,7,9,6])).then(e=>({default:e.EditCompensationModal}))),fn=i.lazy(()=>ge(()=>import("./chunk-ValidateGameModal-CKFwnboF.js"),__vite__mapDeps([10,2,7,1,3,4,5,11,12,13,0,14,15,16,6,17,18,19])).then(e=>({default:e.ValidateGameModal})));function hn(e,a,n,s){return e&&a==="upcoming"?n?{title:s("assignments.calendarNoUpcomingTitle"),description:s("assignments.calendarNoUpcomingDescription")}:{title:s("assignments.calendarEmptyTitle"),description:s("assignments.calendarEmptyDescription")}:a==="upcoming"?{title:s("assignments.noUpcomingTitle"),description:s("assignments.noUpcomingDescription")}:{title:s("assignments.noClosedTitle"),description:s("assignments.noClosedDescription")}}function yn(){const[e,a]=i.useState("upcoming"),{t:n}=w(),{isAssociationSwitching:s,isCalendarMode:r}=R(Ve(f=>({isAssociationSwitching:f.isAssociationSwitching,isCalendarMode:f.isCalendarMode()}))),{showDummyData:o}=Rt("assignments"),{editCompensationModal:m,validateGameModal:c,pdfReportModal:x,handleGenerateReport:d,handleAddToExchange:u}=nn(),{data:b,isLoading:N,error:p,refetch:A}=Ja(),{data:T,isLoading:h,error:G,refetch:g}=en(),{data:C,isLoading:j,error:M,refetch:_}=Qa(),{filterByAssociation:S}=sn(C??[]),{data:y}=Wa();cn(r?[]:b??[]);const E=i.useMemo(()=>{if(!r||!C)return[];const f=new Date,k=C.filter(D=>new Date(D.startTime)>=f);return S(k)},[r,C,S]),l=i.useMemo(()=>{if(!r||!C)return[];const f=new Date,k=C.filter(D=>new Date(D.startTime)<f);return S(k)},[r,C,S]),P=i.useMemo(()=>r?e==="upcoming"?E:l:e==="upcoming"?b:T,[r,e,E,l,b,T]),W=i.useMemo(()=>s?!0:r?j:e==="upcoming"?N:h,[s,r,j,e,N,h]),F=i.useMemo(()=>r?M:e==="upcoming"?p:G,[r,M,e,p,G]),q=i.useCallback(()=>r?_():e==="upcoming"?A():g(),[r,e,_,A,g]),U=i.useMemo(()=>o?[Bt]:P,[o,P]),te=i.useMemo(()=>{if(e!=="upcoming"||r||o)return[];const f=[];if(U)for(const k of U)f.push({type:"assignment",item:k});for(const k of y)f.push({type:"onCall",item:k});return f.sort((k,D)=>{const v=ye(k),L=ye(D);return!v||!L?0:new Date(v).getTime()-new Date(L).getTime()})},[e,r,o,U,y]),Y=i.useMemo(()=>e==="upcoming"&&!r&&!o?te.length===0?[]:_e(te,ye):!U||U.length===0?[]:_e(U,r&&!o?k=>k.startTime:k=>k.refereeGame?.game?.startingDateTime),[e,r,o,te,U]),ae=i.useCallback(f=>{const k=gn(f,{onEditCompensation:m.open,onValidateGame:c.open,onGenerateReport:d,onAddToExchange:u},n),D=Ye(f);if(r)return{left:D?[k.generateReport]:[],right:[]};const v=f.refereeGame?.isGameInFuture==="1",L=sa(f),O=ma(f),B=L?[k.validateGame]:[];return O&&B.push(k.editCompensation),D&&B.push(k.generateReport),{left:B,right:v?[k.addToExchange]:[]}},[r,m,c,d,u,n]),se=i.useCallback(async()=>{await q()},[q]);return t.jsx(ra,{onRefresh:se,children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{role:"tablist","aria-label":n("assignments.title"),className:"flex gap-2 border-b border-border-default dark:border-border-default-dark",children:[t.jsxs("button",{role:"tab","aria-selected":e==="upcoming","aria-controls":"tabpanel-upcoming",id:"tab-upcoming",onClick:()=>a("upcoming"),className:`
            px-4 py-2 text-sm font-medium border-b-2 transition-colors
            ${e==="upcoming"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-text-muted dark:text-text-muted-dark hover:text-text-secondary dark:hover:text-text-secondary-dark"}
          `,children:[n("assignments.upcoming"),(()=>{const f=(r?E:b)?.length??0,k=r?0:y.length,D=f+k;return D>0?t.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 text-xs",children:D}):null})()]}),t.jsxs("button",{role:"tab","aria-selected":e==="validationClosed","aria-controls":"tabpanel-validationClosed",id:"tab-validationClosed",onClick:()=>a("validationClosed"),className:`
            px-4 py-2 text-sm font-medium border-b-2 transition-colors
            ${e==="validationClosed"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-text-muted dark:text-text-muted-dark hover:text-text-secondary dark:hover:text-text-secondary-dark"}
          `,children:[n(r?"assignments.past":"assignments.validationClosed"),((r?l:T)??[]).length>0&&t.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-surface-subtle dark:bg-surface-card-dark text-text-secondary dark:text-text-muted-dark text-xs",children:(r?l:T)?.length})]})]}),t.jsxs("div",{role:"tabpanel",id:e==="upcoming"?"tabpanel-upcoming":"tabpanel-validationClosed","aria-labelledby":e==="upcoming"?"tab-upcoming":"tab-validationClosed",className:"space-y-3",children:[W&&!o&&t.jsx(Gt,{message:n("assignments.loading")}),F&&t.jsx(It,{message:F instanceof Error?F.message:n("assignments.failedToLoadData"),onRetry:()=>q()}),(!W||o)&&!F&&Y.length===0&&t.jsx(Ot,{icon:e==="upcoming"?"calendar":"lock",...hn(r,e,(C?.length??0)>0,n)}),(!W||o)&&!F&&Y.length>0&&t.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:Y.map((f,k)=>{const D=Y.slice(0,k).reduce((v,L)=>v+L.items.length,0);return t.jsxs(i.Fragment,{children:[Y.length>1&&t.jsx(oa,{week:f.week}),r&&!o?f.items.map((v,L)=>{const O=ga(v);return t.jsx(he,{swipeConfig:ae(O),children:({isDrawerOpen:B})=>t.jsx(I,{assignment:O,disableExpansion:B,dataTour:D+L===0?"assignment-card":void 0})},v.gameId)}):e==="upcoming"&&!o?f.items.map((v,L)=>{if(v.type==="onCall")return t.jsx(Va,{assignment:v.item},v.item.id);const O=v.item;return t.jsx(he,{swipeConfig:ae(O),children:({isDrawerOpen:B})=>t.jsx(I,{assignment:O,disableExpansion:B,dataTour:D+L===0?"assignment-card":void 0})},O.__identity)}):f.items.map((v,L)=>t.jsx(he,{swipeConfig:ae(v),children:({isDrawerOpen:O})=>t.jsx(I,{assignment:v,disableExpansion:O,dataTour:D+L===0?"assignment-card":void 0})},v.__identity))]},f.week.key)})})]}),m.assignment&&t.jsx(i.Suspense,{fallback:null,children:t.jsx(xn,{assignment:m.assignment,isOpen:m.isOpen,onClose:m.close})}),c.assignment&&t.jsx(i.Suspense,{fallback:null,children:t.jsx(fn,{assignment:c.assignment,isOpen:c.isOpen,onClose:c.close},c.assignment.__identity)}),x.isOpen&&t.jsx(i.Suspense,{fallback:null,children:t.jsx(pn,{isOpen:x.isOpen,onClose:x.close,onConfirm:x.onConfirm,isLoading:x.isLoading,defaultLanguage:x.defaultLanguage})})]})})}const _n=Object.freeze(Object.defineProperty({__proto__:null,AssignmentsPage:yn},Symbol.toStringTag,{value:"Module"}));export{_n as A,ha as C};
