const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-SafeModeWarningModal-DSMgrkCG.js","assets/index-CmWRfzXn.js","assets/chunk-state-CZJejFfH.js","assets/chunk-router-CqUdIx6-.js","assets/chunk-validation-Cdg1t4SS.js","assets/index-KyjH_G7Q.css"])))=>i.map(i=>d[i]);
import{a,j as e,u as te}from"./chunk-state-CZJejFfH.js";import{c as pe,u as T,e as V,a7 as S,a8 as w,a9 as L,aa as he,ab as fe,ac as ge,a3 as B,h as D,ad as be,B as C,ae as X,af as q,ag as ke,q as se,ah as Q,ai as je,_ as ye,$ as Ne,aj as ve,ak as Ce,al as Te,o as Se,N as we}from"./index-CmWRfzXn.js";import{B as Le,M as H,u as Ae,g as De,c as Me,T as Z,N as Ee}from"./chunk-useTravelTime-PjBEqpod.js";import{u as _e,I as U}from"./chunk-useDebouncedValue-2T1rCwqN.js";import{C as re}from"./chunk-SafeModeWarningModal-DSMgrkCG.js";import{u as Re}from"./chunk-ojp-client-BjZGMVjh.js";import"./chunk-router-CqUdIx6-.js";import"./chunk-validation-Cdg1t4SS.js";const Ie=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Pe=pe("book-open",Ie),z="https://volleykit-proxy.ngn-damien.workers.dev",Be=12345,Fe="Demo",Ue="User";function Oe({user:s}){const{t:r}=T(),t=V(h=>h.dataSource),i=V(h=>h.calendarCode),n=t==="demo",[o,c]=a.useState(s.profilePictureUrl??null),[u,f]=a.useState(n?Be:null),[m,l]=a.useState(n?Fe:s.firstName),[x,k]=a.useState(n?Ue:s.lastName),[N,p]=a.useState(!1);return a.useEffect(()=>{if(n||!s.id)return;const h=new AbortController;async function A(){try{const b=new URLSearchParams;b.set("person[__identity]",s.id),b.set("propertyRenderConfiguration[0]","firstName"),b.set("propertyRenderConfiguration[1]","lastName"),b.set("propertyRenderConfiguration[2]","svNumber"),b.set("propertyRenderConfiguration[3]","associationId"),b.set("propertyRenderConfiguration[4]","hasProfilePicture"),b.set("propertyRenderConfiguration[5]","profilePicture"),b.set("propertyRenderConfiguration[6]","profilePicture.publicResourceUri");const M=await fetch(`${z}/sportmanager.volleyball/api%5Cperson/showWithNestedObjects?${b}`,{credentials:"include",signal:h.signal,headers:{Accept:"application/json"}});if(M.ok){const j=(await M.json()).person;if(j?.profilePicture?.publicResourceUri){const v=j.profilePicture.publicResourceUri;try{const E=new URL(v);c(`${z}${E.pathname}`)}catch{c(v)}}const g=j?.svNumber??j?.associationId;g!=null&&f(g),j?.firstName&&l(j.firstName),j?.lastName&&k(j.lastName)}}catch(b){b instanceof Error&&b.name}}return A(),()=>h.abort()},[s.id,n]),e.jsxs(S,{children:[e.jsx(w,{children:e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:r("settings.profile")})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[o&&!N?e.jsx("img",{src:o,alt:`${m} ${x}`,className:"w-16 h-16 rounded-full object-cover",onError:()=>p(!0)}):e.jsxs("div",{className:"w-16 h-16 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-2xl","aria-label":`${m} ${x}`,children:[m.charAt(0)||x.charAt(0)||"?",x.charAt(0)||m.charAt(0)||""]}),e.jsxs("div",{children:[(m||x)&&e.jsxs("div",{className:"font-medium text-text-primary dark:text-text-primary-dark",children:[m," ",x]}),u&&e.jsxs("div",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:[r("settings.svNumber"),": ",u]}),s.email&&e.jsx("div",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s.email})]})]}),s.occupations&&s.occupations.length>0&&e.jsxs("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark pt-4",children:[e.jsx("div",{className:"text-sm text-text-muted dark:text-text-muted-dark mb-2",children:r("settings.roles")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.occupations.map(h=>e.jsxs(Le,{variant:"neutral",className:"rounded-full",children:[r(he(h.type)),h.associationCode&&` (${h.associationCode})`]},h.id))})]}),i&&e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark pt-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-600 dark:text-primary-400",title:r("settings.calendarSyncedTooltip"),children:[e.jsx(fe,{className:"w-4 h-4","aria-hidden":"true"}),e.jsx("span",{children:r("settings.calendarSynced")})]})})]})]})}const Ve=a.memo(Oe),He={primary:"bg-primary-600",success:"bg-success-600"};function $e({checked:s,onChange:r,disabled:t=!1,label:i,variant:n="primary"}){const o=He[n];return e.jsx("button",{type:"button",onClick:r,disabled:t,className:`relative inline-flex h-6 w-11 flex-shrink-0 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${t?"bg-surface-muted dark:bg-surface-subtle-dark cursor-not-allowed opacity-50":s?o:"bg-surface-muted dark:bg-surface-subtle-dark"}`,role:"switch","aria-checked":s,"aria-label":i,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`})})}const P=a.memo($e);function We({preventZoom:s,onSetPreventZoom:r}){const{t}=T(),i=a.useCallback(()=>{r(!s)},[s,r]);return e.jsxs(S,{children:[e.jsx(w,{children:e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:t("settings.preferences.title")})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{"data-tour":"language-switcher",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark mb-2",children:t("settings.language")}),e.jsx(ge,{variant:"grid"})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:t("settings.accessibility.title")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:t("settings.accessibility.description")}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:t("settings.accessibility.preventZoom")}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-1",children:t("settings.accessibility.preventZoomDescription")})]}),e.jsx(P,{checked:s,onChange:i,label:t("settings.accessibility.preventZoom")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:t(s?"settings.accessibility.preventZoomEnabled":"settings.accessibility.preventZoomDisabled")})]})]})]})}const Ke=a.memo(We),Ge="https://api3.geo.admin.ch/rest/services/api/SearchServer",Xe="https://nominatim.openstreetmap.org/search",qe=5,Qe=3,Ze=50;function ze(s={}){const{limit:r=qe}=s,[t,i]=a.useState({results:[],isLoading:!1,error:null}),n=a.useRef(null),o=a.useCallback(async u=>{if(u.trim().length<Qe){i({results:[],isLoading:!1,error:null});return}n.current?.abort(),n.current=new AbortController;const f=n.current.signal;i(m=>({...m,isLoading:!0,error:null}));try{let m=[];try{m=await Ye(u,r,f)}catch(x){if(x instanceof Error&&x.name==="AbortError")throw x}if(m.length>0){i({results:m,isLoading:!1,error:null});return}const l=await Je(u,r,f);i({results:l,isLoading:!1,error:null})}catch(m){if(m instanceof Error&&m.name==="AbortError")return;i({results:[],isLoading:!1,error:"geocode_failed"})}},[r]),c=a.useCallback(()=>{n.current?.abort(),i({results:[],isLoading:!1,error:null})},[]);return{...t,search:o,clear:c}}async function Ye(s,r,t){const i=new URLSearchParams({searchText:s,type:"locations",origins:"address,zipcode",limit:String(Math.min(r,Ze))}),n=await fetch(`${Ge}?${i}`,{signal:t});if(!n.ok)throw new Error(`HTTP ${n.status}`);return(await n.json()).results.map(c=>({id:c.id,latitude:c.attrs.lat,longitude:c.attrs.lon,displayName:et(c.attrs.label),source:"swiss",swissData:{lv95X:c.attrs.x,lv95Y:c.attrs.y,featureId:c.id}}))}async function Je(s,r,t){const i=new URLSearchParams({q:s,format:"json",countrycodes:"ch",limit:String(r),addressdetails:"1"}),n=await fetch(`${Xe}?${i}`,{signal:t,headers:{"User-Agent":"VolleyKit/1.0"}});if(!n.ok)throw new Error(`HTTP ${n.status}`);return(await n.json()).map(c=>({id:c.place_id,latitude:parseFloat(c.lat),longitude:parseFloat(c.lon),displayName:c.display_name,source:"nominatim"}))}function et(s){let r="",t=!1;for(const i of s)i==="<"?t=!0:i===">"?t=!1:t||(r+=i);return r}const tt=1e4,st=6e4;function rt(s={}){const{timeout:r=tt,enableHighAccuracy:t=!1,maximumAge:i=st,onSuccess:n}=s,o=a.useRef(n);o.current=n;const[c,u]=a.useState(()=>({position:null,isLoading:!1,error:null,isSupported:typeof navigator<"u"&&"geolocation"in navigator})),f=a.useCallback(()=>{if(!c.isSupported){u(l=>({...l,error:"Geolocation is not supported by this browser"}));return}u(l=>({...l,isLoading:!0,error:null})),navigator.geolocation.getCurrentPosition(l=>{const x={latitude:l.coords.latitude,longitude:l.coords.longitude};u(k=>({...k,position:x,isLoading:!1,error:null})),o.current?.(x)},l=>{let x;switch(l.code){case l.PERMISSION_DENIED:x="permission_denied";break;case l.POSITION_UNAVAILABLE:x="position_unavailable";break;case l.TIMEOUT:x="timeout";break;default:x="unknown_error"}u(k=>({...k,position:null,isLoading:!1,error:x}))},{enableHighAccuracy:t,timeout:r,maximumAge:i})},[c.isSupported,t,r,i]),m=a.useCallback(()=>{u(l=>({...l,position:null,error:null}))},[]);return{...c,requestLocation:f,clear:m}}const at=500,Y=3;function nt(s,r){switch(s){case"permission_denied":return r("settings.homeLocation.errorPermissionDenied");case"position_unavailable":return r("settings.homeLocation.errorPositionUnavailable");case"timeout":return r("settings.homeLocation.errorTimeout");default:return r("settings.homeLocation.errorUnknown")}}function it({t:s}){const{homeLocation:r,setHomeLocation:t}=B(D(g=>({homeLocation:g.homeLocation,setHomeLocation:g.setHomeLocation}))),[i,n]=a.useState(""),o=_e(i,at),{results:c,isLoading:u,error:f,search:m,clear:l}=ze(),x=a.useRef(n),k=a.useRef(l);a.useEffect(()=>{x.current=n,k.current=l});const N=a.useCallback(g=>{const v={latitude:g.latitude,longitude:g.longitude,label:s("settings.homeLocation.currentLocation"),source:"geolocation"};t(v),x.current(""),k.current()},[t,s]),{isLoading:p,error:h,isSupported:A,requestLocation:b}=rt({onSuccess:N});a.useEffect(()=>{o.length>=Y?m(o):l()},[o,m,l]);const M=a.useCallback(g=>{const v={latitude:g.latitude,longitude:g.longitude,label:g.displayName,source:"geocoded"};t(v),n(""),l()},[t,l]),F=a.useCallback(()=>{t(null),n("")},[t]),j=a.useCallback(g=>{n(g.target.value)},[]);return{homeLocation:r,addressQuery:i,debouncedQuery:o,geocodeResults:c,geocodeLoading:u,geocodeError:f,geoLoading:p,geoError:h,geoSupported:A,minSearchLength:Y,requestLocation:b,handleSelectGeocodedLocation:M,handleClearLocation:F,handleAddressChange:j}}function ot(){const{t:s}=T(),r=it({t:s});return e.jsxs(S,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark"}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:s("settings.homeLocation.title")})]})}),e.jsxs(L,{className:"space-y-4","data-tour":"home-location",children:[e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.homeLocation.description")}),r.homeLocation&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-subtle dark:bg-surface-subtle-dark rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(H,{className:"w-5 h-5 flex-shrink-0 text-primary-600 dark:text-primary-400"}),e.jsx("span",{className:"text-sm text-text-primary dark:text-text-primary-dark truncate",children:r.homeLocation.label})]}),e.jsx("button",{type:"button",onClick:r.handleClearLocation,className:"ml-2 p-1 text-text-muted hover:text-text-primary dark:text-text-muted-dark dark:hover:text-text-primary-dark rounded transition-colors","aria-label":s("settings.homeLocation.clear"),children:e.jsx(be,{className:"w-5 h-5"})})]}),r.geoSupported&&e.jsx(C,{variant:"secondary",onClick:r.requestLocation,loading:r.geoLoading,fullWidth:!0,iconLeft:!r.geoLoading&&e.jsx(re,{className:"w-4 h-4"}),children:r.geoLoading?s("settings.homeLocation.locating"):s("settings.homeLocation.useCurrentLocation")}),r.geoError&&e.jsx("p",{className:"text-sm text-error-600 dark:text-error-400",children:nt(r.geoError,s)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"address-search",className:"block text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.homeLocation.searchLabel")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"address-search",type:"text",value:r.addressQuery,onChange:r.handleAddressChange,placeholder:s("settings.homeLocation.searchPlaceholder"),className:"w-full px-4 py-2 text-sm border border-border-default dark:border-border-default-dark rounded-lg bg-surface-card dark:bg-surface-card-dark text-text-primary dark:text-text-primary-dark placeholder:text-text-muted dark:placeholder:text-text-muted-dark focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),r.geocodeLoading&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("span",{className:"w-4 h-4 block border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})})]}),r.geocodeError&&e.jsx("p",{className:"text-sm text-error-600 dark:text-error-400",children:s("settings.homeLocation.searchError")}),r.geocodeResults.length>0&&e.jsx("ul",{className:"border border-border-default dark:border-border-default-dark rounded-lg overflow-hidden divide-y divide-border-subtle dark:divide-border-subtle-dark",children:r.geocodeResults.map(t=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>r.handleSelectGeocodedLocation(t),className:"w-full px-4 py-3 text-left text-sm text-text-primary dark:text-text-primary-dark hover:bg-surface-subtle dark:hover:bg-surface-subtle-dark transition-colors",children:t.displayName})},t.id))}),r.debouncedQuery.length>=r.minSearchLength&&!r.geocodeLoading&&r.geocodeResults.length===0&&!r.geocodeError&&e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.homeLocation.noResults")})]})]})]})}const dt=a.memo(ot),O=300,J=10,lt=200,ee=30,ct=240;function mt(){const s=te(),r=Ae(),t=Re(),{homeLocation:i,transportEnabled:n,transportEnabledByAssociation:o,setTransportEnabledForAssociation:c,distanceFilter:u,distanceFilterByAssociation:f,setDistanceFilterForAssociation:m,travelTimeFilter:l,setMaxTravelTimeForAssociation:x,arrivalBufferByAssociation:k,setArrivalBufferForAssociation:N,sbbDestinationType:p,setSbbDestinationType:h}=B(D(d=>({homeLocation:d.homeLocation,transportEnabled:d.transportEnabled,transportEnabledByAssociation:d.transportEnabledByAssociation,setTransportEnabledForAssociation:d.setTransportEnabledForAssociation,distanceFilter:d.distanceFilter,distanceFilterByAssociation:d.distanceFilterByAssociation,setDistanceFilterForAssociation:d.setDistanceFilterForAssociation,travelTimeFilter:d.travelTimeFilter,setMaxTravelTimeForAssociation:d.setMaxTravelTimeForAssociation,arrivalBufferByAssociation:d.travelTimeFilter.arrivalBufferByAssociation,setArrivalBufferForAssociation:d.setArrivalBufferForAssociation,sbbDestinationType:d.travelTimeFilter.sbbDestinationType??"address",setSbbDestinationType:d.setSbbDestinationType}))),[A,b]=a.useState(!1),[M,F]=a.useState(0),j=a.useMemo(()=>{const d=o??{};return t&&d[t]!==void 0?d[t]:n},[t,o,n]),g=a.useMemo(()=>{const d=f??{};return t&&d[t]!==void 0?d[t]:u??{enabled:!1,maxDistanceKm:X}},[t,f,u]),v=a.useMemo(()=>{const d=l?.maxTravelTimeByAssociation??{};return t&&d[t]!==void 0?d[t]:l?.maxTravelTimeMinutes??q},[t,l]),E=a.useMemo(()=>t&&k?.[t]!==void 0?k[t]:ke(t),[t,k]),[ae,$]=a.useState(E),[ne,W]=a.useState(g.maxDistanceKm),[ie,K]=a.useState(v),_=a.useRef(null),R=a.useRef(null),I=a.useRef(null);a.useEffect(()=>{$(d=>d!==E?E:d)},[E]),a.useEffect(()=>{W(d=>d!==g.maxDistanceKm?g.maxDistanceKm:d)},[g.maxDistanceKm]),a.useEffect(()=>{K(d=>d!==v?v:d)},[v]),a.useEffect(()=>()=>{_.current&&clearTimeout(_.current),R.current&&clearTimeout(R.current),I.current&&clearTimeout(I.current)},[]);const oe=a.useMemo(()=>j?De().entryCount:0,[j,M]),de=a.useCallback(()=>{t&&c(t,!j)},[t,j,c]),le=a.useCallback(()=>{Me(),s.invalidateQueries({queryKey:se.travelTime.all}),F(d=>d+1),b(!1)},[s]),ce=a.useCallback(d=>{if(!t)return;const y=parseInt(d.target.value,10);!isNaN(y)&&y>=Q&&($(y),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{N(t,y)},O))},[t,N]),me=a.useCallback(d=>{if(!t)return;const y=parseInt(d.target.value,10);!isNaN(y)&&y>=J&&(W(y),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{m(t,{maxDistanceKm:y})},O))},[t,m]),xe=a.useCallback(d=>{if(!t)return;const y=parseInt(d.target.value,10);!isNaN(y)&&y>=ee&&(K(y),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{x(t,y)},O))},[t,x]),ue=a.useCallback(d=>{h(d)},[h]),G=!!i;return{associationCode:t,isTransportAvailable:r,isTransportEnabled:j,localArrivalBuffer:ae,localMaxDistance:ne,localMaxTravelTime:ie,cacheEntryCount:oe,showClearConfirm:A,hasHomeLocation:G,canEnableTransport:G&&r&&!!t,sbbDestinationType:p,minArrivalBuffer:Q,maxArrivalBuffer:je,minMaxDistance:J,maxMaxDistance:lt,defaultMaxDistance:X,minMaxTravelTime:ee,maxMaxTravelTime:ct,defaultMaxTravelTime:q,handleToggleTransport:de,handleClearCache:le,handleArrivalBufferChange:ce,handleMaxDistanceChange:me,handleMaxTravelTimeChange:xe,handleSbbDestinationTypeChange:ue,setShowClearConfirm:b}}function xt({code:s}){return e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium rounded bg-primary-100 dark:bg-primary-900/40 text-primary-700 dark:text-primary-300",children:s})}function ut(){const{t:s,tInterpolate:r}=T(),t=mt();return t.associationCode?e.jsxs(S,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark"}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:s("settings.transport.title")}),e.jsx(xt,{code:t.associationCode})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg",children:[e.jsx(U,{className:"w-4 h-4 flex-shrink-0 mt-0.5 text-primary-600 dark:text-primary-400"}),e.jsx("p",{className:"text-xs text-primary-700 dark:text-primary-300",children:s("settings.transport.perAssociationNote")})]}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.transport.description")}),!t.hasHomeLocation&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-surface-subtle dark:bg-surface-subtle-dark rounded-lg",children:[e.jsx(U,{className:"w-5 h-5 flex-shrink-0 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.transport.requiresHomeLocation")})]}),t.hasHomeLocation&&!t.isTransportAvailable&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-warning-50 dark:bg-warning-900/20 rounded-lg",children:[e.jsx(U,{className:"w-5 h-5 flex-shrink-0 text-warning-600 dark:text-warning-400"}),e.jsx("span",{className:"text-sm text-warning-700 dark:text-warning-300",children:s("settings.transport.apiNotConfigured")})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.enableCalculations")})}),e.jsx(P,{checked:t.isTransportEnabled,onChange:t.handleToggleTransport,disabled:!t.canEnableTransport,label:s("settings.transport.enableCalculations")})]}),!t.canEnableTransport&&e.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-1",children:t.hasHomeLocation?t.isTransportAvailable?s("settings.transport.disabledHint"):s("settings.transport.apiNotConfigured"):s("settings.transport.requiresHomeLocation")})]}),t.hasHomeLocation&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.maxDistance")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-0.5 ml-6",children:s("settings.transport.maxDistanceDescription")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:t.minMaxDistance,max:t.maxMaxDistance,value:t.localMaxDistance,onChange:t.handleMaxDistanceChange,className:"w-16 px-2 py-1 text-sm text-right border border-border-default dark:border-border-default-dark rounded-md bg-surface-card dark:bg-surface-card-dark text-text-primary dark:text-text-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":s("settings.transport.maxDistance")}),e.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("common.distanceUnit")})]})]})}),t.isTransportEnabled&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.maxTravelTime")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-0.5 ml-6",children:s("settings.transport.maxTravelTimeDescription")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:t.minMaxTravelTime,max:t.maxMaxTravelTime,step:15,value:t.localMaxTravelTime,onChange:t.handleMaxTravelTimeChange,className:"w-16 px-2 py-1 text-sm text-right border border-border-default dark:border-border-default-dark rounded-md bg-surface-card dark:bg-surface-card-dark text-text-primary dark:text-text-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":s("settings.transport.maxTravelTime")}),e.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("common.minutesUnit")})]})]})}),e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark","data-tour":"arrival-time",children:e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.arrivalTime")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-0.5 ml-6",children:s("settings.transport.arrivalTimeDescription")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:t.minArrivalBuffer,max:t.maxArrivalBuffer,value:t.localArrivalBuffer,onChange:t.handleArrivalBufferChange,className:"w-16 px-2 py-1 text-sm text-right border border-border-default dark:border-border-default-dark rounded-md bg-surface-card dark:bg-surface-card-dark text-text-primary dark:text-text-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":s("settings.transport.arrivalTime")}),e.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("common.minutesUnit")})]})]})}),e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-text-muted dark:text-text-muted-dark"}),e.jsx("span",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:s("settings.transport.sbbDestination")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mb-3 ml-6",children:s("settings.transport.sbbDestinationDescription")}),e.jsxs("div",{className:"flex flex-col gap-2 ml-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sbbDestinationType",value:"address",checked:t.sbbDestinationType==="address",onChange:()=>t.handleSbbDestinationTypeChange("address"),className:"w-4 h-4 text-primary-600 border-border-default dark:border-border-default-dark focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-text-primary dark:text-text-primary-dark",children:s("settings.transport.sbbDestinationAddress")})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sbbDestinationType",value:"station",checked:t.sbbDestinationType==="station",onChange:()=>t.handleSbbDestinationTypeChange("station"),className:"w-4 h-4 text-primary-600 border-border-default dark:border-border-default-dark focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-text-primary dark:text-text-primary-dark",children:s("settings.transport.sbbDestinationStation")})]})]})]})}),e.jsxs("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:[e.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark mb-2",children:s("settings.transport.cacheInfo")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-text-secondary dark:text-text-secondary-dark",children:r("settings.transport.cacheEntries",{count:t.cacheEntryCount})}),t.showClearConfirm?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>t.setShowClearConfirm(!1),className:"text-sm text-text-muted dark:text-text-muted-dark hover:text-text-secondary dark:hover:text-text-secondary-dark",children:s("common.cancel")}),e.jsx("button",{type:"button",onClick:t.handleClearCache,className:"text-sm text-error-600 dark:text-error-400 hover:text-error-700 dark:hover:text-error-300",children:s("common.confirm")})]}):e.jsx("button",{type:"button",onClick:()=>t.setShowClearConfirm(!0),disabled:t.cacheEntryCount===0,className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 disabled:opacity-50 disabled:cursor-not-allowed",children:s("settings.transport.refreshCache")})]})]})]})]})]})]}):null}const pt=a.memo(ut),ht=a.lazy(()=>ye(()=>import("./chunk-SafeModeWarningModal-DSMgrkCG.js").then(s=>s.S),__vite__mapDeps([0,1,2,3,4,5])).then(s=>({default:s.SafeModeWarningModal})));function ft({isSafeModeEnabled:s,onSetSafeMode:r,isSafeValidationEnabled:t,onSetSafeValidation:i}){const{t:n}=T(),[o,c]=a.useState(!1),u=a.useCallback(()=>{s?c(!0):r(!0)},[s,r]),f=a.useCallback(()=>{c(!1)},[]),m=a.useCallback(()=>{r(!1)},[r]),l=a.useCallback(()=>{i(!t)},[t,i]);return e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:n("settings.dataProtection.title")}),!s&&e.jsx("svg",{className:"w-5 h-5 text-warning-600 dark:text-warning-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:n("settings.safeMode")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:n("settings.safeModeDescription")}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:n(s?"settings.safeModeEnabled":"settings.safeModeDisabled")}),!s&&e.jsx("div",{className:"text-xs text-warning-600 dark:text-warning-400 mt-1",children:n("settings.safeModeDangerous")})]}),e.jsx(P,{checked:s,onChange:u,label:n("settings.safeMode"),variant:"success"})]})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:n("settings.safeValidation")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:n("settings.safeValidationDescription")}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:n(t?"settings.safeValidationEnabled":"settings.safeValidationDisabled")})}),e.jsx(P,{checked:t,onChange:l,label:n("settings.safeValidation"),variant:"success"})]})]})]})]}),o&&e.jsx(a.Suspense,{fallback:null,children:e.jsx(ht,{isOpen:o,onClose:f,onConfirm:m})})]})}const gt=a.memo(ft),bt=["assignments","compensations","exchange","settings"];function kt({isDemoMode:s}){const{t:r}=T(),{getTourStatus:t,resetAllTours:i}=Ne(D(n=>({getTourStatus:n.getTourStatus,resetAllTours:n.resetAllTours})));return e.jsxs(S,{"data-tour":"tour-reset",children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-primary-600 dark:text-primary-400","aria-hidden":"true"}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:r("settings.helpTours.title")})]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("settings.help.title")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:r("settings.help.description")}),e.jsxs("a",{href:ve(),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary-600 dark:text-primary-400 hover:underline text-sm",children:[r("settings.help.openDocs")," →"]})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("tour.settings.tourSection.title")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:r("tour.settings.tourSection.description")}),!s&&e.jsx("p",{className:"text-sm text-warning-600 dark:text-warning-400",children:r("tour.settings.tourSection.safeModeNote")}),e.jsx("div",{className:"space-y-2",children:bt.map(n=>{const o=t(n);return e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx("span",{className:"text-sm text-text-primary dark:text-text-primary-dark capitalize",children:r(`nav.${n}`)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${o==="completed"?"bg-success-100 text-success-700 dark:bg-success-900/50 dark:text-success-300":o==="dismissed"?"bg-warning-100 text-warning-700 dark:bg-warning-900/50 dark:text-warning-300":"bg-surface-subtle text-text-muted dark:bg-surface-subtle-dark dark:text-text-muted-dark"}`,children:r(o==="completed"?"tour.settings.tourSection.statusCompleted":o==="dismissed"?"tour.settings.tourSection.statusSkipped":"tour.settings.tourSection.statusNotStarted")})]},n)})}),e.jsx("div",{className:"pt-2",children:e.jsx(C,{variant:"secondary",onClick:i,children:r("tour.settings.tourSection.restart")})})]})]})]})}const jt=a.memo(kt);function yt(){const{t:s}=T(),r=te(),[t,i]=a.useState(!1),{homeLocation:n,transportEnabled:o,resetLocationSettings:c}=B(D(l=>({homeLocation:l.homeLocation,transportEnabled:l.transportEnabled,resetLocationSettings:l.resetLocationSettings}))),u=a.useCallback(()=>{r.removeQueries({queryKey:se.travelTime.all}),c(),i(!1)},[r,c]),f=a.useCallback(()=>{i(!0)},[]),m=a.useCallback(()=>{i(!1)},[]);return e.jsxs(S,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-text-muted dark:text-text-muted-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:s("settings.dataRetention.title")})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm text-text-muted dark:text-text-muted-dark",children:[e.jsx("p",{children:s("settings.privacyNoCollection")}),e.jsx("p",{children:s("settings.privacyDirectComm")}),e.jsx("p",{children:s("settings.privacyNoAnalytics")})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s("settings.dataRetention.description")}),e.jsx("div",{className:"space-y-2",children:e.jsxs("ul",{className:"space-y-2 text-sm text-text-primary dark:text-text-primary-dark",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s("settings.dataRetention.homeLocation")})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s("settings.dataRetention.filterPreferences")})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s("settings.dataRetention.travelTimeCache")})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s("settings.dataRetention.languagePreference")})]})]})}),o&&e.jsxs("div",{className:"p-3 bg-surface-subtle dark:bg-surface-subtle-dark rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark mb-1",children:s("settings.dataRetention.externalServices")}),e.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:s("settings.dataRetention.transportApiNote")})]}),(n||o)&&e.jsx("div",{className:"pt-2 border-t border-border-subtle dark:border-border-subtle-dark",children:t?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-text-primary dark:text-text-primary-dark",children:s("settings.dataRetention.clearDataConfirm")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{variant:"secondary",onClick:m,className:"flex-1",children:s("common.cancel")}),e.jsx(C,{variant:"primary",onClick:u,className:"flex-1",children:s("common.confirm")})]})]}):e.jsx(C,{variant:"secondary",onClick:f,fullWidth:!0,iconLeft:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),children:s("settings.dataRetention.clearData")})})]})]})}const Nt=a.memo(yt),vt=3e3;function Ct({activeAssociationCode:s,onRefreshData:r}){const{t}=T(),[i,n]=a.useState(!1),o=a.useRef(null);a.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]);const c=a.useCallback(()=>{r(),n(!0),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>n(!1),vt)},[r]);return e.jsxs(S,{children:[e.jsx(w,{children:e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:t("settings.demoData")})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:t("settings.demoDataDescription")}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1",children:[i&&e.jsx("div",{className:"text-sm font-medium text-success-600 dark:text-success-400",role:"status","aria-live":"polite",children:t("settings.demoDataReset")}),s&&!i&&e.jsx("div",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:s})]}),e.jsx(C,{variant:"secondary",onClick:c,"aria-label":t("settings.resetDemoData"),children:t("settings.resetDemoData")})]})]})]})}const Tt=a.memo(Ct),St="/volleykit/pr-905/ocr-poc/";function wt({showUpdates:s}){const{t:r,locale:t}=T(),{needRefresh:i,isChecking:n,lastChecked:o,checkError:c,checkForUpdate:u,updateApp:f}=Ce(),{isOCREnabled:m,setOCREnabled:l}=B(),k=Te()?"PWA":"Web",N=a.useCallback(()=>{l(!m)},[m,l]),p=a.useCallback(h=>{const A=new Date;return h.toDateString()===A.toDateString()?h.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"}):h.toLocaleString(t,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},[t]);return e.jsxs(S,{children:[e.jsx(w,{children:e.jsx("h2",{className:"font-semibold text-text-primary dark:text-text-primary-dark",children:r("settings.about")})}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted dark:text-text-muted-dark",children:r("settings.version")}),e.jsxs("span",{className:"text-text-primary dark:text-text-primary-dark",children:["1.14.0"," ",e.jsxs("span",{className:"text-text-muted dark:text-text-muted-dark font-mono text-xs",children:["(","805b0b8",")"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted dark:text-text-muted-dark",children:r("settings.platform")}),e.jsx("span",{className:"text-text-primary dark:text-text-primary-dark",children:k})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("settings.updates")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark","aria-live":"polite",children:r(i?"settings.updateAvailable":"settings.upToDate")}),o&&e.jsxs("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-1",children:[r("settings.lastChecked"),": ",p(o)]}),c&&e.jsx("div",{className:"text-xs text-danger-600 dark:text-danger-400 mt-1",role:"alert",children:r("settings.updateCheckFailed")})]}),i?e.jsx(C,{variant:"primary",onClick:f,"aria-label":r("settings.updateNow"),children:r("settings.updateNow")}):e.jsx(C,{variant:"secondary",onClick:u,loading:n,"aria-label":r("settings.checkForUpdates"),children:r(n?"settings.checking":"settings.checkForUpdates")})]})]})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("settings.experimental.title")}),e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:r("settings.experimental.description")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-text-primary dark:text-text-primary-dark text-sm",children:r("settings.experimental.ocrPoc")}),e.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:r("settings.experimental.ocrPocDescription")})]}),e.jsx(C,{variant:"secondary",onClick:()=>window.open(St,"_blank","noopener,noreferrer"),"aria-label":r("settings.experimental.openOcrPoc"),children:r("settings.experimental.openOcrPoc")})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary dark:text-text-primary-dark",children:r("settings.experimental.ocrValidation")}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark mt-1",children:r("settings.experimental.ocrValidationDescription")})]}),e.jsx(P,{checked:m,onChange:N,label:r("settings.experimental.ocrValidation")})]}),e.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted-dark",children:r(m?"settings.experimental.ocrValidationEnabled":"settings.experimental.ocrValidationDisabled")})]}),e.jsx("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark pt-3",children:e.jsxs("a",{href:"https://volleymanager.volleyball.ch",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 dark:text-primary-400 hover:underline text-sm",children:[r("settings.openWebsite")," →"]})}),e.jsxs("div",{className:"border-t border-border-subtle dark:border-border-subtle-dark pt-3 space-y-2",children:[e.jsx("p",{className:"text-sm text-text-muted dark:text-text-muted-dark",children:r("settings.dataSource")}),e.jsx("p",{className:"text-xs text-text-subtle dark:text-text-subtle-dark",children:r("settings.disclaimer")})]})]})]})}const Lt=a.memo(wt);function Ut(){const{user:s,logout:r,dataSource:t,isCalendarMode:i}=V(D(p=>({user:p.user,logout:p.logout,dataSource:p.dataSource,isCalendarMode:p.isCalendarMode()}))),n=t==="demo",{activeAssociationCode:o,refreshData:c}=Se(D(p=>({activeAssociationCode:p.activeAssociationCode,refreshData:p.refreshData}))),{isSafeModeEnabled:u,setSafeMode:f,isSafeValidationEnabled:m,setSafeValidation:l,preventZoom:x,setPreventZoom:k}=B(D(p=>({isSafeModeEnabled:p.isSafeModeEnabled,setSafeMode:p.setSafeMode,isSafeValidationEnabled:p.isSafeValidationEnabled,setSafeValidation:p.setSafeValidation,preventZoom:p.preventZoom,setPreventZoom:p.setPreventZoom}))),{t:N}=T();return we("settings"),e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsx("h1",{className:"text-2xl font-bold text-text-primary dark:text-text-primary-dark",children:N("settings.title")}),s&&e.jsx(Ve,{user:s}),e.jsx(Ke,{preventZoom:x,onSetPreventZoom:k}),e.jsx(dt,{}),e.jsx(pt,{}),e.jsx(Nt,{}),e.jsx(jt,{isDemoMode:n}),n&&e.jsx(Tt,{activeAssociationCode:o,onRefreshData:c}),!n&&!i&&e.jsx(gt,{isSafeModeEnabled:u,onSetSafeMode:f,isSafeValidationEnabled:m,onSetSafeValidation:l}),e.jsx(Lt,{showUpdates:!1}),e.jsx("div",{className:"pt-4 border-t border-border-default dark:border-border-default-dark",children:e.jsx(C,{variant:"secondary",onClick:r,className:"w-full sm:w-auto",children:N("auth.logout")})})]})}export{Ut as SettingsPage};
