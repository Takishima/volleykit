var tr={"OJPRequest.ServiceRequest":"siri","ServiceRequest.ServiceRequestContext":"siri","ServiceRequestContext.Language":"siri","ServiceRequest.RequestTimestamp":"siri","ServiceRequest.RequestorRef":"siri","OJPResponse.ServiceDelivery":"siri","ServiceDelivery.ResponseTimestamp":"siri","ServiceDelivery.ProducerRef":"siri","OJPTripRefineRequest.RequestTimestamp":"siri","OJPFareRequest.RequestTimestamp":"siri","OJPTripInfoRequest.RequestTimestamp":"siri","OJPTripRequest.RequestTimestamp":"siri","OJPTripDelivery.ResponseTimestamp":"siri","OJPTripDelivery.RequestMessageRef":"siri","OJPTripDelivery.DefaultLanguage":"siri","LegBoard.StopPointRef":"siri","LegIntermediate.StopPointRef":"siri","LegIntermediates.StopPointRef":"siri","LegAlight.StopPointRef":"siri","Mode.AirSubmode":"siri","Mode.BusSubmode":"siri","Mode.CoachSubmode":"siri","Mode.FunicularSubmode":"siri","Mode.MetroSubmode":"siri","Mode.TramSubmode":"siri","Mode.TelecabinSubmode":"siri","Mode.RailSubmode":"siri","Mode.WaterSubmode":"siri","ModeAndModeOfOperationFilter.AirSubmode":"siri","ModeAndModeOfOperationFilter.BusSubmode":"siri","ModeAndModeOfOperationFilter.CoachSubmode":"siri","ModeAndModeOfOperationFilter.FunicularSubmode":"siri","ModeAndModeOfOperationFilter.MetroSubmode":"siri","ModeAndModeOfOperationFilter.TramSubmode":"siri","ModeAndModeOfOperationFilter.TelecabinSubmode":"siri","ModeAndModeOfOperationFilter.RailSubmode":"siri","ModeAndModeOfOperationFilter.WaterSubmode":"siri","Service.LineRef":"siri","Service.OperatorRef":"siri","Service.DirectionRef":"siri","TrackSectionStart.StopPointRef":"siri","TrackSectionEnd.StopPointRef":"siri","Position.Longitude":"siri","Position.Latitude":"siri","LegStart.StopPointRef":"siri","LegEnd.StopPointRef":"siri","LegBoard.ExpectedDepartureOccupancy":"siri","LegAlight.ExpectedDepartureOccupancy":"siri","LegIntermediate.ExpectedDepartureOccupancy":"siri","ExpectedDepartureOccupancy.FareClass":"siri","ExpectedDepartureOccupancy.OccupancyLevel":"siri","OJPLocationInformationRequest.RequestTimestamp":"siri","UpperLeft.Longitude":"siri","UpperLeft.Latitude":"siri","LowerRight.Longitude":"siri","LowerRight.Latitude":"siri","GeoPosition.Longitude":"siri","GeoPosition.Latitude":"siri","Line.LineRef":"siri","OJPStopEventRequest.RequestTimestamp":"siri","PlaceRef.StopPointRef":"siri"},rr={"places.place":!0,"linkProjection.position":!0,"situationFullRefs.situationFullRef":!0,"situations.ptSituation":!0,"ptSituation.validityPeriod":!0,"publishingActions.publishingAction":!0,"publishingAction.passengerInformationAction":!0,"passengerInformationAction.textualContent":!0,"textualContent.descriptionContent":!0,"textualContent.consequenceContent":!0,"textualContent.recommendationContent":!0,"textualContent.remarkContent":!0,"textualContent.infoLink":!0,"itModeAndModeOfOperation.personalModeOfOperation":!0,"service.attribute":!0,"origin.individualTransportOption":!0,"destination.individualTransportOption":!0,"OJPTripDelivery.tripResult":!0,"trip.leg":!0,"timedLeg.legIntermediate":!0,"legTrack.trackSection":!0,"pathGuidance.pathGuidanceSection":!0,"legBoard.expectedDepartureOccupancy":!0,"legIntermediate.expectedDepartureOccupancy":!0,"legAlight.expectedDepartureOccupancy":!0,"OJPLocationInformationDelivery.placeResult":!0,"place.mode":!0,"place.attribute":!0,"pointOfInterest.pointOfInterestCategory":!0,"pointOfInterestCategory.osmTag":!0,"pointOfInterestCategory.pointOfInterestClassification":!0,"pOIAdditionalInformation.pOIAdditionalInformation":!0,"OJPFareDelivery.fareResult":!0,"fareResult.tripFareResult":!0,"tripFareResult.fareProduct":!0,"OJPStopEventDelivery.stopEventResult":!0,"stopEvent.previousCall":!0,"stopEvent.onwardCall":!0,"OJPTripInfoDelivery.tripInfoResult":!0,"tripInfoResult.previousCall":!0,"tripInfoResult.onwardCall":!0,"journeyTrack.trackSection":!0,"OJPTripRefineDelivery.tripResult":!0},sr={"places.location":!0,"trip.tripLeg":!0,"callAtStop.situationFullRef":!0,"ptSituation.description":!0,"ptSituation.detail":!0,"stopPoints.affectedStopPoint":!0,"vehicleJourneys.affectedVehicleJourney":!0,"service.situationFullRef":!0,"timedLeg.legIntermediates":!0,"OJPLocationInformationDelivery.location":!0,"location.mode":!0,"location.attribute":!0},nr={"stopPlace.stopPlaceRef":!0,"publishedServiceName.text":!0,"service.operatorRef":!0},K={MapNS_Tags:tr,MapArrayTags:rr,MapLegacyArrayTags:sr,MapStringValues:nr};const gt=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ir=gt+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",or="["+gt+"]["+ir+"]*",ar=new RegExp("^"+or+"$");function yt(t,e){const r=[];let s=e.exec(t);for(;s;){const n=[];n.startIndex=e.lastIndex-s[0].length;const i=s.length;for(let o=0;o<i;o++)n.push(s[o]);r.push(n),s=e.exec(t)}return r}const Xe=function(t){const e=ar.exec(t);return!(e===null||typeof e>"u")};function ur(t){return typeof t<"u"}const cr={allowBooleanAttributes:!1,unpairedTags:[]};function lr(t,e){e=Object.assign({},cr,e);const r=[];let s=!1,n=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=Ze(t,i),i.err)return i}else if(t[i]==="<"){let o=i;if(i++,t[i]==="!"){i=Ye(t,i);continue}else{let u=!1;t[i]==="/"&&(u=!0,i++);let a="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)a+=t[i];if(a=a.trim(),a[a.length-1]==="/"&&(a=a.substring(0,a.length-1),i--),!Rr(a)){let p;return a.trim().length===0?p="Invalid space after '<'.":p="Tag '"+a+"' is an invalid name.",w("InvalidTag",p,v(t,i))}const c=dr(t,i);if(c===!1)return w("InvalidAttr","Attributes for '"+a+"' have open quote.",v(t,i));let l=c.value;if(i=c.index,l[l.length-1]==="/"){const p=i-l.length;l=l.substring(0,l.length-1);const m=Qe(l,e);if(m===!0)s=!0;else return w(m.err.code,m.err.msg,v(t,p+m.err.line))}else if(u)if(c.tagClosed){if(l.trim().length>0)return w("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",v(t,o));if(r.length===0)return w("InvalidTag","Closing tag '"+a+"' has not been opened.",v(t,o));{const p=r.pop();if(a!==p.tagName){let m=v(t,p.tagStartPos);return w("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+m.line+", col "+m.col+") instead of closing tag '"+a+"'.",v(t,o))}r.length==0&&(n=!0)}}else return w("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",v(t,i));else{const p=Qe(l,e);if(p!==!0)return w(p.err.code,p.err.msg,v(t,i-l.length+p.err.line));if(n===!0)return w("InvalidXml","Multiple possible root nodes found.",v(t,i));e.unpairedTags.indexOf(a)!==-1||r.push({tagName:a,tagStartPos:o}),s=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=Ye(t,i);continue}else if(t[i+1]==="?"){if(i=Ze(t,++i),i.err)return i}else break;else if(t[i]==="&"){const p=gr(t,i);if(p==-1)return w("InvalidChar","char '&' is not expected.",v(t,i));i=p}else if(n===!0&&!Ge(t[i]))return w("InvalidXml","Extra text at the end",v(t,i));t[i]==="<"&&i--}}else{if(Ge(t[i]))continue;return w("InvalidChar","char '"+t[i]+"' is not expected.",v(t,i))}if(s){if(r.length==1)return w("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",v(t,r[0].tagStartPos));if(r.length>0)return w("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return w("InvalidXml","Start tag expected.",1);return!0}function Ge(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Ze(t,e){const r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const s=t.substr(r,e-r);if(e>5&&s==="xml")return w("InvalidXml","XML declaration allowed only at the start of the document.",v(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Ye(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const fr='"',pr="'";function dr(t,e){let r="",s="",n=!1;for(;e<t.length;e++){if(t[e]===fr||t[e]===pr)s===""?s=t[e]:s!==t[e]||(s="");else if(t[e]===">"&&s===""){n=!0;break}r+=t[e]}return s!==""?!1:{value:r,index:e,tagClosed:n}}const hr=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Qe(t,e){const r=yt(t,hr),s={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return w("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",Y(r[n]));if(r[n][3]!==void 0&&r[n][4]===void 0)return w("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",Y(r[n]));if(r[n][3]===void 0&&!e.allowBooleanAttributes)return w("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",Y(r[n]));const i=r[n][2];if(!yr(i))return w("InvalidAttr","Attribute '"+i+"' is an invalid name.",Y(r[n]));if(!s.hasOwnProperty(i))s[i]=1;else return w("InvalidAttr","Attribute '"+i+"' is repeated.",Y(r[n]))}return!0}function mr(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function gr(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,mr(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function w(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function yr(t){return Xe(t)}function Rr(t){return Xe(t)}function v(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Y(t){return t.startIndex+t[1].length}const br={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}},Or=function(t){return Object.assign({},br,t)};class Q{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}function Pr(t,e){const r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let s=1,n=!1,i=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(n&&Er(t,e)){e+=7;let u,a;[u,a,e]=Tr(t,e+1),a.indexOf("&")===-1&&(r[qr(u)]={regx:RegExp(`&${u};`,"g"),val:a})}else if(n&&Sr(t,e))e+=8;else if(n&&Nr(t,e))e+=8;else if(n&&vr(t,e))e+=9;else if(wr)i=!0;else throw new Error("Invalid DOCTYPE");s++,o=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,s--):s--,s===0)break}else t[e]==="["?n=!0:o+=t[e];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}function Tr(t,e){let r="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)r+=t[e];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");const s=t[e++];let n="";for(;e<t.length&&t[e]!==s;e++)n+=t[e];return[r,n,e]}function wr(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function Er(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function Sr(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function Nr(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function vr(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function qr(t){if(Xe(t))return t;throw new Error(`Invalid entity name ${t}`)}const Ar=/^[-+]?0x[a-fA-F0-9]+$/,xr=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Lr={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Cr(t,e={}){if(e=Object.assign({},Lr,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(t==="0")return 0;if(e.hex&&Ar.test(r))return kr(r,16);if(r.includes("e")||r.includes("E"))return Ir(t,r,e);{const s=xr.exec(r);if(s){const n=s[1]||"",i=s[2];let o=Fr(s[3]);const u=n?t[i.length+1]===".":t[i.length]===".";if(!e.leadingZeros&&(i.length>1||i.length===1&&!u))return t;{const a=Number(r),c=String(a);if(a===0)return a;if(c.search(/[eE]/)!==-1)return e.eNotation?a:t;if(r.indexOf(".")!==-1)return c==="0"||c===o||c===`${n}${o}`?a:t;let l=i?o:r;return i?l===c||n+l===c?a:t:l===c||l===n+c?a:t}}else return t}}const Mr=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Ir(t,e,r){if(!r.eNotation)return t;const s=e.match(Mr);if(s){let n=s[1]||"";const i=s[3].indexOf("e")===-1?"E":"e",o=s[2],u=n?t[o.length+1]===i:t[o.length]===i;return o.length>1&&u?t:o.length===1&&(s[3].startsWith(`.${i}`)||s[3][0]===i)?Number(e):r.leadingZeros&&!u?(e=(s[1]||"")+s[3],Number(e)):t}else return t}function Fr(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function kr(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function Rt(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const r of t)if(typeof r=="string"&&e===r||r instanceof RegExp&&r.test(e))return!0}:()=>!1}class Jr{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,s)=>String.fromCharCode(Number.parseInt(s,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,s)=>String.fromCharCode(Number.parseInt(s,16))}},this.addExternalEntities=_r,this.parseXml=Xr,this.parseTextData=Br,this.resolveNameSpace=jr,this.buildAttributesMap=Dr,this.isItStopNode=Hr,this.replaceEntitiesValue=$r,this.readStopNodeData=zr,this.saveTextToParentTag=Wr,this.addChild=Vr,this.ignoreAttributesFn=Rt(this.options.ignoreAttributes)}}function _r(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const s=e[r];this.lastEntities[s]={regex:new RegExp("&"+s+";","g"),val:t[s]}}}function Br(t,e,r,s,n,i,o){if(t!==void 0&&(this.options.trimValues&&!s&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const u=this.options.tagValueProcessor(e,t,r,n,i);return u==null?t:typeof u!=typeof t||u!==t?u:this.options.trimValues?xe(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?xe(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function jr(t){if(this.options.removeNSPrefix){const e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}const Ur=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Dr(t,e,r){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const s=yt(t,Ur),n=s.length,i={};for(let o=0;o<n;o++){const u=this.resolveNameSpace(s[o][1]);if(this.ignoreAttributesFn(u,e))continue;let a=s[o][4],c=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),a!==void 0){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);const l=this.options.attributeValueProcessor(u,a,e);l==null?i[c]=a:typeof l!=typeof a||l!==a?i[c]=l:i[c]=xe(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[c]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const Xr=function(t){t=t.replace(/\r\n?/g,`
`);const e=new Q("!xml");let r=e,s="",n="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const u=U(t,">",i,"Closing Tag is not closed.");let a=t.substring(i+2,u).trim();if(this.options.removeNSPrefix){const p=a.indexOf(":");p!==-1&&(a=a.substr(p+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),r&&(s=this.saveTextToParentTag(s,r,n));const c=n.substring(n.lastIndexOf(".")+1);if(a&&this.options.unpairedTags.indexOf(a)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${a}>`);let l=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(l=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=n.lastIndexOf("."),n=n.substring(0,l),r=this.tagsNodeStack.pop(),s="",i=u}else if(t[i+1]==="?"){let u=Ae(t,i,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(s=this.saveTextToParentTag(s,r,n),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const a=new Q(u.tagName);a.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(a[":@"]=this.buildAttributesMap(u.tagExp,n,u.tagName)),this.addChild(r,a,n)}i=u.closeIndex+1}else if(t.substr(i+1,3)==="!--"){const u=U(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const a=t.substring(i+4,u-2);s=this.saveTextToParentTag(s,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}i=u}else if(t.substr(i+1,2)==="!D"){const u=Pr(t,i);this.docTypeEntities=u.entities,i=u.i}else if(t.substr(i+1,2)==="!["){const u=U(t,"]]>",i,"CDATA is not closed.")-2,a=t.substring(i+9,u);s=this.saveTextToParentTag(s,r,n);let c=this.parseTextData(a,r.tagname,n,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]):r.add(this.options.textNodeName,c),i=u+2}else{let u=Ae(t,i,this.options.removeNSPrefix),a=u.tagName;const c=u.rawTagName;let l=u.tagExp,p=u.attrExpPresent,m=u.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),r&&s&&r.tagname!=="!xml"&&(s=this.saveTextToParentTag(s,r,n,!1));const y=r;if(y&&this.options.unpairedTags.indexOf(y.tagname)!==-1&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),a!==e.tagname&&(n+=n?"."+a:a),this.isItStopNode(this.options.stopNodes,n,a)){let d="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)a[a.length-1]==="/"?(a=a.substr(0,a.length-1),n=n.substr(0,n.length-1),l=a):l=l.substr(0,l.length-1),i=u.closeIndex;else if(this.options.unpairedTags.indexOf(a)!==-1)i=u.closeIndex;else{const h=this.readStopNodeData(t,c,m+1);if(!h)throw new Error(`Unexpected end of ${c}`);i=h.i,d=h.tagContent}const g=new Q(a);a!==l&&p&&(g[":@"]=this.buildAttributesMap(l,n,a)),d&&(d=this.parseTextData(d,a,n,!0,p,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),g.add(this.options.textNodeName,d),this.addChild(r,g,n)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){a[a.length-1]==="/"?(a=a.substr(0,a.length-1),n=n.substr(0,n.length-1),l=a):l=l.substr(0,l.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const d=new Q(a);a!==l&&p&&(d[":@"]=this.buildAttributesMap(l,n,a)),this.addChild(r,d,n),n=n.substr(0,n.lastIndexOf("."))}else{const d=new Q(a);this.tagsNodeStack.push(r),a!==l&&p&&(d[":@"]=this.buildAttributesMap(l,n,a)),this.addChild(r,d,n),r=d}s="",i=m}}else s+=t[i];return e.child};function Vr(t,e,r){const s=this.options.updateTag(e.tagname,r,e[":@"]);s===!1||(typeof s=="string"&&(e.tagname=s),t.addChild(e))}const $r=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){const r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function Wr(t,e,r,s){return t&&(s===void 0&&(s=e.child.length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,s),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function Hr(t,e,r){const s="*."+r;for(const n in t){const i=t[n];if(s===i||e===i)return!0}return!1}function Kr(t,e,r=">"){let s,n="";for(let i=e;i<t.length;i++){let o=t[i];if(s)o===s&&(s="");else if(o==='"'||o==="'")s=o;else if(o===r[0])if(r[1]){if(t[i+1]===r[1])return{data:n,index:i}}else return{data:n,index:i};else o==="	"&&(o=" ");n+=o}}function U(t,e,r,s){const n=t.indexOf(e,r);if(n===-1)throw new Error(s);return n+e.length-1}function Ae(t,e,r,s=">"){const n=Kr(t,e+1,s);if(!n)return;let i=n.data;const o=n.index,u=i.search(/\s/);let a=i,c=!0;u!==-1&&(a=i.substring(0,u),i=i.substring(u+1).trimStart());const l=a;if(r){const p=a.indexOf(":");p!==-1&&(a=a.substr(p+1),c=a!==n.data.substr(p+1))}return{tagName:a,tagExp:i,closeIndex:o,attrExpPresent:c,rawTagName:l}}function zr(t,e,r){const s=r;let n=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){const i=U(t,">",r,`${e} is not closed`);if(t.substring(r+2,i).trim()===e&&(n--,n===0))return{tagContent:t.substring(s,r),i};r=i}else if(t[r+1]==="?")r=U(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=U(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=U(t,"]]>",r,"StopNode is not closed.")-2;else{const i=Ae(t,r,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&n++,r=i.closeIndex)}}function xe(t,e,r){if(e&&typeof t=="string"){const s=t.trim();return s==="true"?!0:s==="false"?!1:Cr(t,r)}else return ur(t)?t:""}function Gr(t,e){return bt(t,e)}function bt(t,e,r){let s;const n={};for(let i=0;i<t.length;i++){const o=t[i],u=Zr(o);let a="";if(r===void 0?a=u:a=r+"."+u,u===e.textNodeName)s===void 0?s=o[u]:s+=""+o[u];else{if(u===void 0)continue;if(o[u]){let c=bt(o[u],e,a);const l=Qr(c,e);o[":@"]?Yr(c,o[":@"],a,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),n[u]!==void 0&&n.hasOwnProperty(u)?(Array.isArray(n[u])||(n[u]=[n[u]]),n[u].push(c)):e.isArray(u,a,l)?n[u]=[c]:n[u]=c}}}return typeof s=="string"?s.length>0&&(n[e.textNodeName]=s):s!==void 0&&(n[e.textNodeName]=s),n}function Zr(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const s=e[r];if(s!==":@")return s}}function Yr(t,e,r,s){if(e){const n=Object.keys(e),i=n.length;for(let o=0;o<i;o++){const u=n[o];s.isArray(u,r+"."+u,!0,!0)?t[u]=[e[u]]:t[u]=e[u]}}}function Qr(t,e){const{textNodeName:r}=e,s=Object.keys(t).length;return!!(s===0||s===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}class es{constructor(e){this.externalEntities={},this.options=Or(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const i=lr(e,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const s=new Jr(this.options);s.addExternalEntities(this.externalEntities);const n=s.parseXml(e);return this.options.preserveOrder||n===void 0?n:Gr(n,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}}const ts=`
`;function rs(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=ts),Ot(t,e,"",r)}function Ot(t,e,r,s){let n="",i=!1;for(let o=0;o<t.length;o++){const u=t[o],a=ss(u);if(a===void 0)continue;let c="";if(r.length===0?c=a:c=`${r}.${a}`,a===e.textNodeName){let d=u[a];ns(c,e)||(d=e.tagValueProcessor(a,d),d=Pt(d,e)),i&&(n+=s),n+=d,i=!1;continue}else if(a===e.cdataPropName){i&&(n+=s),n+=`<![CDATA[${u[a][0][e.textNodeName]}]]>`,i=!1;continue}else if(a===e.commentPropName){n+=s+`<!--${u[a][0][e.textNodeName]}-->`,i=!0;continue}else if(a[0]==="?"){const d=et(u[":@"],e),g=a==="?xml"?"":s;let h=u[a][0][e.textNodeName];h=h.length!==0?" "+h:"",n+=g+`<${a}${h}${d}?>`,i=!0;continue}let l=s;l!==""&&(l+=e.indentBy);const p=et(u[":@"],e),m=s+`<${a}${p}`,y=Ot(u[a],e,c,l);e.unpairedTags.indexOf(a)!==-1?e.suppressUnpairedNode?n+=m+">":n+=m+"/>":(!y||y.length===0)&&e.suppressEmptyNode?n+=m+"/>":y&&y.endsWith(">")?n+=m+`>${y}${s}</${a}>`:(n+=m+">",y&&s!==""&&(y.includes("/>")||y.includes("</"))?n+=s+e.indentBy+y+s:n+=y,n+=`</${a}>`),i=!0}return n}function ss(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const s=e[r];if(t.hasOwnProperty(s)&&s!==":@")return s}}function et(t,e){let r="";if(t&&!e.ignoreAttributes)for(let s in t){if(!t.hasOwnProperty(s))continue;let n=e.attributeValueProcessor(s,t[s]);n=Pt(n,e),n===!0&&e.suppressBooleanAttributes?r+=` ${s.substr(e.attributeNamePrefix.length)}`:r+=` ${s.substr(e.attributeNamePrefix.length)}="${n}"`}return r}function ns(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let s in e.stopNodes)if(e.stopNodes[s]===t||e.stopNodes[s]==="*."+r)return!0;return!1}function Pt(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const s=e.entities[r];t=t.replace(s.regex,s.val)}return t}const is={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function B(t){this.options=Object.assign({},is,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Rt(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=us),this.processTextOrObjNode=os,this.options.format?(this.indentate=as,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}B.prototype.build=function(t){return this.options.preserveOrder?rs(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)};B.prototype.j2x=function(t,e,r){let s="",n="";const i=r.join(".");for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))if(typeof t[o]>"u")this.isAttribute(o)&&(n+="");else if(t[o]===null)this.isAttribute(o)||o===this.options.cdataPropName?n+="":o[0]==="?"?n+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(t[o]instanceof Date)n+=this.buildTextValNode(t[o],o,"",e);else if(typeof t[o]!="object"){const u=this.isAttribute(o);if(u&&!this.ignoreAttributesFn(u,i))s+=this.buildAttrPairStr(u,""+t[o]);else if(!u)if(o===this.options.textNodeName){let a=this.options.tagValueProcessor(o,""+t[o]);n+=this.replaceEntitiesValue(a)}else n+=this.buildTextValNode(t[o],o,"",e)}else if(Array.isArray(t[o])){const u=t[o].length;let a="",c="";for(let l=0;l<u;l++){const p=t[o][l];if(!(typeof p>"u"))if(p===null)o[0]==="?"?n+=this.indentate(e)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(typeof p=="object")if(this.options.oneListGroup){const m=this.j2x(p,e+1,r.concat(o));a+=m.val,this.options.attributesGroupName&&p.hasOwnProperty(this.options.attributesGroupName)&&(c+=m.attrStr)}else a+=this.processTextOrObjNode(p,o,e,r);else if(this.options.oneListGroup){let m=this.options.tagValueProcessor(o,p);m=this.replaceEntitiesValue(m),a+=m}else a+=this.buildTextValNode(p,o,"",e)}this.options.oneListGroup&&(a=this.buildObjectNode(a,o,c,e)),n+=a}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){const u=Object.keys(t[o]),a=u.length;for(let c=0;c<a;c++)s+=this.buildAttrPairStr(u[c],""+t[o][u[c]])}else n+=this.processTextOrObjNode(t[o],o,e,r);return{attrStr:s,val:n}};B.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function os(t,e,r,s){const n=this.j2x(t,r+1,s.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}B.prototype.buildObjectNode=function(t,e,r,s){if(t==="")return e[0]==="?"?this.indentate(s)+"<"+e+r+"?"+this.tagEndChar:this.indentate(s)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let n="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",n=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(s)+"<"+e+r+i+">"+t+n:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(s)+`<!--${t}-->`+this.newLine:this.indentate(s)+"<"+e+r+i+this.tagEndChar+t+this.indentate(s)+n}};B.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};B.prototype.buildTextValNode=function(t,e,r,s){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(s)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(s)+"<"+e+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(e,t);return n=this.replaceEntitiesValue(n),n===""?this.indentate(s)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(s)+"<"+e+r+">"+n+"</"+e+this.tagEndChar}};B.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function as(t){return this.options.indentBy.repeat(t)}function us(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}function Tt(t,e){return function(){return t.apply(e,arguments)}}const{toString:cs}=Object.prototype,{getPrototypeOf:Ve}=Object,Oe=(t=>e=>{const r=cs.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),I=t=>(t=t.toLowerCase(),e=>Oe(e)===t),Pe=t=>e=>typeof e===t,{isArray:z}=Array,ie=Pe("undefined");function ls(t){return t!==null&&!ie(t)&&t.constructor!==null&&!ie(t.constructor)&&x(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const wt=I("ArrayBuffer");function fs(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&wt(t.buffer),e}const ps=Pe("string"),x=Pe("function"),Et=Pe("number"),Te=t=>t!==null&&typeof t=="object",ds=t=>t===!0||t===!1,ce=t=>{if(Oe(t)!=="object")return!1;const e=Ve(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hs=I("Date"),ms=I("File"),gs=I("Blob"),ys=I("FileList"),Rs=t=>Te(t)&&x(t.pipe),bs=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||x(t.append)&&((e=Oe(t))==="formdata"||e==="object"&&x(t.toString)&&t.toString()==="[object FormData]"))},Os=I("URLSearchParams"),[Ps,Ts,ws,Es]=["ReadableStream","Request","Response","Headers"].map(I),Ss=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function oe(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),z(t))for(s=0,n=t.length;s<n;s++)e.call(null,t[s],s,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let u;for(s=0;s<o;s++)u=i[s],e.call(null,t[u],u,t)}}function St(t,e){e=e.toLowerCase();const r=Object.keys(t);let s=r.length,n;for(;s-- >0;)if(n=r[s],e===n.toLowerCase())return n;return null}const D=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Nt=t=>!ie(t)&&t!==D;function Le(){const{caseless:t}=Nt(this)&&this||{},e={},r=(s,n)=>{const i=t&&St(e,n)||n;ce(e[i])&&ce(s)?e[i]=Le(e[i],s):ce(s)?e[i]=Le({},s):z(s)?e[i]=s.slice():e[i]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&oe(arguments[s],r);return e}const Ns=(t,e,r,{allOwnKeys:s}={})=>(oe(e,(n,i)=>{r&&x(n)?t[i]=Tt(n,r):t[i]=n},{allOwnKeys:s}),t),vs=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),qs=(t,e,r,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},As=(t,e,r,s)=>{let n,i,o;const u={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!s||s(o,t,e))&&!u[o]&&(e[o]=t[o],u[o]=!0);t=r!==!1&&Ve(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},xs=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const s=t.indexOf(e,r);return s!==-1&&s===r},Ls=t=>{if(!t)return null;if(z(t))return t;let e=t.length;if(!Et(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Cs=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ve(Uint8Array)),Ms=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=s.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},Is=(t,e)=>{let r;const s=[];for(;(r=t.exec(e))!==null;)s.push(r);return s},Fs=I("HTMLFormElement"),ks=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),tt=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Js=I("RegExp"),vt=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),s={};oe(r,(n,i)=>{let o;(o=e(n,i,t))!==!1&&(s[i]=o||n)}),Object.defineProperties(t,s)},_s=t=>{vt(t,(e,r)=>{if(x(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(x(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Bs=(t,e)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return z(t)?s(t):s(String(t).split(e)),r},js=()=>{},Us=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Ds(t){return!!(t&&x(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Xs=t=>{const e=new Array(10),r=(s,n)=>{if(Te(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[n]=s;const i=z(s)?[]:{};return oe(s,(o,u)=>{const a=r(o,n+1);!ie(a)&&(i[u]=a)}),e[n]=void 0,i}}return s};return r(t,0)},Vs=I("AsyncFunction"),$s=t=>t&&(Te(t)||x(t))&&x(t.then)&&x(t.catch),qt=((t,e)=>t?setImmediate:e?((r,s)=>(D.addEventListener("message",({source:n,data:i})=>{n===D&&i===r&&s.length&&s.shift()()},!1),n=>{s.push(n),D.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",x(D.postMessage)),Ws=typeof queueMicrotask<"u"?queueMicrotask.bind(D):typeof process<"u"&&process.nextTick||qt,f={isArray:z,isArrayBuffer:wt,isBuffer:ls,isFormData:bs,isArrayBufferView:fs,isString:ps,isNumber:Et,isBoolean:ds,isObject:Te,isPlainObject:ce,isReadableStream:Ps,isRequest:Ts,isResponse:ws,isHeaders:Es,isUndefined:ie,isDate:hs,isFile:ms,isBlob:gs,isRegExp:Js,isFunction:x,isStream:Rs,isURLSearchParams:Os,isTypedArray:Cs,isFileList:ys,forEach:oe,merge:Le,extend:Ns,trim:Ss,stripBOM:vs,inherits:qs,toFlatObject:As,kindOf:Oe,kindOfTest:I,endsWith:xs,toArray:Ls,forEachEntry:Ms,matchAll:Is,isHTMLForm:Fs,hasOwnProperty:tt,hasOwnProp:tt,reduceDescriptors:vt,freezeMethods:_s,toObjectSet:Bs,toCamelCase:ks,noop:js,toFiniteNumber:Us,findKey:St,global:D,isContextDefined:Nt,isSpecCompliantForm:Ds,toJSONObject:Xs,isAsyncFn:Vs,isThenable:$s,setImmediate:qt,asap:Ws};function R(t,e,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}f.inherits(R,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:f.toJSONObject(this.config),code:this.code,status:this.status}}});const At=R.prototype,xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xt[t]={value:t}});Object.defineProperties(R,xt);Object.defineProperty(At,"isAxiosError",{value:!0});R.from=(t,e,r,s,n,i)=>{const o=Object.create(At);return f.toFlatObject(t,o,function(a){return a!==Error.prototype},u=>u!=="isAxiosError"),R.call(o,t.message,e,r,s,n),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Hs=null;function Ce(t){return f.isPlainObject(t)||f.isArray(t)}function Lt(t){return f.endsWith(t,"[]")?t.slice(0,-2):t}function rt(t,e,r){return t?t.concat(e).map(function(n,i){return n=Lt(n),!r&&i?"["+n+"]":n}).join(r?".":""):e}function Ks(t){return f.isArray(t)&&!t.some(Ce)}const zs=f.toFlatObject(f,{},null,function(e){return/^is[A-Z]/.test(e)});function we(t,e,r){if(!f.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=f.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,h){return!f.isUndefined(h[g])});const s=r.metaTokens,n=r.visitor||l,i=r.dots,o=r.indexes,a=(r.Blob||typeof Blob<"u"&&Blob)&&f.isSpecCompliantForm(e);if(!f.isFunction(n))throw new TypeError("visitor must be a function");function c(d){if(d===null)return"";if(f.isDate(d))return d.toISOString();if(!a&&f.isBlob(d))throw new R("Blob is not supported. Use a Buffer instead.");return f.isArrayBuffer(d)||f.isTypedArray(d)?a&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function l(d,g,h){let b=d;if(d&&!h&&typeof d=="object"){if(f.endsWith(g,"{}"))g=s?g:g.slice(0,-2),d=JSON.stringify(d);else if(f.isArray(d)&&Ks(d)||(f.isFileList(d)||f.endsWith(g,"[]"))&&(b=f.toArray(d)))return g=Lt(g),b.forEach(function(P,q){!(f.isUndefined(P)||P===null)&&e.append(o===!0?rt([g],q,i):o===null?g:g+"[]",c(P))}),!1}return Ce(d)?!0:(e.append(rt(h,g,i),c(d)),!1)}const p=[],m=Object.assign(zs,{defaultVisitor:l,convertValue:c,isVisitable:Ce});function y(d,g){if(!f.isUndefined(d)){if(p.indexOf(d)!==-1)throw Error("Circular reference detected in "+g.join("."));p.push(d),f.forEach(d,function(b,T){(!(f.isUndefined(b)||b===null)&&n.call(e,b,f.isString(T)?T.trim():T,g,m))===!0&&y(b,g?g.concat(T):[T])}),p.pop()}}if(!f.isObject(t))throw new TypeError("data must be an object");return y(t),e}function st(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function $e(t,e){this._pairs=[],t&&we(t,this,e)}const Ct=$e.prototype;Ct.append=function(e,r){this._pairs.push([e,r])};Ct.toString=function(e){const r=e?function(s){return e.call(this,s,st)}:st;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Gs(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mt(t,e,r){if(!e)return t;const s=r&&r.encode||Gs;f.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(e,r):i=f.isURLSearchParams(e)?e.toString():new $e(e,r).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class nt{constructor(){this.handlers=[]}use(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){f.forEach(this.handlers,function(s){s!==null&&e(s)})}}const It={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zs=typeof URLSearchParams<"u"?URLSearchParams:$e,Ys=typeof FormData<"u"?FormData:null,Qs=typeof Blob<"u"?Blob:null,en={isBrowser:!0,classes:{URLSearchParams:Zs,FormData:Ys,Blob:Qs},protocols:["http","https","file","blob","url","data"]},We=typeof window<"u"&&typeof document<"u",Me=typeof navigator=="object"&&navigator||void 0,tn=We&&(!Me||["ReactNative","NativeScript","NS"].indexOf(Me.product)<0),rn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sn=We&&window.location.href||"http://localhost",nn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:We,hasStandardBrowserEnv:tn,hasStandardBrowserWebWorkerEnv:rn,navigator:Me,origin:sn},Symbol.toStringTag,{value:"Module"})),N={...nn,...en};function on(t,e){return we(t,new N.classes.URLSearchParams,Object.assign({visitor:function(r,s,n,i){return N.isNode&&f.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function an(t){return f.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function un(t){const e={},r=Object.keys(t);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],e[i]=t[i];return e}function Ft(t){function e(r,s,n,i){let o=r[i++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),a=i>=r.length;return o=!o&&f.isArray(n)?n.length:o,a?(f.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!u):((!n[o]||!f.isObject(n[o]))&&(n[o]=[]),e(r,s,n[o],i)&&f.isArray(n[o])&&(n[o]=un(n[o])),!u)}if(f.isFormData(t)&&f.isFunction(t.entries)){const r={};return f.forEachEntry(t,(s,n)=>{e(an(s),n,r,0)}),r}return null}function cn(t,e,r){if(f.isString(t))try{return(e||JSON.parse)(t),f.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const ae={transitional:It,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=f.isObject(e);if(i&&f.isHTMLForm(e)&&(e=new FormData(e)),f.isFormData(e))return n?JSON.stringify(Ft(e)):e;if(f.isArrayBuffer(e)||f.isBuffer(e)||f.isStream(e)||f.isFile(e)||f.isBlob(e)||f.isReadableStream(e))return e;if(f.isArrayBufferView(e))return e.buffer;if(f.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return on(e,this.formSerializer).toString();if((u=f.isFileList(e))||s.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return we(u?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),cn(e)):e}],transformResponse:[function(e){const r=this.transitional||ae.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(f.isResponse(e)||f.isReadableStream(e))return e;if(e&&f.isString(e)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(u){if(o)throw u.name==="SyntaxError"?R.from(u,R.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:N.classes.FormData,Blob:N.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};f.forEach(["delete","get","head","post","put","patch"],t=>{ae.headers[t]={}});const ln=f.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fn=t=>{const e={};let r,s,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||e[r]&&ln[r])&&(r==="set-cookie"?e[r]?e[r].push(s):e[r]=[s]:e[r]=e[r]?e[r]+", "+s:s)}),e},it=Symbol("internals");function ee(t){return t&&String(t).trim().toLowerCase()}function le(t){return t===!1||t==null?t:f.isArray(t)?t.map(le):String(t)}function pn(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)e[s[1]]=s[2];return e}const dn=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ne(t,e,r,s,n){if(f.isFunction(s))return s.call(this,e,r);if(n&&(e=r),!!f.isString(e)){if(f.isString(s))return e.indexOf(s)!==-1;if(f.isRegExp(s))return s.test(e)}}function hn(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,s)=>r.toUpperCase()+s)}function mn(t,e){const r=f.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(n,i,o){return this[s].call(this,e,n,i,o)},configurable:!0})})}let A=class{constructor(e){e&&this.set(e)}set(e,r,s){const n=this;function i(u,a,c){const l=ee(a);if(!l)throw new Error("header name must be a non-empty string");const p=f.findKey(n,l);(!p||n[p]===void 0||c===!0||c===void 0&&n[p]!==!1)&&(n[p||a]=le(u))}const o=(u,a)=>f.forEach(u,(c,l)=>i(c,l,a));if(f.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(f.isString(e)&&(e=e.trim())&&!dn(e))o(fn(e),r);else if(f.isHeaders(e))for(const[u,a]of e.entries())i(a,u,s);else e!=null&&i(r,e,s);return this}get(e,r){if(e=ee(e),e){const s=f.findKey(this,e);if(s){const n=this[s];if(!r)return n;if(r===!0)return pn(n);if(f.isFunction(r))return r.call(this,n,s);if(f.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ee(e),e){const s=f.findKey(this,e);return!!(s&&this[s]!==void 0&&(!r||Ne(this,this[s],s,r)))}return!1}delete(e,r){const s=this;let n=!1;function i(o){if(o=ee(o),o){const u=f.findKey(s,o);u&&(!r||Ne(s,s[u],u,r))&&(delete s[u],n=!0)}}return f.isArray(e)?e.forEach(i):i(e),n}clear(e){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const i=r[s];(!e||Ne(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const r=this,s={};return f.forEach(this,(n,i)=>{const o=f.findKey(s,i);if(o){r[o]=le(n),delete r[i];return}const u=e?hn(i):String(i).trim();u!==i&&delete r[i],r[u]=le(n),s[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return f.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=e&&f.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const s=new this(e);return r.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[it]=this[it]={accessors:{}}).accessors,n=this.prototype;function i(o){const u=ee(o);s[u]||(mn(n,o),s[u]=!0)}return f.isArray(e)?e.forEach(i):i(e),this}};A.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);f.reduceDescriptors(A.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[r]=s}}});f.freezeMethods(A);function ve(t,e){const r=this||ae,s=e||r,n=A.from(s.headers);let i=s.data;return f.forEach(t,function(u){i=u.call(r,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function kt(t){return!!(t&&t.__CANCEL__)}function G(t,e,r){R.call(this,t??"canceled",R.ERR_CANCELED,e,r),this.name="CanceledError"}f.inherits(G,R,{__CANCEL__:!0});function Jt(t,e,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):e(new R("Request failed with status code "+r.status,[R.ERR_BAD_REQUEST,R.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function gn(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function yn(t,e){t=t||10;const r=new Array(t),s=new Array(t);let n=0,i=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),l=s[i];o||(o=c),r[n]=a,s[n]=c;let p=i,m=0;for(;p!==n;)m+=r[p++],p=p%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),c-o<e)return;const y=l&&c-l;return y?Math.round(m*1e3/y):void 0}}function Rn(t,e){let r=0,s=1e3/e,n,i;const o=(c,l=Date.now())=>{r=l,n=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const l=Date.now(),p=l-r;p>=s?o(c,l):(n=c,i||(i=setTimeout(()=>{i=null,o(n)},s-p)))},()=>n&&o(n)]}const ge=(t,e,r=3)=>{let s=0;const n=yn(50,250);return Rn(i=>{const o=i.loaded,u=i.lengthComputable?i.total:void 0,a=o-s,c=n(a),l=o<=u;s=o;const p={loaded:o,total:u,progress:u?o/u:void 0,bytes:a,rate:c||void 0,estimated:c&&u&&l?(u-o)/c:void 0,event:i,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(p)},r)},ot=(t,e)=>{const r=t!=null;return[s=>e[0]({lengthComputable:r,total:t,loaded:s}),e[1]]},at=t=>(...e)=>f.asap(()=>t(...e)),bn=N.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,N.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(N.origin),N.navigator&&/(msie|trident)/i.test(N.navigator.userAgent)):()=>!0,On=N.hasStandardBrowserEnv?{write(t,e,r,s,n,i){const o=[t+"="+encodeURIComponent(e)];f.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),f.isString(s)&&o.push("path="+s),f.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Pn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Tn(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function _t(t,e,r){let s=!Pn(e);return t&&s||r==!1?Tn(t,e):e}const ut=t=>t instanceof A?{...t}:t;function V(t,e){e=e||{};const r={};function s(c,l,p,m){return f.isPlainObject(c)&&f.isPlainObject(l)?f.merge.call({caseless:m},c,l):f.isPlainObject(l)?f.merge({},l):f.isArray(l)?l.slice():l}function n(c,l,p,m){if(f.isUndefined(l)){if(!f.isUndefined(c))return s(void 0,c,p,m)}else return s(c,l,p,m)}function i(c,l){if(!f.isUndefined(l))return s(void 0,l)}function o(c,l){if(f.isUndefined(l)){if(!f.isUndefined(c))return s(void 0,c)}else return s(void 0,l)}function u(c,l,p){if(p in e)return s(c,l);if(p in t)return s(void 0,c)}const a={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(c,l,p)=>n(ut(c),ut(l),p,!0)};return f.forEach(Object.keys(Object.assign({},t,e)),function(l){const p=a[l]||n,m=p(t[l],e[l],l);f.isUndefined(m)&&p!==u||(r[l]=m)}),r}const Bt=t=>{const e=V({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:u}=e;e.headers=o=A.from(o),e.url=Mt(_t(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let a;if(f.isFormData(r)){if(N.hasStandardBrowserEnv||N.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((a=o.getContentType())!==!1){const[c,...l]=a?a.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...l].join("; "))}}if(N.hasStandardBrowserEnv&&(s&&f.isFunction(s)&&(s=s(e)),s||s!==!1&&bn(e.url))){const c=n&&i&&On.read(i);c&&o.set(n,c)}return e},wn=typeof XMLHttpRequest<"u",En=wn&&function(t){return new Promise(function(r,s){const n=Bt(t);let i=n.data;const o=A.from(n.headers).normalize();let{responseType:u,onUploadProgress:a,onDownloadProgress:c}=n,l,p,m,y,d;function g(){y&&y(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let h=new XMLHttpRequest;h.open(n.method.toUpperCase(),n.url,!0),h.timeout=n.timeout;function b(){if(!h)return;const P=A.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),S={data:!u||u==="text"||u==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:P,config:t,request:h};Jt(function(j){r(j),g()},function(j){s(j),g()},S),h=null}"onloadend"in h?h.onloadend=b:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(b)},h.onabort=function(){h&&(s(new R("Request aborted",R.ECONNABORTED,t,h)),h=null)},h.onerror=function(){s(new R("Network Error",R.ERR_NETWORK,t,h)),h=null},h.ontimeout=function(){let q=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const S=n.transitional||It;n.timeoutErrorMessage&&(q=n.timeoutErrorMessage),s(new R(q,S.clarifyTimeoutError?R.ETIMEDOUT:R.ECONNABORTED,t,h)),h=null},i===void 0&&o.setContentType(null),"setRequestHeader"in h&&f.forEach(o.toJSON(),function(q,S){h.setRequestHeader(S,q)}),f.isUndefined(n.withCredentials)||(h.withCredentials=!!n.withCredentials),u&&u!=="json"&&(h.responseType=n.responseType),c&&([m,d]=ge(c,!0),h.addEventListener("progress",m)),a&&h.upload&&([p,y]=ge(a),h.upload.addEventListener("progress",p),h.upload.addEventListener("loadend",y)),(n.cancelToken||n.signal)&&(l=P=>{h&&(s(!P||P.type?new G(null,t,h):P),h.abort(),h=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const T=gn(n.url);if(T&&N.protocols.indexOf(T)===-1){s(new R("Unsupported protocol "+T+":",R.ERR_BAD_REQUEST,t));return}h.send(i||null)})},Sn=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let s=new AbortController,n;const i=function(c){if(!n){n=!0,u();const l=c instanceof Error?c:this.reason;s.abort(l instanceof R?l:new G(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,i(new R(`timeout ${e} of ms exceeded`,R.ETIMEDOUT))},e);const u=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:a}=s;return a.unsubscribe=()=>f.asap(u),a}},Nn=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let s=0,n;for(;s<r;)n=s+e,yield t.slice(s,n),s=n},vn=async function*(t,e){for await(const r of qn(t))yield*Nn(r,e)},qn=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)break;yield s}}finally{await e.cancel()}},ct=(t,e,r,s)=>{const n=vn(t,e);let i=0,o,u=a=>{o||(o=!0,s&&s(a))};return new ReadableStream({async pull(a){try{const{done:c,value:l}=await n.next();if(c){u(),a.close();return}let p=l.byteLength;if(r){let m=i+=p;r(m)}a.enqueue(new Uint8Array(l))}catch(c){throw u(c),c}},cancel(a){return u(a),n.return()}},{highWaterMark:2})},Ee=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jt=Ee&&typeof ReadableStream=="function",An=Ee&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Ut=(t,...e)=>{try{return!!t(...e)}catch{return!1}},xn=jt&&Ut(()=>{let t=!1;const e=new Request(N.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),lt=64*1024,Ie=jt&&Ut(()=>f.isReadableStream(new Response("").body)),ye={stream:Ie&&(t=>t.body)};Ee&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ye[e]&&(ye[e]=f.isFunction(t[e])?r=>r[e]():(r,s)=>{throw new R(`Response type '${e}' is not supported`,R.ERR_NOT_SUPPORT,s)})})})(new Response);const Ln=async t=>{if(t==null)return 0;if(f.isBlob(t))return t.size;if(f.isSpecCompliantForm(t))return(await new Request(N.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(f.isArrayBufferView(t)||f.isArrayBuffer(t))return t.byteLength;if(f.isURLSearchParams(t)&&(t=t+""),f.isString(t))return(await An(t)).byteLength},Cn=async(t,e)=>{const r=f.toFiniteNumber(t.getContentLength());return r??Ln(e)},Mn=Ee&&(async t=>{let{url:e,method:r,data:s,signal:n,cancelToken:i,timeout:o,onDownloadProgress:u,onUploadProgress:a,responseType:c,headers:l,withCredentials:p="same-origin",fetchOptions:m}=Bt(t);c=c?(c+"").toLowerCase():"text";let y=Sn([n,i&&i.toAbortSignal()],o),d;const g=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let h;try{if(a&&xn&&r!=="get"&&r!=="head"&&(h=await Cn(l,s))!==0){let S=new Request(e,{method:"POST",body:s,duplex:"half"}),_;if(f.isFormData(s)&&(_=S.headers.get("content-type"))&&l.setContentType(_),S.body){const[j,ue]=ot(h,ge(at(a)));s=ct(S.body,lt,j,ue)}}f.isString(p)||(p=p?"include":"omit");const b="credentials"in Request.prototype;d=new Request(e,{...m,signal:y,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:s,duplex:"half",credentials:b?p:void 0});let T=await fetch(d);const P=Ie&&(c==="stream"||c==="response");if(Ie&&(u||P&&g)){const S={};["status","statusText","headers"].forEach(ze=>{S[ze]=T[ze]});const _=f.toFiniteNumber(T.headers.get("content-length")),[j,ue]=u&&ot(_,ge(at(u),!0))||[];T=new Response(ct(T.body,lt,j,()=>{ue&&ue(),g&&g()}),S)}c=c||"text";let q=await ye[f.findKey(ye,c)||"text"](T,t);return!P&&g&&g(),await new Promise((S,_)=>{Jt(S,_,{data:q,headers:A.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:d})})}catch(b){throw g&&g(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new R("Network Error",R.ERR_NETWORK,t,d),{cause:b.cause||b}):R.from(b,b&&b.code,t,d)}}),Fe={http:Hs,xhr:En,fetch:Mn};f.forEach(Fe,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ft=t=>`- ${t}`,In=t=>f.isFunction(t)||t===null||t===!1,Dt={getAdapter:t=>{t=f.isArray(t)?t:[t];const{length:e}=t;let r,s;const n={};for(let i=0;i<e;i++){r=t[i];let o;if(s=r,!In(r)&&(s=Fe[(o=String(r)).toLowerCase()],s===void 0))throw new R(`Unknown adapter '${o}'`);if(s)break;n[o||"#"+i]=s}if(!s){const i=Object.entries(n).map(([u,a])=>`adapter ${u} `+(a===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(ft).join(`
`):" "+ft(i[0]):"as no adapter specified";throw new R("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Fe};function qe(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new G(null,t)}function pt(t){return qe(t),t.headers=A.from(t.headers),t.data=ve.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Dt.getAdapter(t.adapter||ae.adapter)(t).then(function(s){return qe(t),s.data=ve.call(t,t.transformResponse,s),s.headers=A.from(s.headers),s},function(s){return kt(s)||(qe(t),s&&s.response&&(s.response.data=ve.call(t,t.transformResponse,s.response),s.response.headers=A.from(s.response.headers))),Promise.reject(s)})}const Xt="1.8.3",Se={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Se[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const dt={};Se.transitional=function(e,r,s){function n(i,o){return"[Axios v"+Xt+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,u)=>{if(e===!1)throw new R(n(o," has been removed"+(r?" in "+r:"")),R.ERR_DEPRECATED);return r&&!dt[o]&&(dt[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,u):!0}};Se.spelling=function(e){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Fn(t,e,r){if(typeof t!="object")throw new R("options must be an object",R.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const i=s[n],o=e[i];if(o){const u=t[i],a=u===void 0||o(u,i,t);if(a!==!0)throw new R("option "+i+" must be "+a,R.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new R("Unknown option "+i,R.ERR_BAD_OPTION)}}const fe={assertOptions:Fn,validators:Se},F=fe.validators;let X=class{constructor(e){this.defaults=e,this.interceptors={request:new nt,response:new nt}}async request(e,r){try{return await this._request(e,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=V(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&fe.assertOptions(s,{silentJSONParsing:F.transitional(F.boolean),forcedJSONParsing:F.transitional(F.boolean),clarifyTimeoutError:F.transitional(F.boolean)},!1),n!=null&&(f.isFunction(n)?r.paramsSerializer={serialize:n}:fe.assertOptions(n,{encode:F.function,serialize:F.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),fe.assertOptions(r,{baseUrl:F.spelling("baseURL"),withXsrfToken:F.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&f.merge(i.common,i[r.method]);i&&f.forEach(["delete","get","head","post","put","patch","common"],d=>{delete i[d]}),r.headers=A.concat(o,i);const u=[];let a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,u.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let l,p=0,m;if(!a){const d=[pt.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,c),m=d.length,l=Promise.resolve(r);p<m;)l=l.then(d[p++],d[p++]);return l}m=u.length;let y=r;for(p=0;p<m;){const d=u[p++],g=u[p++];try{y=d(y)}catch(h){g.call(this,h);break}}try{l=pt.call(this,y)}catch(d){return Promise.reject(d)}for(p=0,m=c.length;p<m;)l=l.then(c[p++],c[p++]);return l}getUri(e){e=V(this.defaults,e);const r=_t(e.baseURL,e.url,e.allowAbsoluteUrls);return Mt(r,e.params,e.paramsSerializer)}};f.forEach(["delete","get","head","options"],function(e){X.prototype[e]=function(r,s){return this.request(V(s||{},{method:e,url:r,data:(s||{}).data}))}});f.forEach(["post","put","patch"],function(e){function r(s){return function(i,o,u){return this.request(V(u||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}X.prototype[e]=r(),X.prototype[e+"Form"]=r(!0)});let kn=class Vt{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(u=>{s.subscribe(u),i=u}).then(n);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,u){s.reason||(s.reason=new G(i,o,u),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=s=>{e.abort(s)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Vt(function(n){e=n}),cancel:e}}};function Jn(t){return function(r){return t.apply(null,r)}}function _n(t){return f.isObject(t)&&t.isAxiosError===!0}const ke={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ke).forEach(([t,e])=>{ke[e]=t});function $t(t){const e=new X(t),r=Tt(X.prototype.request,e);return f.extend(r,X.prototype,e,{allOwnKeys:!0}),f.extend(r,e,null,{allOwnKeys:!0}),r.create=function(n){return $t(V(t,n))},r}const E=$t(ae);E.Axios=X;E.CanceledError=G;E.CancelToken=kn;E.isCancel=kt;E.VERSION=Xt;E.toFormData=we;E.AxiosError=R;E.Cancel=E.CanceledError;E.all=function(e){return Promise.all(e)};E.spread=Jn;E.isAxiosError=_n;E.mergeConfig=V;E.AxiosHeaders=A;E.formToJSON=t=>Ft(f.isHTMLForm(t)?new FormData(t):t);E.getAdapter=Dt.getAdapter;E.HttpStatusCode=ke;E.default=E;const{Axios:ii,AxiosError:oi,CanceledError:ai,isCancel:ui,CancelToken:ci,VERSION:li,all:fi,Cancel:pi,isAxiosError:di,spread:hi,toFormData:mi,AxiosHeaders:Bn,HttpStatusCode:gi,formToJSON:yi,getAdapter:Ri,mergeConfig:bi}=E;var Oi="0.21.4",He={ojp:"http://www.vdv.de/ojp",siri:"http://www.siri.org.uk/siri"},L={ojpVersion:"2.0",defaultNS:"ojp",mapNS:He},k={ojpVersion:"1.0",defaultNS:"siri",mapNS:He},Pi={ojpVersion:"1.0",defaultNS:"ojp",mapNS:He};function Je(t,e=[],r){if(t!==null&&typeof t=="object"&&!Array.isArray(t))for(const s in t)s.includes("@_")&&delete t[s];return Object.entries(t).reduce((s,[n,i])=>{const o=r(n,i,e),u=e.concat([o]);return s[o]=(()=>{if(i instanceof Object)if(Array.isArray(i))i.forEach((a,c)=>{a instanceof Object&&(i[c]=Je(a,u,r))});else return Je(i,u,r);return i})(),s},{})}function J(t,e=L,r=null){return['<?xml version="1.0" encoding="utf-8"?>',Wt(t,"OJP",e,(u=>{const a=Object.keys(u);if(typeof u=="object"&&a.length===1){const c=a[0].split(":");if(c.length===2){const l=a[0],p=c[1];u[p]=u[l],delete u[l]}}r&&r(u)}))].join(`
`)}function Wt(t,e="OJP",r=L,s=null){const n=JSON.parse(JSON.stringify(t)),i=Je(n,[e],(l,p,m)=>{let y=l.charAt(0).toUpperCase()+l.slice(1);const d=m.at(-1)??null;if(d!==null){const g=d.replace(/^.*:/,"")+"."+y,h=(()=>{const b=K.MapNS_Tags[g]??"ojp";return r.defaultNS===b?"":b+":"})();h!==null&&(y=h+y)}return y});s&&s(i);const o=[];if(e==="OJP"){const l=[];for(const m in r.mapNS){const y=r.mapNS[m],g=(m===r.defaultNS?"xmlns":"xmlns:"+m)+'="'+y+'"';l.push(g)}const p='version="'+r.ojpVersion+'"';l.push(p),o.push("<OJP "+l.join(" ")+">")}else o.push("<"+e+">");const a=new B({format:!0,ignoreAttributes:!1,suppressEmptyNode:!0});return o.push(a.build(i)),o.push("</"+e+">"),o.join(`
`)}var jn=class{xmlConfig;constructor(t=L){this.xmlConfig=t}serialize(t,e){return Wt(t,e,this.xmlConfig)}static transformTagName(t){if(t.startsWith("OJP")||t.toUpperCase()===t)return t;let e=t.replace(/[-_](.)/g,(r,s)=>s.toUpperCase());return e=e.replace(/^([A-Z])/,r=>r.toLowerCase()),e}},Ht=Object.assign({},K.MapArrayTags),Ke=Object.assign({},K.MapArrayTags);for(const t in K.MapLegacyArrayTags)Ke[t]=K.MapLegacyArrayTags[t];function Kt(t){const e={};for(const r in t){const s=r.split(".");if(s.length!==2){console.error("invalid OpenAPI_Dependencies.MapArrayTags key: "+r);continue}const n=s[0],i=s[1];n in e||(e[n]=[]),e[n].push(i)}return e}var Un=Kt(Ht),Dn=Kt(Ke);function Xn(t,e){const r="#text",n=e==="2.0"?Un:Dn;function i(a){return typeof a!="object"||Array.isArray(a)?!1:r in a}function o(a,c){return c.length<2?a:c.slice(-2).join(".")in K.MapStringValues&&typeof a!="string"?String(a):a}function u(a,c){const l=c.at(-1);if(Array.isArray(a)){for(let p=0;p<a.length;p++)u(a[p],c);return}if(a&&typeof a=="object"){const p=a,m=Object.keys(p);for(const y of m){let d=p[y];const g=[...c,y];if(i(d)){const h=d;p[y]=h[r];for(const b of Object.keys(h)){if(b===r)continue;const T=`${y}.${b}`;p[T]=h[b]}continue}if(Array.isArray(d)&&d.length>0&&d.every(i)){const h=d,b=g;p[y]=h.map(P=>o(P[r],b));const T=new Set;for(const P of h)for(const q of Object.keys(P))q!==r&&T.add(q);for(const P of T){const q=`${y}.${P}`;p[q]=h.map(S=>S[P])}continue}d=o(d,g),p[y]=d,u(d,g)}l!==void 0&&(n[l]??[]).forEach(d=>{d in p||(p[d]=[])})}}u(t,[])}var Vn=t=>jn.transformTagName(t),$n=(t,e,r)=>{const n=r==="2.0"?Ht:Ke,i=e.split(".");return i.length>=2&&i.slice(-2).join(".")in n};function C(t,e){const s=new es({ignoreAttributes:!1,removeNSPrefix:!0,transformTagName:Vn,isArray:(n,i)=>$n(n,i,e)}).parse(t);return Xn(s,e),s}var pe=class{longitude;latitude;properties;constructor(t,e=null){const r=[1/0,1/0],s=(()=>{if(typeof t=="number"&&isNaN(t))return r;if(typeof t=="number"&&e!==null)return[t,e];if(typeof t=="string"){const n=t.split(",");if(n.length<2)return r;const i=parseFloat(n[1]),o=parseFloat(n[0]);return[i,o]}if(Array.isArray(t)&&t.length>1)return t;if(typeof t=="object"){const n=t;if(n.hasOwnProperty("longitude")&&n.hasOwnProperty("latitude")){const i=t.longitude,o=t.latitude;return[Number(i),Number(o)]}}return r})();this.longitude=parseFloat(s[0].toFixed(6)),this.latitude=parseFloat(s[1].toFixed(6)),this.properties={}}isValid(){return this.longitude!==1/0&&this.latitude!==1/0}distanceFrom(t){const r=(t.latitude-this.latitude)*Math.PI/180,s=(t.longitude-this.longitude)*Math.PI/180,n=Math.sin(r/2)*Math.sin(r/2)+Math.cos(this.latitude*Math.PI/180)*Math.cos(t.latitude*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2),o=6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)));return Math.round(o*1e3)}asLatLngString(t=!0){let e="";return t?e=this.latitude.toFixed(6)+","+this.longitude.toFixed(6):e=this.latitude+","+this.longitude,e}asLngLat(){return[this.longitude,this.latitude]}asGeoPositionSchema(){return{longitude:this.longitude,latitude:this.latitude}}},M=class _e{stopPointRef;stopPlaceRef;geoPosition;name;constructor(e){this.stopPointRef=void 0,this.stopPlaceRef=void 0,this.geoPosition=void 0,this.name=e}static initWithPlaceRefsOrCoords(e,r=null){const s=new pe(e);if(s.isValid()){const n=r??s.asLatLngString(),i=new _e({text:n});return i.geoPosition=s,i}else{const n={text:r??"n/a"},i=new _e(n);return i.stopPlaceRef=e,i}}asOJPv1Schema(){return{stopPointRef:this.stopPointRef,stopPlaceRef:this.stopPlaceRef,geoPosition:this.geoPosition,locationName:this.name}}},Ti=class zt{id;duration;startTime;endTime;transfers;leg;cancelled;delayed;deviation;infeasible;unplanned;constructor(e,r,s,n,i,o,u,a,c,l,p){this.id=e,this.duration=r,this.startTime=s,this.endTime=n,this.transfers=i,this.leg=o,this.cancelled=u,this.delayed=a,this.deviation=c,this.infeasible=l,this.unplanned=p}static initWithTripXML(e){const r=C(e,"2.0");return new zt(r.trip.id,r.trip.duration,r.trip.startTime,r.trip.endTime,r.trip.transfers,r.trip.leg,r.trip.cancelled,r.trip.delayed,r.trip.deviation,r.trip.infeasible,r.trip.unplanned)}},ht=class de{stopPoint;stopPlace;topographicPlace;pointOfInterest;address;name;geoPosition;mode;attribute;placeType;constructor(e,r,s,n,i,o,u,a,c){this.stopPoint=e,this.stopPlace=r,this.topographicPlace=s,this.pointOfInterest=n,this.address=i,this.name=o,this.geoPosition=u,this.mode=a,this.attribute=c,this.placeType=u.isValid()?"location":null,(e||r)&&(this.placeType="stop"),s&&(this.placeType="topographicPlace"),n&&(this.placeType="poi"),i&&(this.placeType="address")}static initWithXMLSchema(e){const r=new pe(e.geoPosition);return new de(e.stopPoint,e.stopPlace,e.topographicPlace,e.pointOfInterest,e.address,e.name,r,e.mode,e.attribute)}static initWithCoords(e,r=null){const s=new pe(e,r),n={text:s.latitude+","+s.longitude};return new de(void 0,void 0,void 0,void 0,void 0,n,s,[],[])}static Empty(){const e={text:"n/a Empty"},r=new pe("0,0");return new de(void 0,void 0,void 0,void 0,void 0,e,r,[],[])}findClosestPlace(e){const r=this.geoPosition;let s=null;return e.forEach(n=>{const i=n.geoPosition;if(i===null)return;const o=r.distanceFrom(i);(s===null||o<s.distance)&&(s={object:n,distance:o})}),s}asStopPlaceRefOrCoords(){const e=this.stopPlace?.stopPlaceRef??null;return e!==null?e:this.geoPosition.asLatLngString()}},wi=class Be{place;complete;probability;constructor(e,r,s){this.place=e,this.complete=r,this.probability=s}static initWithXMLSchema(e){const r=ht.initWithXMLSchema(e.place);return new Be(r,e.complete,e.probability)}static initWithXML(e){const r=C(e,"2.0"),s=r.placeResult.place,n=ht.initWithXMLSchema(s);return new Be(n,r.placeResult.complete,r.placeResult.probability)}},Ei=class Gt{id;stopEvent;constructor(e,r){this.id=e,this.stopEvent=r}static initWithXML(e){const r=C(e,"2.0");return new Gt(r.stopEventResult.id,r.stopEventResult.stopEvent)}},O=class Zt{static computeRequestTimestamp(){return new Date().toISOString()}static async computeResponse(e,r,s){const n=e.mockRequestXML?e.mockRequestXML:e.buildRequestXML(r.language,r.requestorRef,s);e.requestInfo.requestDateTime=new Date,e.requestInfo.requestXML=n;const i=await(async()=>e.mockResponseXML?e.mockResponseXML:await Zt.fetchResponseXML(n,r.httpConfig))();return e.requestInfo.responseDateTime=new Date,e.requestInfo.responseXML=i,i}static async fetchResponseXML(e,r){const s=new Bn;s.set("Accept","application/xml"),s.set("Content-Type","application/xml"),r.authToken!==null&&s.set("Authorization","Bearer "+r.authToken);const n={method:"POST",url:r.url,headers:s};return n.method==="POST"&&(n.data=e),(await E.request(n)).data}},Z=class{requestInfo;mockRequestXML;mockResponseXML;constructor(){this.requestInfo={requestDateTime:null,requestXML:null,responseDateTime:null,responseXML:null,parseDateTime:null},this.mockRequestXML=null,this.mockResponseXML=null}static initWithRequestMock(t){const e=this.Default();return e.mockRequestXML=t,e}static initWithResponseMock(t){const e=this.Default();return e.mockResponseXML=t,e}async fetchResponse(t){return await this._fetchResponse(t)}},Re=class extends Z{static DefaultRestrictionParams(){return{type:[],numberOfResults:void 0,modes:void 0,includePtModes:!0}}updateRestrictions(t,e,r){e.length>0&&(t.type=e),r!==null&&(t.numberOfResults=r)}static computeGeoRestriction(t){const e=Array.isArray(t)?t:t.split(",").map(u=>Number(u));if(e.length!==4)return null;const r=e[0],s=e[1],n=e[2],i=e[3];return{rectangle:{upperLeft:{longitude:r,latitude:i},lowerRight:{longitude:n,latitude:s}}}}},Wn=class te extends Re{payload;constructor(e){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),initialInput:void 0,placeRef:void 0,restrictions:e}}static Default(){const e=Re.DefaultRestrictionParams();return new te(e)}static initWithLocationName(e,r=[],s=10){const n=te.Default();return n.payload.initialInput={name:e},n.payload.restrictions&&n.updateRestrictions(n.payload.restrictions,r,s),n}static initWithPlaceRef(e,r=10){const s=te.Default();return s.payload.placeRef=M.initWithPlaceRefsOrCoords(e),s.payload.restrictions&&s.updateRestrictions(s.payload.restrictions,["stop"],r),s}static initWithBBOX(e,r=[],s=10){const n=te.Default(),i=this.computeGeoRestriction(e);return i&&(n.payload.initialInput={name:void 0,geoRestriction:i}),n.payload.restrictions&&n.updateRestrictions(n.payload.restrictions,r,s),n}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPLocationInformationRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPLocationInformationDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},H=class extends Z{static DefaultRequestParams(t="2.0"){const e={includeAllRestrictedLines:void 0,numberOfResults:10,stopEventType:"departure",includePreviousCalls:!0,includeOnwardCalls:!0,useRealtimeData:"explanatory"};return t==="2.0"&&(e.includeAllRestrictedLines=!0),e}},Hn=class je extends H{payload;constructor(e,r=void 0){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),location:e,params:r}}static Default(){const r={placeRef:{stopPointRef:"8507000",name:{text:"n/a"}},depArrTime:new Date().toISOString()},s=H.DefaultRequestParams();return new je(r,s)}static initWithPlaceRefAndDate(e,r=new Date){const s={placeRef:{stopPointRef:e,name:{text:"n/a"}},depArrTime:r.toISOString()},n=H.DefaultRequestParams();return new je(s,n)}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPStopEventRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPStopEventDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},Yt=class Qt{static formatDate(e){return[e.getFullYear(),"-",("00"+(e.getMonth()+1)).slice(-2),"-",("00"+e.getDate()).slice(-2)," ",("00"+e.getHours()).slice(-2),":",("00"+e.getMinutes()).slice(-2),":",("00"+e.getSeconds()).slice(-2)].join("")}static formatTimeHHMM(e=new Date){return Qt.formatDate(e).substring(11,16)}static computeDelayMinutes(e,r){if(r===null)return null;const s=typeof e=="string"?new Date(e):e,i=((typeof r=="string"?new Date(r):r).getTime()-s.getTime())/1e3;return Math.floor(i/60)}},be=class extends Z{static DefaultRequestParams(){return{includeCalls:!0,includeService:!0,includeTrackProjection:!1,includePlacesContext:!0,includeSituationsContext:!0}}},Kn=class he extends be{payload;constructor(e,r,s){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),journeyRef:e,operatingDayRef:r,params:s}}static Default(){return new he("n/a","n/a",be.DefaultRequestParams())}static initWithJourneyRef(e,r=new Date){const s=Yt.formatDate(r).substring(0,10),n=he.DefaultRequestParams();return new he(e,s,n)}enableTrackProjection(){this.payload.params&&(this.payload.params.includeTrackProjection=!0)}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPTripInfoRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPTripInfoDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},zn=class re extends Z{payload;constructor(e,r){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),refineParams:r,tripResult:e}}static DefaultRequestParams(){return{includeLegProjection:!0,includeTurnDescription:!0,includeIntermediateStops:!0}}static Default(){const e={},r=re.DefaultRequestParams();return new re(e,r)}static initWithTrip(e){const r={id:e.id,trip:e},s=re.DefaultRequestParams();return new re(r,s)}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPTripRefineRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPTripRefineDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},er=class extends Z{},Gn=class $ extends er{payload;constructor(e,r,s=[],n=null){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),origin:e,destination:r,via:s,params:n??={}}}static DefaultRequestParams(){return{modeAndModeOfOperationFilter:[],numberOfResults:5,numberOfResultsBefore:void 0,numberOfResultsAfter:void 0,useRealtimeData:"explanatory",includeAllRestrictedLines:!0,includeTrackSections:!0,includeLegProjection:!1,includeIntermediateStops:!0}}static Default(){const e=new Date,r={placeRef:M.initWithPlaceRefsOrCoords("8503000","Zürich"),depArrTime:e.toISOString(),individualTransportOption:[]},s={placeRef:M.initWithPlaceRefsOrCoords("8507000","Bern"),individualTransportOption:[]},n=$.DefaultRequestParams();return new $(r,s,[],n)}static initWithPlaceRefsOrCoords(e,r){const s={placeRef:M.initWithPlaceRefsOrCoords(e),individualTransportOption:[]},n={placeRef:M.initWithPlaceRefsOrCoords(r),individualTransportOption:[]},i=$.DefaultRequestParams(),o=new $(s,n,[],i);return o.setDepartureDatetime(),o}static initWithPlaces(e,r){const s=e.asStopPlaceRefOrCoords(),n=r.asStopPlaceRefOrCoords();return $.initWithPlaceRefsOrCoords(s,n)}setArrivalDatetime(e=new Date){delete this.payload.origin.depArrTime,this.payload.destination.depArrTime=e.toISOString()}setDepartureDatetime(e=new Date){delete this.payload.destination.depArrTime,this.payload.origin.depArrTime=e.toISOString()}setPublicTransportRequest(e=null){this.payload.params&&(this.payload.params.modeAndModeOfOperationFilter=void 0,e!==null&&e.length>0&&(this.payload.params.modeAndModeOfOperationFilter=[{exclude:!1,ptMode:e,personalMode:[]}]))}disableLinkProkection(){this.payload.params&&(this.payload.params.includeLegProjection=!1)}enableLinkProkection(){this.payload.params&&(this.payload.params.includeLegProjection=!0)}setCarRequest(){this.payload.params&&(this.payload.params.numberOfResults=0,this.payload.params.modeAndModeOfOperationFilter=[{ptMode:[],personalMode:[],railSubmode:"vehicleTunnelTransportRailService",waterSubmode:"localCarFerry"}])}setMaxDurationWalkingTime(e=void 0,r="both"){e||(e=30);const n={maxDuration:"PT"+e+"M",itModeAndModeOfOperation:{personalMode:"foot",personalModeOfOperation:["own"]}};(r==="origin"||r==="both")&&(this.payload.origin.individualTransportOption=[n]),(r==="destination"||r==="both")&&(this.payload.destination.individualTransportOption=[n])}setRailSubmodes(e){if(Array.isArray(e)||(e=[e]),!this.payload.params)return;this.payload.params.modeAndModeOfOperationFilter=[];const r=[];e.forEach(s=>{const n={exclude:!1,ptMode:[],personalMode:[],railSubmode:s};r.push(n)}),this.payload.params.modeAndModeOfOperationFilter=r}setNumberOfResults(e){this.payload.params&&(this.payload.params.numberOfResults=e??void 0)}setNumberOfResultsAfter(e){this.payload.params&&(this.payload.params.numberOfResultsAfter=e)}setNumberOfResultsBefore(e){this.payload.params&&(this.payload.params.numberOfResultsBefore=e)}setEndpointDurationDistanceRestrictions(e,r,s,n,i){if(r===null&&s===null&&n===null&&i===null)return;const o={itModeAndModeOfOperation:{personalMode:"foot",personalModeOfOperation:["own"]}};r!==null&&(o.minDuration="PT"+r+"M"),s!==null&&(o.maxDuration="PT"+s+"M"),n!==null&&(o.minDistance=n),i!==null&&(o.maxDistance=i),e.individualTransportOption=[o]}setOriginDurationDistanceRestrictions(e,r,s,n){const i=this.payload.origin;this.setEndpointDurationDistanceRestrictions(i,e,r,s,n)}setDestinationDurationDistanceRestrictions(e,r,s,n){const i=this.payload.destination;this.setEndpointDurationDistanceRestrictions(i,e,r,s,n)}setWalkSpeedDeviation(e){this.payload.params&&(this.payload.params.walkSpeed=e)}setViaPlace(e,r){const s=e.asStopPlaceRefOrCoords(),i={viaPoint:M.initWithPlaceRefsOrCoords(s)};if(r!==null){const o="PT"+r.toString()+"M";i.dwellTime=o}this.payload.via=[i]}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPTripRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPTripDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},Zn=class se extends Z{payload;constructor(e){super(),this.payload=e}static DefaultRequestParams(){return{fareAuthorityFilter:["ch:1:NOVA"],passengerCategory:["Adult"],travelClass:"second",traveller:[{age:25,passengerCategory:"Adult",entitlementProducts:{entitlementProduct:[{fareAuthorityRef:"ch:1:NOVA",entitlementProductRef:"HTA",entitlementProductName:"Halbtax-Abonnement"}]}}]}}static Default(){return new se([])}static cleanTripForFareRequest(e){e.tripLeg.forEach(r=>{if(r.continuousLeg&&(r.continuousLeg={legStart:{locationName:r.continuousLeg.legStart.locationName},legEnd:{locationName:r.continuousLeg.legEnd.locationName},service:{personalMode:"foot",personalModeOfOperation:"own"},duration:r.continuousLeg.duration}),r.transferLeg&&(r.transferLeg={transferType:r.transferLeg.transferType,legStart:{locationName:r.transferLeg.legStart.locationName},legEnd:{locationName:r.transferLeg.legEnd.locationName},duration:r.transferLeg.duration}),r.timedLeg){const s=r.timedLeg.legIntermediates.map(n=>({stopPointRef:n.stopPointRef,stopPointName:n.stopPointName,serviceArrival:n.serviceArrival,serviceDeparture:n.serviceDeparture}));r.timedLeg={legBoard:{stopPointRef:r.timedLeg.legBoard.stopPointRef,stopPointName:r.timedLeg.legBoard.stopPointName,serviceDeparture:r.timedLeg.legBoard.serviceDeparture},legIntermediates:s,legAlight:{stopPointRef:r.timedLeg.legAlight.stopPointRef,stopPointName:r.timedLeg.legAlight.stopPointName,serviceArrival:r.timedLeg.legAlight.serviceArrival},service:{operatingDayRef:r.timedLeg.service.operatingDayRef,journeyRef:r.timedLeg.service.journeyRef,lineRef:r.timedLeg.service.lineRef,directionRef:r.timedLeg.service.directionRef,mode:r.timedLeg.service.mode,publishedLineName:r.timedLeg.service.publishedLineName,attribute:r.timedLeg.service.attribute,operatorRef:r.timedLeg.service.operatorRef}}}})}static initWithOJPv1Trips(e){e.map(o=>{se.cleanTripForFareRequest(o)});const s=new Date().toISOString(),n=[];return e.forEach(o=>{const u={requestTimestamp:s,tripFareRequest:{trip:o},params:se.DefaultRequestParams()};n.push(u)}),new se(n)}buildRequestXML(e,r,s){if(s.ojpVersion!=="1.0")throw new Error("FareRequest can be consructed only with OJPv1 XML_Config");const n=O.computeRequestTimestamp();this.payload.forEach(u=>{u.requestTimestamp=n});const i={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:n,requestorRef:r,OJPFareRequest:this.payload}}};return J(i,s,(u=>{const a=s.defaultNS!=="siri"?"siri:":"",c=s.defaultNS!=="ojp"?"ojp:":"";u[a+"OJPRequest"][a+"ServiceRequest"][c+"OJPFareRequest"].forEach(p=>{p[c+"TripFareRequest"][c+"Trip"][c+"TripLeg"].forEach(y=>{if(c+"TimedLeg"in y){const d=y[c+"TimedLeg"][c+"Service"];a+"OperatorRef"in d&&(d[c+"OperatorRef"]=d[a+"OperatorRef"],delete d[a+"OperatorRef"])}})})}))}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPFareDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},Yn=class ne extends Re{payload;constructor(e){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),initialInput:void 0,placeRef:void 0,restrictions:e}}static Default(){const e=Re.DefaultRestrictionParams();return new ne(e)}static initWithLocationName(e,r=[],s=10){const n=ne.Default();return n.payload.initialInput={locationName:e},n.payload.restrictions&&n.updateRestrictions(n.payload.restrictions,r,s),n}static initWithPlaceRef(e,r=10){const s=ne.Default(),n=M.initWithPlaceRefsOrCoords(e);return s.payload.placeRef=n.asOJPv1Schema(),s.payload.restrictions&&s.updateRestrictions(s.payload.restrictions,["stop"],r),s}static initWithBBOX(e,r=[],s=10){const n=ne.Default(),i=this.computeGeoRestriction(e);return i&&(n.payload.initialInput={locationName:void 0,geoRestriction:i}),n.payload.restrictions&&n.updateRestrictions(n.payload.restrictions,r,s),n}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPLocationInformationRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPLocationInformationDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},Qn=class Ue extends H{payload;constructor(e,r=void 0){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),location:e,params:r}}static Default(){const r={placeRef:{stopPlaceRef:"8507000",locationName:{text:"n/a"}},depArrTime:new Date().toISOString()},s=H.DefaultRequestParams("1.0");return new Ue(r,s)}static initWithPlaceRefAndDate(e,r=new Date){const s={placeRef:{stopPlaceRef:e,locationName:{text:"n/a"}},depArrTime:r.toISOString()},n=H.DefaultRequestParams("1.0");return new Ue(s,n)}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPStopEventRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPStopEventDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},ei=class me extends be{payload;constructor(e,r,s){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),journeyRef:e,operatingDayRef:r,params:s},this.payload.params&&(this.payload.params.includeSituationsContext=void 0)}static Default(){return new me("n/a","n/a",be.DefaultRequestParams())}static initWithJourneyRef(e,r=new Date){const s=Yt.formatDate(r).substring(0,10),n=me.DefaultRequestParams();return new me(e,s,n)}enableTrackProjection(){this.payload.params&&(this.payload.params.includeTrackProjection=!0)}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPTripInfoRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPTripInfoDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},ti=class W extends er{payload;constructor(e,r,s=[],n=null){super(),this.payload={requestTimestamp:O.computeRequestTimestamp(),origin:e,destination:r,via:s,params:n??={}}}static DefaultRequestParams(){return{ptModeFilter:[],numberOfResults:5,numberOfResultsBefore:void 0,numberOfResultsAfter:void 0,includeAllRestrictedLines:!0,includeTrackSections:!0,includeLegProjection:!1,includeIntermediateStops:!0}}static Default(){const e=new Date,r={placeRef:M.initWithPlaceRefsOrCoords("8503000","Zürich").asOJPv1Schema(),depArrTime:e.toISOString()},s={placeRef:M.initWithPlaceRefsOrCoords("8507000","Bern").asOJPv1Schema()},n=W.DefaultRequestParams();return new W(r,s,[],n)}static initWithPlaceRefsOrCoords(e,r){const s={placeRef:M.initWithPlaceRefsOrCoords(e).asOJPv1Schema()},n={placeRef:M.initWithPlaceRefsOrCoords(r).asOJPv1Schema()},i=W.DefaultRequestParams(),o=new W(s,n,[],i);return o.setDepartureDatetime(),o}static initWithPlaces(e,r){const s=e.asStopPlaceRefOrCoords(),n=r.asStopPlaceRefOrCoords();return W.initWithPlaceRefsOrCoords(s,n)}setArrivalDatetime(e=new Date){delete this.payload.origin.depArrTime,this.payload.destination.depArrTime=e.toISOString()}setDepartureDatetime(e=new Date){delete this.payload.destination.depArrTime,this.payload.origin.depArrTime=e.toISOString()}disableLinkProkection(){this.payload.params&&(this.payload.params.includeLegProjection=!1)}enableLinkProkection(){this.payload.params&&(this.payload.params.includeLegProjection=!0)}setPublicTransportRequest(e){this.payload.params&&(this.payload.params.ptModeFilter=void 0,e!==null&&e.length>0&&(this.payload.params.ptModeFilter=[{exclude:!1,ptMode:e,personalMode:[]}]))}setCarRequest(){}setRailSubmodes(e){}setMaxDurationWalkingTime(e,r){}setNumberOfResults(e){this.payload.params&&(this.payload.params.numberOfResults=e??void 0)}setNumberOfResultsAfter(e){this.payload.params&&(this.payload.params.numberOfResultsAfter=e)}setNumberOfResultsBefore(e){this.payload.params&&(this.payload.params.numberOfResultsBefore=e)}setOriginDurationDistanceRestrictions(e,r,s,n){}setDestinationDurationDistanceRestrictions(e,r,s,n){}setWalkSpeedDeviation(e){}setViaPlace(e,r){const s=e.asStopPlaceRefOrCoords(),i={viaPoint:M.initWithPlaceRefsOrCoords(s).asOJPv1Schema()};if(r!==null){const o="PT"+r.toString()+"M";i.dwellTime=o}this.payload.via=[i]}buildRequestXML(e,r,s){this.payload.requestTimestamp=O.computeRequestTimestamp();const n={OJPRequest:{serviceRequest:{serviceRequestContext:{language:e},requestTimestamp:this.payload.requestTimestamp,requestorRef:r,OJPTripRequest:this.payload}}};return J(n,s)}async _fetchResponse(e){const r=e.version==="2.0"?L:k,s=await O.computeResponse(this,e,r);try{const i=C(s,e.version).OJP.OJPResponse.serviceDelivery.OJPTripDelivery;if(i===void 0)throw console.log(s),new Error("Parse error");return{ok:!0,value:i}}catch(n){return{ok:!1,error:n instanceof Error?n:new Error("Unknown error")}}}},mt=class{static init(){throw new Error("this request is not available for the selected OJP version")}},ri={"1.0":{FareRequest:Zn,LocationInformationRequest:Yn,StopEventRequest:Qn,TripInfoRequest:ei,TripRefineRequest:mt,TripRequest:ti},"2.0":{FareRequest:mt,LocationInformationRequest:Wn,StopEventRequest:Hn,TripInfoRequest:Kn,TripRefineRequest:zn,TripRequest:Gn}},Si=class De{version;requestorRef;httpConfig;language;constructor(e,r,s="en",n="2.0"){this.requestorRef=e,this.httpConfig=r,this.language=s,this.version=n}static create(e,r,s="en"){return new De(e,r,s,"2.0")}static v1(e,r,s="en"){return new De(e,r,s,"1.0")}get requests(){return ri[this.version]}};export{Yt as DateHelpers,L as DefaultXML_Config,pe as GeoPosition,Wn as LocationInformationRequest,Zn as OJPv1_FareRequest,Yn as OJPv1_LocationInformationRequest,Qn as OJPv1_StopEventRequest,ei as OJPv1_TripInfoRequest,ti as OJPv1_TripRequest,ht as Place,wi as PlaceResult,Si as SDK,Oi as SDK_VERSION,Hn as StopEventRequest,Ei as StopEventResult,Ti as Trip,Kn as TripInfoRequest,zn as TripRefineRequest,Gn as TripRequest,k as XML_BuilderConfigOJPv1,Pi as XML_ParserConfigOJPv1,jn as XmlSerializer};
